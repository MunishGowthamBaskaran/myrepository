YAHOO.namespace("YAHOO.Shopping.Listing");YAHOO.Shopping.Listing={init:function(){var a=YAHOO.util.Dom.getElementsByClassName("srch-form");if(a){YAHOO.util.Event.on(a,"submit",this.searchSubmitted,this,true);}var b=document.getElementById("shformpricerange");if(b){YAHOO.util.Event.on(b,"submit",this.priceSubmitted,this,true);}},searchSubmitted:function(b){if(!b.tagName){b=YAHOO.util.Event.getTarget(b);}var a=b.getElementsByTagName("SELECT")[0];if(a.value==-1){if(!YAHOO.Shopping.SearchFormData.keywordBaseUrl){return false;}b.action=YAHOO.Shopping.SearchFormData.keywordBaseUrl;a.value="0";}return true;},priceSubmitted:function(c){var b=YAHOO.util.Event.getTarget(c);var a=b.getElementsByTagName("INPUT");if(a&&a.length&&a.length>1){if(a[0].value=="From $"){a[0].value="";}if(a[1].value=="To $"){a[1].value="";}}return true;}};YAHOO.Shopping.Listing.init();YAHOO.namespace("YAHOO.Shopping.Narrowings");YAHOO.Shopping.Narrowings={init:function(){this.narrowingCont=document.getElementById("shmodnarrowing");if(!this.narrowingCont){return false;}this.seeAllLinks=YAHOO.util.Dom.getElementsByClassName("seeall","A",this.narrowingCont);YAHOO.util.Event.on(this.seeAllLinks,"click",this.showAll,this,true);},showAll:function(d){YAHOO.util.Event.preventDefault(d);var c=YAHOO.util.Event.getTarget(d);if(c.tagName=="STRONG"){c=c.parentNode;}var a=c.href;var b=0;while(!YAHOO.util.Dom.hasClass(c,"narrowing")&&b<5){c=c.parentNode;b++;}this.showMoreNarrowings(c,true);return false;},showMoreNarrowings:function(g,f){var a=YAHOO.util.Dom.getElementsByClassName("narrowing-container","DIV",g)[0];var e=YAHOO.util.Dom.getElementsByClassName("more-narrowing-container","DIV",g);if(!e||!e.length||e.length==0){var d=YAHOO.Shopping.NarrowingData[g.id];if(!d||!d.name||d.name==""){return false;}e=document.createElement("DIV");e.className="more-narrowing-container exp-hide";if(d.attributes.length<12){e.className+=" more-narrowing-container-small";}var c="";c+="<ul>";c+='<li><a href="" class="close-more"><strong>'+d.lessText+"</strong></a></li>";for(var b=0;b<d.attributes.length;b++){c+="<li>";c+='<a href="'+d.attributes[b].url+'" '+d.attributes[b].alt+">"+d.attributes[b].shortName+"</a>";if(parseInt(d.attributes[b].nr)>0){c+=' <span class="freq">('+d.attributes[b].nr+")</span>";}c+="</li>";}c+="</ul>";e.innerHTML=c;g.appendChild(e);YAHOO.util.Event.on(YAHOO.util.Dom.getElementsByClassName("close-more","A",e),"click",this.showLessNarrowings,this,true);}else{e=e[0];}YAHOO.util.Dom.addClass(a,"hidden");YAHOO.util.Dom.removeClass(e,"hidden");},showLessNarrowings:function(f){YAHOO.util.Event.preventDefault(f);var d=YAHOO.util.Event.getTarget(f);var c=0;while(!YAHOO.util.Dom.hasClass(d,"narrowing")&&c<5){d=d.parentNode;c++;}var a=YAHOO.util.Dom.getElementsByClassName("narrowing-container","DIV",d)[0];var b=YAHOO.util.Dom.getElementsByClassName("more-narrowing-container","DIV",d);YAHOO.util.Dom.removeClass(a,"hidden");YAHOO.util.Dom.addClass(b,"hidden");return false;}};YAHOO.Shopping.Narrowings.init();YAHOO.namespace("YAHOO.Shopping.ColorNarrowing");YAHOO.Shopping.ColorNarrowing={init:function(){this.palette=document.getElementById("small_color_palette");if(!this.palette){return;}this.expandable_palette=document.getElementById("expandable_palette");this.selected="";this.state="expand";this.collReqNum=0;this.listItems=this.palette.getElementsByTagName("LI");for(var a=0;a<this.listItems.length;a++){el=this.listItems[a];if(el.className&&YAHOO.util.Dom.hasClass(el,"selected")){YAHOO.util.Dom.removeClass(el,"hselected");YAHOO.util.Dom.addClass(el,"selected");this.selected=el;break;}}if(window.attachEvent){this.palette.attachEvent("onmouseover",this.mouseOver);this.palette.attachEvent("onmouseout",this.mouseOut);}else{if(window.addEventListener){this.palette.addEventListener("mouseover",this.mouseOver,false);this.palette.addEventListener("mouseout",this.mouseOut,false);}}},mouseOut:function(b){var a=YAHOO.Shopping.ColorNarrowing;if(a.expandable_palette){a.collapsePalette(true);}a.unselectSelected();},mouseOver:function(d){var b=YAHOO.Shopping.ColorNarrowing;if(b.expandable_palette){b.expandPalette(true);}b.unselectSelected();var c="";if(window.attachEvent){c=d.srcElement;}else{if(window.addEventListener){c=d.target;}}var a=0;while(c.tagName!="LI"&&c.tagName!="DIV"&&a<5){c=c.parentNode;a++;}if(c.tagName=="LI"){b.select(c);}},select:function(a){this.selected=a;YAHOO.util.Dom.addClass(this.selected,"selected");},unselectSelected:function(){if(this.selected.className){YAHOO.util.Dom.removeClass(this.selected,"selected");this.selected="";}},expandPalette:function(b){var a=YAHOO.Shopping.ColorNarrowing;if(typeof b=="undefined"&&a.state=="expand"){YAHOO.util.Dom.removeClass(a.expandable_palette,"off");}else{if(b){a.state="expand";window.setTimeout("YAHOO.Shopping.ColorNarrowing.expandPalette();",400);}}},collapsePalette:function(c,a){var b=YAHOO.Shopping.ColorNarrowing;if(!c&&b.state=="collapse"&&a==b.collReqNum){YAHOO.util.Dom.addClass(b.expandable_palette,"off");}else{if(c){b.state="collapse";b.collReqNum++;window.setTimeout("YAHOO.Shopping.ColorNarrowing.collapsePalette(false, "+b.collReqNum+");",400);}}}};YAHOO.Shopping.ColorNarrowing.init();YAHOO.namespace("YAHOO.Shopping.Compare");YAHOO.Shopping.Compare={init:function(){this.checks=YAHOO.util.Dom.getElementsByClassName("compare-check");if(!this.checks){return false;}this.links=YAHOO.util.Dom.getElementsByClassName("compare-link");YAHOO.util.Event.on(this.checks,"click",this.compareClicked,this,true);YAHOO.util.Event.on(this.links,"click",this.compareClicked,this,true);},compareClicked:function(c){target=YAHOO.util.Event.getTarget(c);var d=this.getSaveId(target.id);if(!d){return false;}if(YAHOO.Shopping.CompareCookieData[d]){if(target.tagName!="A"){delete YAHOO.Shopping.CompareCookieData[d];}}else{YAHOO.Shopping.CompareCookieData[d]=1;if(target.tagName=="A"){target.parentNode.getElementsByTagName("INPUT")[0].checked=true;}}this.updateCookie();if(target.tagName=="A"){YAHOO.util.Event.preventDefault(c);var b=0;for(var d in YAHOO.Shopping.CompareCookieData){if(++b>1){break;}}if(b<2){alert("Please select more than 1 product and click compare");}else{YAHOO.Shopping.util.popup(target.href,"compare","width=785,height=625,resizable=yes,location=no,menubar=no,scrollbars=yes");for(var a in this.checks){this.checks[a].checked=false;YAHOO.Shopping.CompareCookieData=[];}}}return;},getSaveId:function(b){if(!b){return false;}var a=b.split("-").pop();if(!a){return false;}if(!YAHOO.Shopping.CompareData[a]){return false;}return YAHOO.Shopping.CompareData[a];},updateCookie:function(){var b="";for(var a in YAHOO.Shopping.CompareCookieData){b+=a+",";}YAHOO.Shopping.util.setCookie("shpzcompare",b,null);},initSideBySide:function(){if(!YAHOO.Shopping.Carousel){return false;}if(!document.getElementById("shmodcompareproducts")){return false;}this.compareTitleEl=document.getElementById("shmodcomparetitle");this.carousel=new YAHOO.Shopping.Carousel("shmodcompareproducts",{animate:"scroll",autoplay:false,scrollWidth:196,scrollSize:3,viewSize:3});this.carousel.scrollEvent.subscribe(this.onScrollCarousel,this);},onScrollCarousel:function(b,a,c){if(!a[0]){return false;}a=a[0];var e=a.selectedCont+1;var d=a.selectedCont+3;if(d>a.numConts){d=a.numConts;}c.compareTitleEl.innerHTML="<strong>Comparing "+e+" - "+d+" of "+a.numConts+" products</strong>";}};YAHOO.Shopping.Compare.init();YAHOO.Shopping.Compare.initSideBySide();YAHOO.Shopping.util.initExpandos=function(){var b=document.getElementById("brandseealllink");if(b&&b.moreurl){b.href=b.moreurl;}var a=YAHOO.util.Dom.getElementsByClassName("exp-toggle");YAHOO.util.Event.on(a,"click",function(f){YAHOO.util.Event.preventDefault(f);var d=YAHOO.util.Event.getTarget(f);var c=0;while(c++<10&&!YAHOO.util.Dom.hasClass(d,"exp-expandable")){d=d.parentNode;}if(YAHOO.util.Dom.hasClass(d,"exp-expanded")){YAHOO.util.Dom.replaceClass(d,"exp-expanded","exp-collapsed");}else{if(YAHOO.util.Dom.hasClass(d,"exp-collapsed")){YAHOO.util.Dom.replaceClass(d,"exp-collapsed","exp-expanded");}}});};YUI().use("node",function(a){a.on("contentready",function(){var d=a.one(".left-nav-list-l1 .more-link"),b=a.one(".left-nav-container .selected"),c=a.config.win.location.pathname;if(d){d.on("click",function(f){f.preventDefault();var g=a.one(".l1below-more-links");if(g){g.setStyle("display","block");d.remove();}});}},".left-nav-container");});YUI({filter:"debug",combine:false,logInclude:{event:false,attribute:true}}).use("node","event",function(b){var a=function(){var e={li_el:"li.bgclickable",stop_el:"ul",container:"#shrightcol"},d=["a","input"],c=false;return{init:function(f){if(f.new_window){c=f.new_window;}this.makeClickable();},makeClickable:function(){var f=b.all(e.li_el);if(f){b.all(e.li_el).setStyle("cursor","pointer");b.detach("click",this.handleClick,e.container);b.delegate("click",this.handleClick,e.container,e.li_el,this);}},setCursor:function(g,h){var f=b.all(g);if(f){f.setStyle("cursor",h);}},isLink:function(g){for(var f=0;f<d.length;f++){if(g.ancestor(d[f],true,e.stop_el)){return true;}}return false;},handleClick:function(h){var i=h.target||h.srcElement;if(i&&!this.isLink(i)){var g=i.ancestor("li",true,e.stop_el);if(g){var f=g.getAttribute("data-bg-link");if(f){if(c){window.open(f);}else{window.location.href=f;}}}}}};}();b.on("domready",function(){a.init({new_window:true});});});/*
Copyright (c) 2009, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.net/yui/license.txt
version: 2.7.0
*/
YAHOO.util.Connect={_msxml_progid:["Microsoft.XMLHTTP","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP"],_http_headers:{},_has_http_headers:false,_use_default_post_header:true,_default_post_header:"application/x-www-form-urlencoded; charset=UTF-8",_default_form_header:"application/x-www-form-urlencoded",_use_default_xhr_header:true,_default_xhr_header:"XMLHttpRequest",_has_default_headers:true,_default_headers:{},_isFormSubmit:false,_isFileUpload:false,_formNode:null,_sFormData:null,_poll:{},_timeOut:{},_polling_interval:50,_transaction_id:0,_submitElementValue:null,_hasSubmitListener:(function(){if(YAHOO.util.Event){YAHOO.util.Event.addListener(document,"click",function(C){var B=YAHOO.util.Event.getTarget(C),A=B.nodeName.toLowerCase();if((A==="input"||A==="button")&&(B.type&&B.type.toLowerCase()=="submit")){YAHOO.util.Connect._submitElementValue=encodeURIComponent(B.name)+"="+encodeURIComponent(B.value);}});return true;}return false;})(),startEvent:new YAHOO.util.CustomEvent("start"),completeEvent:new YAHOO.util.CustomEvent("complete"),successEvent:new YAHOO.util.CustomEvent("success"),failureEvent:new YAHOO.util.CustomEvent("failure"),uploadEvent:new YAHOO.util.CustomEvent("upload"),abortEvent:new YAHOO.util.CustomEvent("abort"),_customEvents:{onStart:["startEvent","start"],onComplete:["completeEvent","complete"],onSuccess:["successEvent","success"],onFailure:["failureEvent","failure"],onUpload:["uploadEvent","upload"],onAbort:["abortEvent","abort"]},setProgId:function(A){this._msxml_progid.unshift(A);},setDefaultPostHeader:function(A){if(typeof A=="string"){this._default_post_header=A;}else{if(typeof A=="boolean"){this._use_default_post_header=A;}}},setDefaultXhrHeader:function(A){if(typeof A=="string"){this._default_xhr_header=A;}else{this._use_default_xhr_header=A;}},setPollingInterval:function(A){if(typeof A=="number"&&isFinite(A)){this._polling_interval=A;}},createXhrObject:function(F){var E,A;try{A=new XMLHttpRequest();E={conn:A,tId:F};}catch(D){for(var B=0;B<this._msxml_progid.length;++B){try{A=new ActiveXObject(this._msxml_progid[B]);E={conn:A,tId:F};break;}catch(C){}}}finally{return E;}},getConnectionObject:function(A){var C;var D=this._transaction_id;try{if(!A){C=this.createXhrObject(D);}else{C={};C.tId=D;C.isUpload=true;}if(C){this._transaction_id++;}}catch(B){}finally{return C;}},asyncRequest:function(F,C,E,A){var D=(this._isFileUpload)?this.getConnectionObject(true):this.getConnectionObject();var B=(E&&E.argument)?E.argument:null;if(!D){return null;}else{if(E&&E.customevents){this.initCustomEvents(D,E);}if(this._isFormSubmit){if(this._isFileUpload){this.uploadFile(D,E,C,A);return D;}if(F.toUpperCase()=="GET"){if(this._sFormData.length!==0){C+=((C.indexOf("?")==-1)?"?":"&")+this._sFormData;}}else{if(F.toUpperCase()=="POST"){A=A?this._sFormData+"&"+A:this._sFormData;}}}if(F.toUpperCase()=="GET"&&(E&&E.cache===false)){C+=((C.indexOf("?")==-1)?"?":"&")+"rnd="+new Date().valueOf().toString();}D.conn.open(F,C,true);if(this._use_default_xhr_header){if(!this._default_headers["X-Requested-With"]){this.initHeader("X-Requested-With",this._default_xhr_header,true);}}if((F.toUpperCase()==="POST"&&this._use_default_post_header)&&this._isFormSubmit===false){this.initHeader("Content-Type",this._default_post_header);}if(this._has_default_headers||this._has_http_headers){this.setHeader(D);}this.handleReadyState(D,E);D.conn.send(A||"");if(this._isFormSubmit===true){this.resetFormState();}this.startEvent.fire(D,B);if(D.startEvent){D.startEvent.fire(D,B);}return D;}},initCustomEvents:function(A,C){var B;for(B in C.customevents){if(this._customEvents[B][0]){A[this._customEvents[B][0]]=new YAHOO.util.CustomEvent(this._customEvents[B][1],(C.scope)?C.scope:null);A[this._customEvents[B][0]].subscribe(C.customevents[B]);}}},handleReadyState:function(C,D){var B=this;var A=(D&&D.argument)?D.argument:null;if(D&&D.timeout){this._timeOut[C.tId]=window.setTimeout(function(){B.abort(C,D,true);},D.timeout);}this._poll[C.tId]=window.setInterval(function(){if(C.conn&&C.conn.readyState===4){window.clearInterval(B._poll[C.tId]);delete B._poll[C.tId];if(D&&D.timeout){window.clearTimeout(B._timeOut[C.tId]);delete B._timeOut[C.tId];}B.completeEvent.fire(C,A);if(C.completeEvent){C.completeEvent.fire(C,A);}B.handleTransactionResponse(C,D);}},this._polling_interval);},handleTransactionResponse:function(F,G,A){var D,C;var B=(G&&G.argument)?G.argument:null;try{if(F.conn.status!==undefined&&F.conn.status!==0){D=F.conn.status;}else{D=13030;}}catch(E){D=13030;}if(D>=200&&D<300||D===1223){C=this.createResponseObject(F,B);if(G&&G.success){if(!G.scope){G.success(C);}else{G.success.apply(G.scope,[C]);}}this.successEvent.fire(C);if(F.successEvent){F.successEvent.fire(C);}}else{switch(D){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:C=this.createExceptionObject(F.tId,B,(A?A:false));if(G&&G.failure){if(!G.scope){G.failure(C);}else{G.failure.apply(G.scope,[C]);}}break;default:C=this.createResponseObject(F,B);if(G&&G.failure){if(!G.scope){G.failure(C);}else{G.failure.apply(G.scope,[C]);}}}this.failureEvent.fire(C);if(F.failureEvent){F.failureEvent.fire(C);}}this.releaseObject(F);C=null;},createResponseObject:function(A,G){var D={};var I={};try{var C=A.conn.getAllResponseHeaders();var F=C.split("\n");for(var E=0;E<F.length;E++){var B=F[E].indexOf(":");if(B!=-1){I[F[E].substring(0,B)]=F[E].substring(B+2);}}}catch(H){}D.tId=A.tId;D.status=(A.conn.status==1223)?204:A.conn.status;D.statusText=(A.conn.status==1223)?"No Content":A.conn.statusText;D.getResponseHeader=I;D.getAllResponseHeaders=C;D.responseText=A.conn.responseText;D.responseXML=A.conn.responseXML;if(G){D.argument=G;}return D;},createExceptionObject:function(H,D,A){var F=0;var G="communication failure";var C=-1;var B="transaction aborted";var E={};E.tId=H;if(A){E.status=C;E.statusText=B;}else{E.status=F;E.statusText=G;}if(D){E.argument=D;}return E;},initHeader:function(A,D,C){var B=(C)?this._default_headers:this._http_headers;B[A]=D;if(C){this._has_default_headers=true;
}else{this._has_http_headers=true;}},setHeader:function(A){var B;if(this._has_default_headers){for(B in this._default_headers){if(YAHOO.lang.hasOwnProperty(this._default_headers,B)){A.conn.setRequestHeader(B,this._default_headers[B]);}}}if(this._has_http_headers){for(B in this._http_headers){if(YAHOO.lang.hasOwnProperty(this._http_headers,B)){A.conn.setRequestHeader(B,this._http_headers[B]);}}delete this._http_headers;this._http_headers={};this._has_http_headers=false;}},resetDefaultHeaders:function(){delete this._default_headers;this._default_headers={};this._has_default_headers=false;},setForm:function(M,H,C){var L,B,K,I,P,J=false,F=[],O=0,E,G,D,N,A;this.resetFormState();if(typeof M=="string"){L=(document.getElementById(M)||document.forms[M]);}else{if(typeof M=="object"){L=M;}else{return;}}if(H){this.createFrame(C?C:null);this._isFormSubmit=true;this._isFileUpload=true;this._formNode=L;return;}for(E=0,G=L.elements.length;E<G;++E){B=L.elements[E];P=B.disabled;K=B.name;if(!P&&K){K=encodeURIComponent(K)+"=";I=encodeURIComponent(B.value);switch(B.type){case"select-one":if(B.selectedIndex>-1){A=B.options[B.selectedIndex];F[O++]=K+encodeURIComponent((A.attributes.value&&A.attributes.value.specified)?A.value:A.text);}break;case"select-multiple":if(B.selectedIndex>-1){for(D=B.selectedIndex,N=B.options.length;D<N;++D){A=B.options[D];if(A.selected){F[O++]=K+encodeURIComponent((A.attributes.value&&A.attributes.value.specified)?A.value:A.text);}}}break;case"radio":case"checkbox":if(B.checked){F[O++]=K+I;}break;case"file":case undefined:case"reset":case"button":break;case"submit":if(J===false){if(this._hasSubmitListener&&this._submitElementValue){F[O++]=this._submitElementValue;}J=true;}break;default:F[O++]=K+I;}}}this._isFormSubmit=true;this._sFormData=F.join("&");this.initHeader("Content-Type",this._default_form_header);return this._sFormData;},resetFormState:function(){this._isFormSubmit=false;this._isFileUpload=false;this._formNode=null;this._sFormData="";},createFrame:function(A){var B="yuiIO"+this._transaction_id;var C;if(YAHOO.env.ua.ie){C=document.createElement('<iframe id="'+B+'" name="'+B+'" />');if(typeof A=="boolean"){C.src="javascript:false";}}else{C=document.createElement("iframe");C.id=B;C.name=B;}C.style.position="absolute";C.style.top="-1000px";C.style.left="-1000px";document.body.appendChild(C);},appendPostData:function(A){var D=[],B=A.split("&"),C,E;for(C=0;C<B.length;C++){E=B[C].indexOf("=");if(E!=-1){D[C]=document.createElement("input");D[C].type="hidden";D[C].name=decodeURIComponent(B[C].substring(0,E));D[C].value=decodeURIComponent(B[C].substring(E+1));this._formNode.appendChild(D[C]);}}return D;},uploadFile:function(D,N,E,C){var I="yuiIO"+D.tId,J="multipart/form-data",L=document.getElementById(I),O=this,K=(N&&N.argument)?N.argument:null,M,H,B,G;var A={action:this._formNode.getAttribute("action"),method:this._formNode.getAttribute("method"),target:this._formNode.getAttribute("target")};this._formNode.setAttribute("action",E);this._formNode.setAttribute("method","POST");this._formNode.setAttribute("target",I);if(YAHOO.env.ua.ie){this._formNode.setAttribute("encoding",J);}else{this._formNode.setAttribute("enctype",J);}if(C){M=this.appendPostData(C);}this._formNode.submit();this.startEvent.fire(D,K);if(D.startEvent){D.startEvent.fire(D,K);}if(N&&N.timeout){this._timeOut[D.tId]=window.setTimeout(function(){O.abort(D,N,true);},N.timeout);}if(M&&M.length>0){for(H=0;H<M.length;H++){this._formNode.removeChild(M[H]);}}for(B in A){if(YAHOO.lang.hasOwnProperty(A,B)){if(A[B]){this._formNode.setAttribute(B,A[B]);}else{this._formNode.removeAttribute(B);}}}this.resetFormState();var F=function(){if(N&&N.timeout){window.clearTimeout(O._timeOut[D.tId]);delete O._timeOut[D.tId];}O.completeEvent.fire(D,K);if(D.completeEvent){D.completeEvent.fire(D,K);}G={tId:D.tId,argument:N.argument};try{G.responseText=L.contentWindow.document.body?L.contentWindow.document.body.innerHTML:L.contentWindow.document.documentElement.textContent;G.responseXML=L.contentWindow.document.XMLDocument?L.contentWindow.document.XMLDocument:L.contentWindow.document;}catch(P){}if(N&&N.upload){if(!N.scope){N.upload(G);}else{N.upload.apply(N.scope,[G]);}}O.uploadEvent.fire(G);if(D.uploadEvent){D.uploadEvent.fire(G);}YAHOO.util.Event.removeListener(L,"load",F);setTimeout(function(){document.body.removeChild(L);O.releaseObject(D);},100);};YAHOO.util.Event.addListener(L,"load",F);},abort:function(E,G,A){var D;var B=(G&&G.argument)?G.argument:null;if(E&&E.conn){if(this.isCallInProgress(E)){E.conn.abort();window.clearInterval(this._poll[E.tId]);delete this._poll[E.tId];if(A){window.clearTimeout(this._timeOut[E.tId]);delete this._timeOut[E.tId];}D=true;}}else{if(E&&E.isUpload===true){var C="yuiIO"+E.tId;var F=document.getElementById(C);if(F){YAHOO.util.Event.removeListener(F,"load");document.body.removeChild(F);if(A){window.clearTimeout(this._timeOut[E.tId]);delete this._timeOut[E.tId];}D=true;}}else{D=false;}}if(D===true){this.abortEvent.fire(E,B);if(E.abortEvent){E.abortEvent.fire(E,B);}this.handleTransactionResponse(E,G,true);}return D;},isCallInProgress:function(B){if(B&&B.conn){return B.conn.readyState!==4&&B.conn.readyState!==0;}else{if(B&&B.isUpload===true){var A="yuiIO"+B.tId;return document.getElementById(A)?true:false;}else{return false;}}},releaseObject:function(A){if(A&&A.conn){A.conn=null;A=null;}}};YAHOO.register("connection",YAHOO.util.Connect,{version:"2.7.0",build:"1796"});/*
Copyright (c) 2009, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.net/yui/license.txt
version: 2.7.0
*/
(function(){var B=YAHOO.util;var A=function(D,C,E,F){if(!D){}this.init(D,C,E,F);};A.NAME="Anim";A.prototype={toString:function(){var C=this.getEl()||{};var D=C.id||C.tagName;return(this.constructor.NAME+": "+D);},patterns:{noNegatives:/width|height|opacity|padding/i,offsetAttribute:/^((width|height)|(top|left))$/,defaultUnit:/width|height|top$|bottom$|left$|right$/i,offsetUnit:/\d+(em|%|en|ex|pt|in|cm|mm|pc)$/i},doMethod:function(C,E,D){return this.method(this.currentFrame,E,D-E,this.totalFrames);},setAttribute:function(C,F,E){var D=this.getEl();if(this.patterns.noNegatives.test(C)){F=(F>0)?F:0;}if("style" in D){B.Dom.setStyle(D,C,F+E);}else{if(C in D){D[C]=F;}}},getAttribute:function(C){var E=this.getEl();var G=B.Dom.getStyle(E,C);if(G!=="auto"&&!this.patterns.offsetUnit.test(G)){return parseFloat(G);}var D=this.patterns.offsetAttribute.exec(C)||[];var H=!!(D[3]);var F=!!(D[2]);if("style" in E){if(F||(B.Dom.getStyle(E,"position")=="absolute"&&H)){G=E["offset"+D[0].charAt(0).toUpperCase()+D[0].substr(1)];}else{G=0;}}else{if(C in E){G=E[C];}}return G;},getDefaultUnit:function(C){if(this.patterns.defaultUnit.test(C)){return"px";}return"";},setRuntimeAttribute:function(D){var I;var E;var F=this.attributes;this.runtimeAttributes[D]={};var H=function(J){return(typeof J!=="undefined");};if(!H(F[D]["to"])&&!H(F[D]["by"])){return false;}I=(H(F[D]["from"]))?F[D]["from"]:this.getAttribute(D);if(H(F[D]["to"])){E=F[D]["to"];}else{if(H(F[D]["by"])){if(I.constructor==Array){E=[];for(var G=0,C=I.length;G<C;++G){E[G]=I[G]+F[D]["by"][G]*1;}}else{E=I+F[D]["by"]*1;}}}this.runtimeAttributes[D].start=I;this.runtimeAttributes[D].end=E;this.runtimeAttributes[D].unit=(H(F[D].unit))?F[D]["unit"]:this.getDefaultUnit(D);return true;},init:function(E,J,I,C){var D=false;var F=null;var H=0;E=B.Dom.get(E);this.attributes=J||{};this.duration=!YAHOO.lang.isUndefined(I)?I:1;this.method=C||B.Easing.easeNone;this.useSeconds=true;this.currentFrame=0;this.totalFrames=B.AnimMgr.fps;this.setEl=function(M){E=B.Dom.get(M);};this.getEl=function(){return E;};this.isAnimated=function(){return D;};this.getStartTime=function(){return F;};this.runtimeAttributes={};this.animate=function(){if(this.isAnimated()){return false;}this.currentFrame=0;this.totalFrames=(this.useSeconds)?Math.ceil(B.AnimMgr.fps*this.duration):this.duration;if(this.duration===0&&this.useSeconds){this.totalFrames=1;}B.AnimMgr.registerElement(this);return true;};this.stop=function(M){if(!this.isAnimated()){return false;}if(M){this.currentFrame=this.totalFrames;this._onTween.fire();}B.AnimMgr.stop(this);};var L=function(){this.onStart.fire();this.runtimeAttributes={};for(var M in this.attributes){this.setRuntimeAttribute(M);}D=true;H=0;F=new Date();};var K=function(){var O={duration:new Date()-this.getStartTime(),currentFrame:this.currentFrame};O.toString=function(){return("duration: "+O.duration+", currentFrame: "+O.currentFrame);};this.onTween.fire(O);var N=this.runtimeAttributes;for(var M in N){this.setAttribute(M,this.doMethod(M,N[M].start,N[M].end),N[M].unit);}H+=1;};var G=function(){var M=(new Date()-F)/1000;var N={duration:M,frames:H,fps:H/M};N.toString=function(){return("duration: "+N.duration+", frames: "+N.frames+", fps: "+N.fps);};D=false;H=0;this.onComplete.fire(N);};this._onStart=new B.CustomEvent("_start",this,true);this.onStart=new B.CustomEvent("start",this);this.onTween=new B.CustomEvent("tween",this);this._onTween=new B.CustomEvent("_tween",this,true);this.onComplete=new B.CustomEvent("complete",this);this._onComplete=new B.CustomEvent("_complete",this,true);this._onStart.subscribe(L);this._onTween.subscribe(K);this._onComplete.subscribe(G);}};B.Anim=A;})();YAHOO.util.AnimMgr=new function(){var C=null;var B=[];var A=0;this.fps=1000;this.delay=1;this.registerElement=function(F){B[B.length]=F;A+=1;F._onStart.fire();this.start();};this.unRegister=function(G,F){F=F||E(G);if(!G.isAnimated()||F==-1){return false;}G._onComplete.fire();B.splice(F,1);A-=1;if(A<=0){this.stop();}return true;};this.start=function(){if(C===null){C=setInterval(this.run,this.delay);}};this.stop=function(H){if(!H){clearInterval(C);for(var G=0,F=B.length;G<F;++G){this.unRegister(B[0],0);}B=[];C=null;A=0;}else{this.unRegister(H);}};this.run=function(){for(var H=0,F=B.length;H<F;++H){var G=B[H];if(!G||!G.isAnimated()){continue;}if(G.currentFrame<G.totalFrames||G.totalFrames===null){G.currentFrame+=1;if(G.useSeconds){D(G);}G._onTween.fire();}else{YAHOO.util.AnimMgr.stop(G,H);}}};var E=function(H){for(var G=0,F=B.length;G<F;++G){if(B[G]==H){return G;}}return -1;};var D=function(G){var J=G.totalFrames;var I=G.currentFrame;var H=(G.currentFrame*G.duration*1000/G.totalFrames);var F=(new Date()-G.getStartTime());var K=0;if(F<G.duration*1000){K=Math.round((F/H-1)*G.currentFrame);}else{K=J-(I+1);}if(K>0&&isFinite(K)){if(G.currentFrame+K>=J){K=J-(I+1);}G.currentFrame+=K;}};};YAHOO.util.Bezier=new function(){this.getPosition=function(E,D){var F=E.length;var C=[];for(var B=0;B<F;++B){C[B]=[E[B][0],E[B][1]];}for(var A=1;A<F;++A){for(B=0;B<F-A;++B){C[B][0]=(1-D)*C[B][0]+D*C[parseInt(B+1,10)][0];C[B][1]=(1-D)*C[B][1]+D*C[parseInt(B+1,10)][1];}}return[C[0][0],C[0][1]];};};(function(){var A=function(F,E,G,H){A.superclass.constructor.call(this,F,E,G,H);};A.NAME="ColorAnim";A.DEFAULT_BGCOLOR="#fff";var C=YAHOO.util;YAHOO.extend(A,C.Anim);var D=A.superclass;var B=A.prototype;B.patterns.color=/color$/i;B.patterns.rgb=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i;B.patterns.hex=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i;B.patterns.hex3=/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i;B.patterns.transparent=/^transparent|rgba\(0, 0, 0, 0\)$/;B.parseColor=function(E){if(E.length==3){return E;}var F=this.patterns.hex.exec(E);if(F&&F.length==4){return[parseInt(F[1],16),parseInt(F[2],16),parseInt(F[3],16)];}F=this.patterns.rgb.exec(E);if(F&&F.length==4){return[parseInt(F[1],10),parseInt(F[2],10),parseInt(F[3],10)];}F=this.patterns.hex3.exec(E);if(F&&F.length==4){return[parseInt(F[1]+F[1],16),parseInt(F[2]+F[2],16),parseInt(F[3]+F[3],16)];
}return null;};B.getAttribute=function(E){var G=this.getEl();if(this.patterns.color.test(E)){var I=YAHOO.util.Dom.getStyle(G,E);var H=this;if(this.patterns.transparent.test(I)){var F=YAHOO.util.Dom.getAncestorBy(G,function(J){return !H.patterns.transparent.test(I);});if(F){I=C.Dom.getStyle(F,E);}else{I=A.DEFAULT_BGCOLOR;}}}else{I=D.getAttribute.call(this,E);}return I;};B.doMethod=function(F,J,G){var I;if(this.patterns.color.test(F)){I=[];for(var H=0,E=J.length;H<E;++H){I[H]=D.doMethod.call(this,F,J[H],G[H]);}I="rgb("+Math.floor(I[0])+","+Math.floor(I[1])+","+Math.floor(I[2])+")";}else{I=D.doMethod.call(this,F,J,G);}return I;};B.setRuntimeAttribute=function(F){D.setRuntimeAttribute.call(this,F);if(this.patterns.color.test(F)){var H=this.attributes;var J=this.parseColor(this.runtimeAttributes[F].start);var G=this.parseColor(this.runtimeAttributes[F].end);if(typeof H[F]["to"]==="undefined"&&typeof H[F]["by"]!=="undefined"){G=this.parseColor(H[F].by);for(var I=0,E=J.length;I<E;++I){G[I]=J[I]+G[I];}}this.runtimeAttributes[F].start=J;this.runtimeAttributes[F].end=G;}};C.ColorAnim=A;})();
/*
TERMS OF USE - EASING EQUATIONS
Open source under the BSD License.
Copyright 2001 Robert Penner All rights reserved.

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

 * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
 * Neither the name of the author nor the names of contributors may be used to endorse or promote products derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
YAHOO.util.Easing={easeNone:function(B,A,D,C){return D*B/C+A;},easeIn:function(B,A,D,C){return D*(B/=C)*B+A;},easeOut:function(B,A,D,C){return -D*(B/=C)*(B-2)+A;},easeBoth:function(B,A,D,C){if((B/=C/2)<1){return D/2*B*B+A;}return -D/2*((--B)*(B-2)-1)+A;},easeInStrong:function(B,A,D,C){return D*(B/=C)*B*B*B+A;},easeOutStrong:function(B,A,D,C){return -D*((B=B/C-1)*B*B*B-1)+A;},easeBothStrong:function(B,A,D,C){if((B/=C/2)<1){return D/2*B*B*B*B+A;}return -D/2*((B-=2)*B*B*B-2)+A;},elasticIn:function(C,A,G,F,B,E){if(C==0){return A;}if((C/=F)==1){return A+G;}if(!E){E=F*0.3;}if(!B||B<Math.abs(G)){B=G;var D=E/4;}else{var D=E/(2*Math.PI)*Math.asin(G/B);}return -(B*Math.pow(2,10*(C-=1))*Math.sin((C*F-D)*(2*Math.PI)/E))+A;},elasticOut:function(C,A,G,F,B,E){if(C==0){return A;}if((C/=F)==1){return A+G;}if(!E){E=F*0.3;}if(!B||B<Math.abs(G)){B=G;var D=E/4;}else{var D=E/(2*Math.PI)*Math.asin(G/B);}return B*Math.pow(2,-10*C)*Math.sin((C*F-D)*(2*Math.PI)/E)+G+A;},elasticBoth:function(C,A,G,F,B,E){if(C==0){return A;}if((C/=F/2)==2){return A+G;}if(!E){E=F*(0.3*1.5);}if(!B||B<Math.abs(G)){B=G;var D=E/4;}else{var D=E/(2*Math.PI)*Math.asin(G/B);}if(C<1){return -0.5*(B*Math.pow(2,10*(C-=1))*Math.sin((C*F-D)*(2*Math.PI)/E))+A;}return B*Math.pow(2,-10*(C-=1))*Math.sin((C*F-D)*(2*Math.PI)/E)*0.5+G+A;},backIn:function(B,A,E,D,C){if(typeof C=="undefined"){C=1.70158;}return E*(B/=D)*B*((C+1)*B-C)+A;},backOut:function(B,A,E,D,C){if(typeof C=="undefined"){C=1.70158;}return E*((B=B/D-1)*B*((C+1)*B+C)+1)+A;},backBoth:function(B,A,E,D,C){if(typeof C=="undefined"){C=1.70158;}if((B/=D/2)<1){return E/2*(B*B*(((C*=(1.525))+1)*B-C))+A;}return E/2*((B-=2)*B*(((C*=(1.525))+1)*B+C)+2)+A;},bounceIn:function(B,A,D,C){return D-YAHOO.util.Easing.bounceOut(C-B,0,D,C)+A;},bounceOut:function(B,A,D,C){if((B/=C)<(1/2.75)){return D*(7.5625*B*B)+A;}else{if(B<(2/2.75)){return D*(7.5625*(B-=(1.5/2.75))*B+0.75)+A;}else{if(B<(2.5/2.75)){return D*(7.5625*(B-=(2.25/2.75))*B+0.9375)+A;}}}return D*(7.5625*(B-=(2.625/2.75))*B+0.984375)+A;},bounceBoth:function(B,A,D,C){if(B<C/2){return YAHOO.util.Easing.bounceIn(B*2,0,D,C)*0.5+A;}return YAHOO.util.Easing.bounceOut(B*2-C,0,D,C)*0.5+D*0.5+A;}};(function(){var A=function(H,G,I,J){if(H){A.superclass.constructor.call(this,H,G,I,J);}};A.NAME="Motion";var E=YAHOO.util;YAHOO.extend(A,E.ColorAnim);var F=A.superclass;var C=A.prototype;C.patterns.points=/^points$/i;C.setAttribute=function(G,I,H){if(this.patterns.points.test(G)){H=H||"px";F.setAttribute.call(this,"left",I[0],H);F.setAttribute.call(this,"top",I[1],H);}else{F.setAttribute.call(this,G,I,H);}};C.getAttribute=function(G){if(this.patterns.points.test(G)){var H=[F.getAttribute.call(this,"left"),F.getAttribute.call(this,"top")];}else{H=F.getAttribute.call(this,G);}return H;};C.doMethod=function(G,K,H){var J=null;if(this.patterns.points.test(G)){var I=this.method(this.currentFrame,0,100,this.totalFrames)/100;J=E.Bezier.getPosition(this.runtimeAttributes[G],I);}else{J=F.doMethod.call(this,G,K,H);}return J;};C.setRuntimeAttribute=function(P){if(this.patterns.points.test(P)){var H=this.getEl();var J=this.attributes;var G;var L=J["points"]["control"]||[];var I;var M,O;if(L.length>0&&!(L[0] instanceof Array)){L=[L];}else{var K=[];for(M=0,O=L.length;M<O;++M){K[M]=L[M];}L=K;}if(E.Dom.getStyle(H,"position")=="static"){E.Dom.setStyle(H,"position","relative");}if(D(J["points"]["from"])){E.Dom.setXY(H,J["points"]["from"]);
}else{E.Dom.setXY(H,E.Dom.getXY(H));}G=this.getAttribute("points");if(D(J["points"]["to"])){I=B.call(this,J["points"]["to"],G);var N=E.Dom.getXY(this.getEl());for(M=0,O=L.length;M<O;++M){L[M]=B.call(this,L[M],G);}}else{if(D(J["points"]["by"])){I=[G[0]+J["points"]["by"][0],G[1]+J["points"]["by"][1]];for(M=0,O=L.length;M<O;++M){L[M]=[G[0]+L[M][0],G[1]+L[M][1]];}}}this.runtimeAttributes[P]=[G];if(L.length>0){this.runtimeAttributes[P]=this.runtimeAttributes[P].concat(L);}this.runtimeAttributes[P][this.runtimeAttributes[P].length]=I;}else{F.setRuntimeAttribute.call(this,P);}};var B=function(G,I){var H=E.Dom.getXY(this.getEl());G=[G[0]-H[0]+I[0],G[1]-H[1]+I[1]];return G;};var D=function(G){return(typeof G!=="undefined");};E.Motion=A;})();(function(){var D=function(F,E,G,H){if(F){D.superclass.constructor.call(this,F,E,G,H);}};D.NAME="Scroll";var B=YAHOO.util;YAHOO.extend(D,B.ColorAnim);var C=D.superclass;var A=D.prototype;A.doMethod=function(E,H,F){var G=null;if(E=="scroll"){G=[this.method(this.currentFrame,H[0],F[0]-H[0],this.totalFrames),this.method(this.currentFrame,H[1],F[1]-H[1],this.totalFrames)];}else{G=C.doMethod.call(this,E,H,F);}return G;};A.getAttribute=function(E){var G=null;var F=this.getEl();if(E=="scroll"){G=[F.scrollLeft,F.scrollTop];}else{G=C.getAttribute.call(this,E);}return G;};A.setAttribute=function(E,H,G){var F=this.getEl();if(E=="scroll"){F.scrollLeft=H[0];F.scrollTop=H[1];}else{C.setAttribute.call(this,E,H,G);}};B.Scroll=D;})();YAHOO.register("animation",YAHOO.util.Anim,{version:"2.7.0",build:"1796"});if(!YAHOO.ULT){YAHOO.ULT={};}if(!YAHOO.ULT.BEACON){YAHOO.ULT.BEACON="https://geo.yahoo.com/t";}if(!YAHOO.ULT.IMG){YAHOO.ULT.IMG=new Image();}YAHOO.ULT.SRC_SPACEID_KEY="_S";YAHOO.ULT.DEST_SPACEID_KEY="_s";YAHOO.ULT.YLC_LIBSRC=2;YAHOO.ULT.CTRL_C="\x03";YAHOO.ULT.CTRL_D="\x04";YAHOO.ULT.BASE64_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789._-";(function(){YAHOO.ULT.track_click=function(c,g){if(!c||!g){return c;}g._r=YAHOO.ULT.YLC_LIBSRC;var h=[];var d=0;for(var b in g){var a=g[b];if(typeof(a)=="undefined"){a=g[b]="";}if(b.length<1){return c;}if(b.length>8){return c;}if(b.indexOf(" ")!=-1){return c;}if(YAHOO.ULT.has_ctrl_char(b)||YAHOO.ULT.has_ctrl_char(a)){return c;}h[d++]=b;}h=h.sort();var e=[];for(d=0;d<h.length;d++){e[d]=h[d]+YAHOO.ULT.CTRL_C+g[h[d]];}e=e.join(YAHOO.ULT.CTRL_D);if(e.length<1||e.length>1024){return c;}e=";_ylc="+YAHOO.ULT.encode64(e);d=c.indexOf("/*");if(d==-1){d=c.indexOf("/?");}if(d==-1){d=c.indexOf("?");}if(d==-1){return c+e;}else{return c.substr(0,d)+e+c.substr(d);}};YAHOO.ULT.beacon_click=function(c,b){if(!b){b=YAHOO.ULT.IMG;}if(c){var a=YAHOO.ULT.track_click(YAHOO.ULT.BEACON,c);a+="?t="+Math.random();b.src=a;}return true;};YAHOO.ULT.has_ctrl_char=function(b){for(var a=0;a<b.length;a++){if(b.charCodeAt(a)<32){return true;}}return false;};YAHOO.ULT.encode64=function(c){var a="";var k,h,f="";var j,g,e,d="";var b=0;do{k=c.charCodeAt(b++);h=c.charCodeAt(b++);f=c.charCodeAt(b++);j=k>>2;g=((k&3)<<4)|(h>>4);e=((h&15)<<2)|(f>>6);d=f&63;if(isNaN(h)){e=d=64;}else{if(isNaN(f)){d=64;}}a=a+YAHOO.ULT.BASE64_STR.charAt(j)+YAHOO.ULT.BASE64_STR.charAt(g)+YAHOO.ULT.BASE64_STR.charAt(e)+YAHOO.ULT.BASE64_STR.charAt(d);k=h=f="";j=g=e=d="";}while(b<c.length);return a;};})();/*
Copyright (c) 2009, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.net/yui/license.txt
version: 2.7.0
*/
YAHOO.util.Get=function(){var M={},L=0,R=0,E=false,N=YAHOO.env.ua,S=YAHOO.lang;var J=function(W,T,X){var U=X||window,Y=U.document,Z=Y.createElement(W);for(var V in T){if(T[V]&&YAHOO.lang.hasOwnProperty(T,V)){Z.setAttribute(V,T[V]);}}return Z;};var I=function(T,U,W){var V=W||"utf-8";return J("link",{"id":"yui__dyn_"+(R++),"type":"text/css","charset":V,"rel":"stylesheet","href":T},U);};var P=function(T,U,W){var V=W||"utf-8";return J("script",{"id":"yui__dyn_"+(R++),"type":"text/javascript","charset":V,"src":T},U);};var A=function(T,U){return{tId:T.tId,win:T.win,data:T.data,nodes:T.nodes,msg:U,purge:function(){D(this.tId);}};};var B=function(T,W){var U=M[W],V=(S.isString(T))?U.win.document.getElementById(T):T;if(!V){Q(W,"target node not found: "+T);}return V;};var Q=function(W,V){var T=M[W];if(T.onFailure){var U=T.scope||T.win;T.onFailure.call(U,A(T,V));}};var C=function(W){var T=M[W];T.finished=true;if(T.aborted){var V="transaction "+W+" was aborted";Q(W,V);return;}if(T.onSuccess){var U=T.scope||T.win;T.onSuccess.call(U,A(T));}};var O=function(V){var T=M[V];if(T.onTimeout){var U=T.scope||T;T.onTimeout.call(U,A(T));}};var G=function(V,Z){var U=M[V];if(U.timer){U.timer.cancel();}if(U.aborted){var X="transaction "+V+" was aborted";Q(V,X);return;}if(Z){U.url.shift();if(U.varName){U.varName.shift();}}else{U.url=(S.isString(U.url))?[U.url]:U.url;if(U.varName){U.varName=(S.isString(U.varName))?[U.varName]:U.varName;}}var c=U.win,b=c.document,a=b.getElementsByTagName("head")[0],W;if(U.url.length===0){if(U.type==="script"&&N.webkit&&N.webkit<420&&!U.finalpass&&!U.varName){var Y=P(null,U.win,U.charset);Y.innerHTML='YAHOO.util.Get._finalize("'+V+'");';U.nodes.push(Y);a.appendChild(Y);}else{C(V);}return;}var T=U.url[0];if(!T){U.url.shift();return G(V);}if(U.timeout){U.timer=S.later(U.timeout,U,O,V);}if(U.type==="script"){W=P(T,c,U.charset);}else{W=I(T,c,U.charset);}F(U.type,W,V,T,c,U.url.length);U.nodes.push(W);if(U.insertBefore){var e=B(U.insertBefore,V);if(e){e.parentNode.insertBefore(W,e);}}else{a.appendChild(W);}if((N.webkit||N.gecko)&&U.type==="css"){G(V,T);}};var K=function(){if(E){return;}E=true;for(var T in M){var U=M[T];if(U.autopurge&&U.finished){D(U.tId);delete M[T];}}E=false;};var D=function(a){var X=M[a];if(X){var Z=X.nodes,T=Z.length,Y=X.win.document,W=Y.getElementsByTagName("head")[0];if(X.insertBefore){var V=B(X.insertBefore,a);if(V){W=V.parentNode;}}for(var U=0;U<T;U=U+1){W.removeChild(Z[U]);}X.nodes=[];}};var H=function(U,T,V){var X="q"+(L++);V=V||{};if(L%YAHOO.util.Get.PURGE_THRESH===0){K();}M[X]=S.merge(V,{tId:X,type:U,url:T,finished:false,aborted:false,nodes:[]});var W=M[X];W.win=W.win||window;W.scope=W.scope||W.win;W.autopurge=("autopurge" in W)?W.autopurge:(U==="script")?true:false;S.later(0,W,G,X);return{tId:X};};var F=function(c,X,W,U,Y,Z,b){var a=b||G;if(N.ie){X.onreadystatechange=function(){var d=this.readyState;if("loaded"===d||"complete"===d){X.onreadystatechange=null;a(W,U);}};}else{if(N.webkit){if(c==="script"){if(N.webkit>=420){X.addEventListener("load",function(){a(W,U);});}else{var T=M[W];if(T.varName){var V=YAHOO.util.Get.POLL_FREQ;T.maxattempts=YAHOO.util.Get.TIMEOUT/V;T.attempts=0;T._cache=T.varName[0].split(".");T.timer=S.later(V,T,function(j){var f=this._cache,e=f.length,d=this.win,g;for(g=0;g<e;g=g+1){d=d[f[g]];if(!d){this.attempts++;if(this.attempts++>this.maxattempts){var h="Over retry limit, giving up";T.timer.cancel();Q(W,h);}else{}return;}}T.timer.cancel();a(W,U);},null,true);}else{S.later(YAHOO.util.Get.POLL_FREQ,null,a,[W,U]);}}}}else{X.onload=function(){a(W,U);};}}};return{POLL_FREQ:10,PURGE_THRESH:20,TIMEOUT:2000,_finalize:function(T){S.later(0,null,C,T);},abort:function(U){var V=(S.isString(U))?U:U.tId;var T=M[V];if(T){T.aborted=true;}},script:function(T,U){return H("script",T,U);},css:function(T,U){return H("css",T,U);}};}();YAHOO.register("get",YAHOO.util.Get,{version:"2.7.0",build:"1796"});/*
Copyright (c) 2009, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.net/yui/license.txt
version: 2.7.0
*/
(function(){var lang=YAHOO.lang,util=YAHOO.util,Ev=util.Event;util.DataSourceBase=function(oLiveData,oConfigs){if(oLiveData===null||oLiveData===undefined){return;}this.liveData=oLiveData;this._oQueue={interval:null,conn:null,requests:[]};this.responseSchema={};if(oConfigs&&(oConfigs.constructor==Object)){for(var sConfig in oConfigs){if(sConfig){this[sConfig]=oConfigs[sConfig];}}}var maxCacheEntries=this.maxCacheEntries;if(!lang.isNumber(maxCacheEntries)||(maxCacheEntries<0)){maxCacheEntries=0;}this._aIntervals=[];this.createEvent("cacheRequestEvent");this.createEvent("cacheResponseEvent");this.createEvent("requestEvent");this.createEvent("responseEvent");this.createEvent("responseParseEvent");this.createEvent("responseCacheEvent");this.createEvent("dataErrorEvent");this.createEvent("cacheFlushEvent");var DS=util.DataSourceBase;this._sName="DataSource instance"+DS._nIndex;DS._nIndex++;};var DS=util.DataSourceBase;lang.augmentObject(DS,{TYPE_UNKNOWN:-1,TYPE_JSARRAY:0,TYPE_JSFUNCTION:1,TYPE_XHR:2,TYPE_JSON:3,TYPE_XML:4,TYPE_TEXT:5,TYPE_HTMLTABLE:6,TYPE_SCRIPTNODE:7,TYPE_LOCAL:8,ERROR_DATAINVALID:"Invalid data",ERROR_DATANULL:"Null data",_nIndex:0,_nTransactionId:0,issueCallback:function(callback,params,error,scope){if(lang.isFunction(callback)){callback.apply(scope,params);}else{if(lang.isObject(callback)){scope=callback.scope||scope||window;var callbackFunc=callback.success;if(error){callbackFunc=callback.failure;}if(callbackFunc){callbackFunc.apply(scope,params.concat([callback.argument]));}}}},parseString:function(oData){if(!lang.isValue(oData)){return null;}var string=oData+"";if(lang.isString(string)){return string;}else{return null;}},parseNumber:function(oData){if(!lang.isValue(oData)||(oData==="")){return null;}var number=oData*1;if(lang.isNumber(number)){return number;}else{return null;}},convertNumber:function(oData){return DS.parseNumber(oData);},parseDate:function(oData){var date=null;if(!(oData instanceof Date)){date=new Date(oData);}else{return oData;}if(date instanceof Date){return date;}else{return null;}},convertDate:function(oData){return DS.parseDate(oData);}});DS.Parser={string:DS.parseString,number:DS.parseNumber,date:DS.parseDate};DS.prototype={_sName:null,_aCache:null,_oQueue:null,_aIntervals:null,maxCacheEntries:0,liveData:null,dataType:DS.TYPE_UNKNOWN,responseType:DS.TYPE_UNKNOWN,responseSchema:null,toString:function(){return this._sName;},getCachedResponse:function(oRequest,oCallback,oCaller){var aCache=this._aCache;if(this.maxCacheEntries>0){if(!aCache){this._aCache=[];}else{var nCacheLength=aCache.length;if(nCacheLength>0){var oResponse=null;this.fireEvent("cacheRequestEvent",{request:oRequest,callback:oCallback,caller:oCaller});for(var i=nCacheLength-1;i>=0;i--){var oCacheElem=aCache[i];if(this.isCacheHit(oRequest,oCacheElem.request)){oResponse=oCacheElem.response;this.fireEvent("cacheResponseEvent",{request:oRequest,response:oResponse,callback:oCallback,caller:oCaller});if(i<nCacheLength-1){aCache.splice(i,1);this.addToCache(oRequest,oResponse);}oResponse.cached=true;break;}}return oResponse;}}}else{if(aCache){this._aCache=null;}}return null;},isCacheHit:function(oRequest,oCachedRequest){return(oRequest===oCachedRequest);},addToCache:function(oRequest,oResponse){var aCache=this._aCache;if(!aCache){return;}while(aCache.length>=this.maxCacheEntries){aCache.shift();}var oCacheElem={request:oRequest,response:oResponse};aCache[aCache.length]=oCacheElem;this.fireEvent("responseCacheEvent",{request:oRequest,response:oResponse});},flushCache:function(){if(this._aCache){this._aCache=[];this.fireEvent("cacheFlushEvent");}},setInterval:function(nMsec,oRequest,oCallback,oCaller){if(lang.isNumber(nMsec)&&(nMsec>=0)){var oSelf=this;var nId=setInterval(function(){oSelf.makeConnection(oRequest,oCallback,oCaller);},nMsec);this._aIntervals.push(nId);return nId;}else{}},clearInterval:function(nId){var tracker=this._aIntervals||[];for(var i=tracker.length-1;i>-1;i--){if(tracker[i]===nId){tracker.splice(i,1);clearInterval(nId);}}},clearAllIntervals:function(){var tracker=this._aIntervals||[];for(var i=tracker.length-1;i>-1;i--){clearInterval(tracker[i]);}tracker=[];},sendRequest:function(oRequest,oCallback,oCaller){var oCachedResponse=this.getCachedResponse(oRequest,oCallback,oCaller);if(oCachedResponse){DS.issueCallback(oCallback,[oRequest,oCachedResponse],false,oCaller);return null;}return this.makeConnection(oRequest,oCallback,oCaller);},makeConnection:function(oRequest,oCallback,oCaller){var tId=DS._nTransactionId++;this.fireEvent("requestEvent",{tId:tId,request:oRequest,callback:oCallback,caller:oCaller});var oRawResponse=this.liveData;this.handleResponse(oRequest,oRawResponse,oCallback,oCaller,tId);return tId;},handleResponse:function(oRequest,oRawResponse,oCallback,oCaller,tId){this.fireEvent("responseEvent",{tId:tId,request:oRequest,response:oRawResponse,callback:oCallback,caller:oCaller});var xhr=(this.dataType==DS.TYPE_XHR)?true:false;var oParsedResponse=null;var oFullResponse=oRawResponse;if(this.responseType===DS.TYPE_UNKNOWN){var ctype=(oRawResponse&&oRawResponse.getResponseHeader)?oRawResponse.getResponseHeader["Content-Type"]:null;if(ctype){if(ctype.indexOf("text/xml")>-1){this.responseType=DS.TYPE_XML;}else{if(ctype.indexOf("application/json")>-1){this.responseType=DS.TYPE_JSON;}else{if(ctype.indexOf("text/plain")>-1){this.responseType=DS.TYPE_TEXT;}}}}else{if(YAHOO.lang.isArray(oRawResponse)){this.responseType=DS.TYPE_JSARRAY;}else{if(oRawResponse&&oRawResponse.nodeType&&oRawResponse.nodeType==9){this.responseType=DS.TYPE_XML;}else{if(oRawResponse&&oRawResponse.nodeName&&(oRawResponse.nodeName.toLowerCase()=="table")){this.responseType=DS.TYPE_HTMLTABLE;}else{if(YAHOO.lang.isObject(oRawResponse)){this.responseType=DS.TYPE_JSON;}else{if(YAHOO.lang.isString(oRawResponse)){this.responseType=DS.TYPE_TEXT;}}}}}}}switch(this.responseType){case DS.TYPE_JSARRAY:if(xhr&&oRawResponse&&oRawResponse.responseText){oFullResponse=oRawResponse.responseText;}try{if(lang.isString(oFullResponse)){var parseArgs=[oFullResponse].concat(this.parseJSONArgs);
if(lang.JSON){oFullResponse=lang.JSON.parse.apply(lang.JSON,parseArgs);}else{if(window.JSON&&JSON.parse){oFullResponse=JSON.parse.apply(JSON,parseArgs);}else{if(oFullResponse.parseJSON){oFullResponse=oFullResponse.parseJSON.apply(oFullResponse,parseArgs.slice(1));}else{while(oFullResponse.length>0&&(oFullResponse.charAt(0)!="{")&&(oFullResponse.charAt(0)!="[")){oFullResponse=oFullResponse.substring(1,oFullResponse.length);}if(oFullResponse.length>0){var arrayEnd=Math.max(oFullResponse.lastIndexOf("]"),oFullResponse.lastIndexOf("}"));oFullResponse=oFullResponse.substring(0,arrayEnd+1);oFullResponse=eval("("+oFullResponse+")");}}}}}}catch(e1){}oFullResponse=this.doBeforeParseData(oRequest,oFullResponse,oCallback);oParsedResponse=this.parseArrayData(oRequest,oFullResponse);break;case DS.TYPE_JSON:if(xhr&&oRawResponse&&oRawResponse.responseText){oFullResponse=oRawResponse.responseText;}try{if(lang.isString(oFullResponse)){var parseArgs=[oFullResponse].concat(this.parseJSONArgs);if(lang.JSON){oFullResponse=lang.JSON.parse.apply(lang.JSON,parseArgs);}else{if(window.JSON&&JSON.parse){oFullResponse=JSON.parse.apply(JSON,parseArgs);}else{if(oFullResponse.parseJSON){oFullResponse=oFullResponse.parseJSON.apply(oFullResponse,parseArgs.slice(1));}else{while(oFullResponse.length>0&&(oFullResponse.charAt(0)!="{")&&(oFullResponse.charAt(0)!="[")){oFullResponse=oFullResponse.substring(1,oFullResponse.length);}if(oFullResponse.length>0){var objEnd=Math.max(oFullResponse.lastIndexOf("]"),oFullResponse.lastIndexOf("}"));oFullResponse=oFullResponse.substring(0,objEnd+1);oFullResponse=eval("("+oFullResponse+")");}}}}}}catch(e){}oFullResponse=this.doBeforeParseData(oRequest,oFullResponse,oCallback);oParsedResponse=this.parseJSONData(oRequest,oFullResponse);break;case DS.TYPE_HTMLTABLE:if(xhr&&oRawResponse.responseText){var el=document.createElement("div");el.innerHTML=oRawResponse.responseText;oFullResponse=el.getElementsByTagName("table")[0];}oFullResponse=this.doBeforeParseData(oRequest,oFullResponse,oCallback);oParsedResponse=this.parseHTMLTableData(oRequest,oFullResponse);break;case DS.TYPE_XML:if(xhr&&oRawResponse.responseXML){oFullResponse=oRawResponse.responseXML;}oFullResponse=this.doBeforeParseData(oRequest,oFullResponse,oCallback);oParsedResponse=this.parseXMLData(oRequest,oFullResponse);break;case DS.TYPE_TEXT:if(xhr&&lang.isString(oRawResponse.responseText)){oFullResponse=oRawResponse.responseText;}oFullResponse=this.doBeforeParseData(oRequest,oFullResponse,oCallback);oParsedResponse=this.parseTextData(oRequest,oFullResponse);break;default:oFullResponse=this.doBeforeParseData(oRequest,oFullResponse,oCallback);oParsedResponse=this.parseData(oRequest,oFullResponse);break;}oParsedResponse=oParsedResponse||{};if(!oParsedResponse.results){oParsedResponse.results=[];}if(!oParsedResponse.meta){oParsedResponse.meta={};}if(oParsedResponse&&!oParsedResponse.error){oParsedResponse=this.doBeforeCallback(oRequest,oFullResponse,oParsedResponse,oCallback);this.fireEvent("responseParseEvent",{request:oRequest,response:oParsedResponse,callback:oCallback,caller:oCaller});this.addToCache(oRequest,oParsedResponse);}else{oParsedResponse.error=true;this.fireEvent("dataErrorEvent",{request:oRequest,response:oRawResponse,callback:oCallback,caller:oCaller,message:DS.ERROR_DATANULL});}oParsedResponse.tId=tId;DS.issueCallback(oCallback,[oRequest,oParsedResponse],oParsedResponse.error,oCaller);},doBeforeParseData:function(oRequest,oFullResponse,oCallback){return oFullResponse;},doBeforeCallback:function(oRequest,oFullResponse,oParsedResponse,oCallback){return oParsedResponse;},parseData:function(oRequest,oFullResponse){if(lang.isValue(oFullResponse)){var oParsedResponse={results:oFullResponse,meta:{}};return oParsedResponse;}return null;},parseArrayData:function(oRequest,oFullResponse){if(lang.isArray(oFullResponse)){var results=[],i,j,rec,field,data;if(lang.isArray(this.responseSchema.fields)){var fields=this.responseSchema.fields;for(i=fields.length-1;i>=0;--i){if(typeof fields[i]!=="object"){fields[i]={key:fields[i]};}}var parsers={},p;for(i=fields.length-1;i>=0;--i){p=(typeof fields[i].parser==="function"?fields[i].parser:DS.Parser[fields[i].parser+""])||fields[i].converter;if(p){parsers[fields[i].key]=p;}}var arrType=lang.isArray(oFullResponse[0]);for(i=oFullResponse.length-1;i>-1;i--){var oResult={};rec=oFullResponse[i];if(typeof rec==="object"){for(j=fields.length-1;j>-1;j--){field=fields[j];data=arrType?rec[j]:rec[field.key];if(parsers[field.key]){data=parsers[field.key].call(this,data);}if(data===undefined){data=null;}oResult[field.key]=data;}}else{if(lang.isString(rec)){for(j=fields.length-1;j>-1;j--){field=fields[j];data=rec;if(parsers[field.key]){data=parsers[field.key].call(this,data);}if(data===undefined){data=null;}oResult[field.key]=data;}}}results[i]=oResult;}}else{results=oFullResponse;}var oParsedResponse={results:results};return oParsedResponse;}return null;},parseTextData:function(oRequest,oFullResponse){if(lang.isString(oFullResponse)){if(lang.isString(this.responseSchema.recordDelim)&&lang.isString(this.responseSchema.fieldDelim)){var oParsedResponse={results:[]};var recDelim=this.responseSchema.recordDelim;var fieldDelim=this.responseSchema.fieldDelim;if(oFullResponse.length>0){var newLength=oFullResponse.length-recDelim.length;if(oFullResponse.substr(newLength)==recDelim){oFullResponse=oFullResponse.substr(0,newLength);}if(oFullResponse.length>0){var recordsarray=oFullResponse.split(recDelim);for(var i=0,len=recordsarray.length,recIdx=0;i<len;++i){var bError=false,sRecord=recordsarray[i];if(lang.isString(sRecord)&&(sRecord.length>0)){var fielddataarray=recordsarray[i].split(fieldDelim);var oResult={};if(lang.isArray(this.responseSchema.fields)){var fields=this.responseSchema.fields;for(var j=fields.length-1;j>-1;j--){try{var data=fielddataarray[j];if(lang.isString(data)){if(data.charAt(0)=='"'){data=data.substr(1);}if(data.charAt(data.length-1)=='"'){data=data.substr(0,data.length-1);}var field=fields[j];
var key=(lang.isValue(field.key))?field.key:field;if(!field.parser&&field.converter){field.parser=field.converter;}var parser=(typeof field.parser==="function")?field.parser:DS.Parser[field.parser+""];if(parser){data=parser.call(this,data);}if(data===undefined){data=null;}oResult[key]=data;}else{bError=true;}}catch(e){bError=true;}}}else{oResult=fielddataarray;}if(!bError){oParsedResponse.results[recIdx++]=oResult;}}}}}return oParsedResponse;}}return null;},parseXMLResult:function(result){var oResult={},schema=this.responseSchema;try{for(var m=schema.fields.length-1;m>=0;m--){var field=schema.fields[m];var key=(lang.isValue(field.key))?field.key:field;var data=null;var xmlAttr=result.attributes.getNamedItem(key);if(xmlAttr){data=xmlAttr.value;}else{var xmlNode=result.getElementsByTagName(key);if(xmlNode&&xmlNode.item(0)){var item=xmlNode.item(0);data=(item)?((item.text)?item.text:(item.textContent)?item.textContent:null):null;if(!data){var datapieces=[];for(var j=0,len=item.childNodes.length;j<len;j++){if(item.childNodes[j].nodeValue){datapieces[datapieces.length]=item.childNodes[j].nodeValue;}}if(datapieces.length>0){data=datapieces.join("");}}}}if(data===null){data="";}if(!field.parser&&field.converter){field.parser=field.converter;}var parser=(typeof field.parser==="function")?field.parser:DS.Parser[field.parser+""];if(parser){data=parser.call(this,data);}if(data===undefined){data=null;}oResult[key]=data;}}catch(e){}return oResult;},parseXMLData:function(oRequest,oFullResponse){var bError=false,schema=this.responseSchema,oParsedResponse={meta:{}},xmlList=null,metaNode=schema.metaNode,metaLocators=schema.metaFields||{},i,k,loc,v;try{xmlList=(schema.resultNode)?oFullResponse.getElementsByTagName(schema.resultNode):null;metaNode=metaNode?oFullResponse.getElementsByTagName(metaNode)[0]:oFullResponse;if(metaNode){for(k in metaLocators){if(lang.hasOwnProperty(metaLocators,k)){loc=metaLocators[k];v=metaNode.getElementsByTagName(loc)[0];if(v){v=v.firstChild.nodeValue;}else{v=metaNode.attributes.getNamedItem(loc);if(v){v=v.value;}}if(lang.isValue(v)){oParsedResponse.meta[k]=v;}}}}}catch(e){}if(!xmlList||!lang.isArray(schema.fields)){bError=true;}else{oParsedResponse.results=[];for(i=xmlList.length-1;i>=0;--i){var oResult=this.parseXMLResult(xmlList.item(i));oParsedResponse.results[i]=oResult;}}if(bError){oParsedResponse.error=true;}else{}return oParsedResponse;},parseJSONData:function(oRequest,oFullResponse){var oParsedResponse={results:[],meta:{}};if(lang.isObject(oFullResponse)&&this.responseSchema.resultsList){var schema=this.responseSchema,fields=schema.fields,resultsList=oFullResponse,results=[],metaFields=schema.metaFields||{},fieldParsers=[],fieldPaths=[],simpleFields=[],bError=false,i,len,j,v,key,parser,path;var buildPath=function(needle){var path=null,keys=[],i=0;if(needle){needle=needle.replace(/\[(['"])(.*?)\1\]/g,function(x,$1,$2){keys[i]=$2;return".@"+(i++);}).replace(/\[(\d+)\]/g,function(x,$1){keys[i]=parseInt($1,10)|0;return".@"+(i++);}).replace(/^\./,"");if(!/[^\w\.\$@]/.test(needle)){path=needle.split(".");for(i=path.length-1;i>=0;--i){if(path[i].charAt(0)==="@"){path[i]=keys[parseInt(path[i].substr(1),10)];}}}else{}}return path;};var walkPath=function(path,origin){var v=origin,i=0,len=path.length;for(;i<len&&v;++i){v=v[path[i]];}return v;};path=buildPath(schema.resultsList);if(path){resultsList=walkPath(path,oFullResponse);if(resultsList===undefined){bError=true;}}else{bError=true;}if(!resultsList){resultsList=[];}if(!lang.isArray(resultsList)){resultsList=[resultsList];}if(!bError){if(schema.fields){var field;for(i=0,len=fields.length;i<len;i++){field=fields[i];key=field.key||field;parser=((typeof field.parser==="function")?field.parser:DS.Parser[field.parser+""])||field.converter;path=buildPath(key);if(parser){fieldParsers[fieldParsers.length]={key:key,parser:parser};}if(path){if(path.length>1){fieldPaths[fieldPaths.length]={key:key,path:path};}else{simpleFields[simpleFields.length]={key:key,path:path[0]};}}else{}}for(i=resultsList.length-1;i>=0;--i){var r=resultsList[i],rec={};if(r){for(j=simpleFields.length-1;j>=0;--j){rec[simpleFields[j].key]=(r[simpleFields[j].path]!==undefined)?r[simpleFields[j].path]:r[j];}for(j=fieldPaths.length-1;j>=0;--j){rec[fieldPaths[j].key]=walkPath(fieldPaths[j].path,r);}for(j=fieldParsers.length-1;j>=0;--j){var p=fieldParsers[j].key;rec[p]=fieldParsers[j].parser(rec[p]);if(rec[p]===undefined){rec[p]=null;}}}results[i]=rec;}}else{results=resultsList;}for(key in metaFields){if(lang.hasOwnProperty(metaFields,key)){path=buildPath(metaFields[key]);if(path){v=walkPath(path,oFullResponse);oParsedResponse.meta[key]=v;}}}}else{oParsedResponse.error=true;}oParsedResponse.results=results;}else{oParsedResponse.error=true;}return oParsedResponse;},parseHTMLTableData:function(oRequest,oFullResponse){var bError=false;var elTable=oFullResponse;var fields=this.responseSchema.fields;var oParsedResponse={results:[]};if(lang.isArray(fields)){for(var i=0;i<elTable.tBodies.length;i++){var elTbody=elTable.tBodies[i];for(var j=elTbody.rows.length-1;j>-1;j--){var elRow=elTbody.rows[j];var oResult={};for(var k=fields.length-1;k>-1;k--){var field=fields[k];var key=(lang.isValue(field.key))?field.key:field;var data=elRow.cells[k].innerHTML;if(!field.parser&&field.converter){field.parser=field.converter;}var parser=(typeof field.parser==="function")?field.parser:DS.Parser[field.parser+""];if(parser){data=parser.call(this,data);}if(data===undefined){data=null;}oResult[key]=data;}oParsedResponse.results[j]=oResult;}}}else{bError=true;}if(bError){oParsedResponse.error=true;}else{}return oParsedResponse;}};lang.augmentProto(DS,util.EventProvider);util.LocalDataSource=function(oLiveData,oConfigs){this.dataType=DS.TYPE_LOCAL;if(oLiveData){if(YAHOO.lang.isArray(oLiveData)){this.responseType=DS.TYPE_JSARRAY;}else{if(oLiveData.nodeType&&oLiveData.nodeType==9){this.responseType=DS.TYPE_XML;}else{if(oLiveData.nodeName&&(oLiveData.nodeName.toLowerCase()=="table")){this.responseType=DS.TYPE_HTMLTABLE;
oLiveData=oLiveData.cloneNode(true);}else{if(YAHOO.lang.isString(oLiveData)){this.responseType=DS.TYPE_TEXT;}else{if(YAHOO.lang.isObject(oLiveData)){this.responseType=DS.TYPE_JSON;}}}}}}else{oLiveData=[];this.responseType=DS.TYPE_JSARRAY;}util.LocalDataSource.superclass.constructor.call(this,oLiveData,oConfigs);};lang.extend(util.LocalDataSource,DS);lang.augmentObject(util.LocalDataSource,DS);util.FunctionDataSource=function(oLiveData,oConfigs){this.dataType=DS.TYPE_JSFUNCTION;oLiveData=oLiveData||function(){};util.FunctionDataSource.superclass.constructor.call(this,oLiveData,oConfigs);};lang.extend(util.FunctionDataSource,DS,{scope:null,makeConnection:function(oRequest,oCallback,oCaller){var tId=DS._nTransactionId++;this.fireEvent("requestEvent",{tId:tId,request:oRequest,callback:oCallback,caller:oCaller});var oRawResponse=(this.scope)?this.liveData.call(this.scope,oRequest,this):this.liveData(oRequest);if(this.responseType===DS.TYPE_UNKNOWN){if(YAHOO.lang.isArray(oRawResponse)){this.responseType=DS.TYPE_JSARRAY;}else{if(oRawResponse&&oRawResponse.nodeType&&oRawResponse.nodeType==9){this.responseType=DS.TYPE_XML;}else{if(oRawResponse&&oRawResponse.nodeName&&(oRawResponse.nodeName.toLowerCase()=="table")){this.responseType=DS.TYPE_HTMLTABLE;}else{if(YAHOO.lang.isObject(oRawResponse)){this.responseType=DS.TYPE_JSON;}else{if(YAHOO.lang.isString(oRawResponse)){this.responseType=DS.TYPE_TEXT;}}}}}}this.handleResponse(oRequest,oRawResponse,oCallback,oCaller,tId);return tId;}});lang.augmentObject(util.FunctionDataSource,DS);util.ScriptNodeDataSource=function(oLiveData,oConfigs){this.dataType=DS.TYPE_SCRIPTNODE;oLiveData=oLiveData||"";util.ScriptNodeDataSource.superclass.constructor.call(this,oLiveData,oConfigs);};lang.extend(util.ScriptNodeDataSource,DS,{getUtility:util.Get,asyncMode:"allowAll",scriptCallbackParam:"callback",generateRequestCallback:function(id){return"&"+this.scriptCallbackParam+"=YAHOO.util.ScriptNodeDataSource.callbacks["+id+"]";},doBeforeGetScriptNode:function(sUri){return sUri;},makeConnection:function(oRequest,oCallback,oCaller){var tId=DS._nTransactionId++;this.fireEvent("requestEvent",{tId:tId,request:oRequest,callback:oCallback,caller:oCaller});if(util.ScriptNodeDataSource._nPending===0){util.ScriptNodeDataSource.callbacks=[];util.ScriptNodeDataSource._nId=0;}var id=util.ScriptNodeDataSource._nId;util.ScriptNodeDataSource._nId++;var oSelf=this;util.ScriptNodeDataSource.callbacks[id]=function(oRawResponse){if((oSelf.asyncMode!=="ignoreStaleResponses")||(id===util.ScriptNodeDataSource.callbacks.length-1)){if(oSelf.responseType===DS.TYPE_UNKNOWN){if(YAHOO.lang.isArray(oRawResponse)){oSelf.responseType=DS.TYPE_JSARRAY;}else{if(oRawResponse.nodeType&&oRawResponse.nodeType==9){oSelf.responseType=DS.TYPE_XML;}else{if(oRawResponse.nodeName&&(oRawResponse.nodeName.toLowerCase()=="table")){oSelf.responseType=DS.TYPE_HTMLTABLE;}else{if(YAHOO.lang.isObject(oRawResponse)){oSelf.responseType=DS.TYPE_JSON;}else{if(YAHOO.lang.isString(oRawResponse)){oSelf.responseType=DS.TYPE_TEXT;}}}}}}oSelf.handleResponse(oRequest,oRawResponse,oCallback,oCaller,tId);}else{}delete util.ScriptNodeDataSource.callbacks[id];};util.ScriptNodeDataSource._nPending++;var sUri=this.liveData+oRequest+this.generateRequestCallback(id);sUri=this.doBeforeGetScriptNode(sUri);this.getUtility.script(sUri,{autopurge:true,onsuccess:util.ScriptNodeDataSource._bumpPendingDown,onfail:util.ScriptNodeDataSource._bumpPendingDown});return tId;}});lang.augmentObject(util.ScriptNodeDataSource,DS);lang.augmentObject(util.ScriptNodeDataSource,{_nId:0,_nPending:0,callbacks:[]});util.XHRDataSource=function(oLiveData,oConfigs){this.dataType=DS.TYPE_XHR;this.connMgr=this.connMgr||util.Connect;oLiveData=oLiveData||"";util.XHRDataSource.superclass.constructor.call(this,oLiveData,oConfigs);};lang.extend(util.XHRDataSource,DS,{connMgr:null,connXhrMode:"allowAll",connMethodPost:false,connTimeout:0,makeConnection:function(oRequest,oCallback,oCaller){var oRawResponse=null;var tId=DS._nTransactionId++;this.fireEvent("requestEvent",{tId:tId,request:oRequest,callback:oCallback,caller:oCaller});var oSelf=this;var oConnMgr=this.connMgr;var oQueue=this._oQueue;var _xhrSuccess=function(oResponse){if(oResponse&&(this.connXhrMode=="ignoreStaleResponses")&&(oResponse.tId!=oQueue.conn.tId)){return null;}else{if(!oResponse){this.fireEvent("dataErrorEvent",{request:oRequest,callback:oCallback,caller:oCaller,message:DS.ERROR_DATANULL});DS.issueCallback(oCallback,[oRequest,{error:true}],true,oCaller);return null;}else{if(this.responseType===DS.TYPE_UNKNOWN){var ctype=(oResponse.getResponseHeader)?oResponse.getResponseHeader["Content-Type"]:null;if(ctype){if(ctype.indexOf("text/xml")>-1){this.responseType=DS.TYPE_XML;}else{if(ctype.indexOf("application/json")>-1){this.responseType=DS.TYPE_JSON;}else{if(ctype.indexOf("text/plain")>-1){this.responseType=DS.TYPE_TEXT;}}}}}this.handleResponse(oRequest,oResponse,oCallback,oCaller,tId);}}};var _xhrFailure=function(oResponse){this.fireEvent("dataErrorEvent",{request:oRequest,callback:oCallback,caller:oCaller,message:DS.ERROR_DATAINVALID});if(lang.isString(this.liveData)&&lang.isString(oRequest)&&(this.liveData.lastIndexOf("?")!==this.liveData.length-1)&&(oRequest.indexOf("?")!==0)){}oResponse=oResponse||{};oResponse.error=true;DS.issueCallback(oCallback,[oRequest,oResponse],true,oCaller);return null;};var _xhrCallback={success:_xhrSuccess,failure:_xhrFailure,scope:this};if(lang.isNumber(this.connTimeout)){_xhrCallback.timeout=this.connTimeout;}if(this.connXhrMode=="cancelStaleRequests"){if(oQueue.conn){if(oConnMgr.abort){oConnMgr.abort(oQueue.conn);oQueue.conn=null;}else{}}}if(oConnMgr&&oConnMgr.asyncRequest){var sLiveData=this.liveData;var isPost=this.connMethodPost;var sMethod=(isPost)?"POST":"GET";var sUri=(isPost||!lang.isValue(oRequest))?sLiveData:sLiveData+oRequest;var sRequest=(isPost)?oRequest:null;if(this.connXhrMode!="queueRequests"){oQueue.conn=oConnMgr.asyncRequest(sMethod,sUri,_xhrCallback,sRequest);}else{if(oQueue.conn){var allRequests=oQueue.requests;
allRequests.push({request:oRequest,callback:_xhrCallback});if(!oQueue.interval){oQueue.interval=setInterval(function(){if(oConnMgr.isCallInProgress(oQueue.conn)){return;}else{if(allRequests.length>0){sUri=(isPost||!lang.isValue(allRequests[0].request))?sLiveData:sLiveData+allRequests[0].request;sRequest=(isPost)?allRequests[0].request:null;oQueue.conn=oConnMgr.asyncRequest(sMethod,sUri,allRequests[0].callback,sRequest);allRequests.shift();}else{clearInterval(oQueue.interval);oQueue.interval=null;}}},50);}}else{oQueue.conn=oConnMgr.asyncRequest(sMethod,sUri,_xhrCallback,sRequest);}}}else{DS.issueCallback(oCallback,[oRequest,{error:true}],true,oCaller);}return tId;}});lang.augmentObject(util.XHRDataSource,DS);util.DataSource=function(oLiveData,oConfigs){oConfigs=oConfigs||{};var dataType=oConfigs.dataType;if(dataType){if(dataType==DS.TYPE_LOCAL){lang.augmentObject(util.DataSource,util.LocalDataSource);return new util.LocalDataSource(oLiveData,oConfigs);}else{if(dataType==DS.TYPE_XHR){lang.augmentObject(util.DataSource,util.XHRDataSource);return new util.XHRDataSource(oLiveData,oConfigs);}else{if(dataType==DS.TYPE_SCRIPTNODE){lang.augmentObject(util.DataSource,util.ScriptNodeDataSource);return new util.ScriptNodeDataSource(oLiveData,oConfigs);}else{if(dataType==DS.TYPE_JSFUNCTION){lang.augmentObject(util.DataSource,util.FunctionDataSource);return new util.FunctionDataSource(oLiveData,oConfigs);}}}}}if(YAHOO.lang.isString(oLiveData)){lang.augmentObject(util.DataSource,util.XHRDataSource);return new util.XHRDataSource(oLiveData,oConfigs);}else{if(YAHOO.lang.isFunction(oLiveData)){lang.augmentObject(util.DataSource,util.FunctionDataSource);return new util.FunctionDataSource(oLiveData,oConfigs);}else{lang.augmentObject(util.DataSource,util.LocalDataSource);return new util.LocalDataSource(oLiveData,oConfigs);}}};lang.augmentObject(util.DataSource,DS);})();YAHOO.util.Number={format:function(C,G){var B=YAHOO.lang;if(!B.isValue(C)||(C==="")){return"";}G=G||{};if(!B.isNumber(C)){C*=1;}if(B.isNumber(C)){var E=(C<0);var K=C+"";var H=(G.decimalSeparator)?G.decimalSeparator:".";var I;if(B.isNumber(G.decimalPlaces)){var J=G.decimalPlaces;var D=Math.pow(10,J);K=Math.round(C*D)/D+"";I=K.lastIndexOf(".");if(J>0){if(I<0){K+=H;I=K.length-1;}else{if(H!=="."){K=K.replace(".",H);}}while((K.length-1-I)<J){K+="0";}}}if(G.thousandsSeparator){var M=G.thousandsSeparator;I=K.lastIndexOf(H);I=(I>-1)?I:K.length;var L=K.substring(I);var A=-1;for(var F=I;F>0;F--){A++;if((A%3===0)&&(F!==I)&&(!E||(F>1))){L=M+L;}L=K.charAt(F-1)+L;}K=L;}K=(G.prefix)?G.prefix+K:K;K=(G.suffix)?K+G.suffix:K;return K;}else{return C;}}};(function(){var A=function(C,E,D){if(typeof D==="undefined"){D=10;}for(;parseInt(C,10)<D&&D>1;D/=10){C=E.toString()+C;}return C.toString();};var B={formats:{a:function(D,C){return C.a[D.getDay()];},A:function(D,C){return C.A[D.getDay()];},b:function(D,C){return C.b[D.getMonth()];},B:function(D,C){return C.B[D.getMonth()];},C:function(C){return A(parseInt(C.getFullYear()/100,10),0);},d:["getDate","0"],e:["getDate"," "],g:function(C){return A(parseInt(B.formats.G(C)%100,10),0);},G:function(E){var F=E.getFullYear();var D=parseInt(B.formats.V(E),10);var C=parseInt(B.formats.W(E),10);if(C>D){F++;}else{if(C===0&&D>=52){F--;}}return F;},H:["getHours","0"],I:function(D){var C=D.getHours()%12;return A(C===0?12:C,0);},j:function(G){var F=new Date(""+G.getFullYear()+"/1/1 GMT");var D=new Date(""+G.getFullYear()+"/"+(G.getMonth()+1)+"/"+G.getDate()+" GMT");var C=D-F;var E=parseInt(C/60000/60/24,10)+1;return A(E,0,100);},k:["getHours"," "],l:function(D){var C=D.getHours()%12;return A(C===0?12:C," ");},m:function(C){return A(C.getMonth()+1,0);},M:["getMinutes","0"],p:function(D,C){return C.p[D.getHours()>=12?1:0];},P:function(D,C){return C.P[D.getHours()>=12?1:0];},s:function(D,C){return parseInt(D.getTime()/1000,10);},S:["getSeconds","0"],u:function(C){var D=C.getDay();return D===0?7:D;},U:function(F){var C=parseInt(B.formats.j(F),10);var E=6-F.getDay();var D=parseInt((C+E)/7,10);return A(D,0);},V:function(F){var E=parseInt(B.formats.W(F),10);var C=(new Date(""+F.getFullYear()+"/1/1")).getDay();var D=E+(C>4||C<=1?0:1);if(D===53&&(new Date(""+F.getFullYear()+"/12/31")).getDay()<4){D=1;}else{if(D===0){D=B.formats.V(new Date(""+(F.getFullYear()-1)+"/12/31"));}}return A(D,0);},w:"getDay",W:function(F){var C=parseInt(B.formats.j(F),10);var E=7-B.formats.u(F);var D=parseInt((C+E)/7,10);return A(D,0,10);},y:function(C){return A(C.getFullYear()%100,0);},Y:"getFullYear",z:function(E){var D=E.getTimezoneOffset();var C=A(parseInt(Math.abs(D/60),10),0);var F=A(Math.abs(D%60),0);return(D>0?"-":"+")+C+F;},Z:function(C){var D=C.toString().replace(/^.*:\d\d( GMT[+-]\d+)? \(?([A-Za-z ]+)\)?\d*$/,"$2").replace(/[a-z ]/g,"");if(D.length>4){D=B.formats.z(C);}return D;},"%":function(C){return"%";}},aggregates:{c:"locale",D:"%m/%d/%y",F:"%Y-%m-%d",h:"%b",n:"\n",r:"locale",R:"%H:%M",t:"\t",T:"%H:%M:%S",x:"locale",X:"locale"},format:function(G,F,D){F=F||{};if(!(G instanceof Date)){return YAHOO.lang.isValue(G)?G:"";}var H=F.format||"%m/%d/%Y";if(H==="YYYY/MM/DD"){H="%Y/%m/%d";}else{if(H==="DD/MM/YYYY"){H="%d/%m/%Y";}else{if(H==="MM/DD/YYYY"){H="%m/%d/%Y";}}}D=D||"en";if(!(D in YAHOO.util.DateLocale)){if(D.replace(/-[a-zA-Z]+$/,"") in YAHOO.util.DateLocale){D=D.replace(/-[a-zA-Z]+$/,"");}else{D="en";}}var J=YAHOO.util.DateLocale[D];var C=function(L,K){var M=B.aggregates[K];return(M==="locale"?J[K]:M);};var E=function(L,K){var M=B.formats[K];if(typeof M==="string"){return G[M]();}else{if(typeof M==="function"){return M.call(G,G,J);}else{if(typeof M==="object"&&typeof M[0]==="string"){return A(G[M[0]](),M[1]);}else{return K;}}}};while(H.match(/%[cDFhnrRtTxX]/)){H=H.replace(/%([cDFhnrRtTxX])/g,C);}var I=H.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g,E);C=E=undefined;return I;}};YAHOO.namespace("YAHOO.util");YAHOO.util.Date=B;YAHOO.util.DateLocale={a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B:["January","February","March","April","May","June","July","August","September","October","November","December"],c:"%a %d %b %Y %T %Z",p:["AM","PM"],P:["am","pm"],r:"%I:%M:%S %p",x:"%d/%m/%y",X:"%T"};
YAHOO.util.DateLocale["en"]=YAHOO.lang.merge(YAHOO.util.DateLocale,{});YAHOO.util.DateLocale["en-US"]=YAHOO.lang.merge(YAHOO.util.DateLocale["en"],{c:"%a %d %b %Y %I:%M:%S %p %Z",x:"%m/%d/%Y",X:"%I:%M:%S %p"});YAHOO.util.DateLocale["en-GB"]=YAHOO.lang.merge(YAHOO.util.DateLocale["en"],{r:"%l:%M:%S %P %Z"});YAHOO.util.DateLocale["en-AU"]=YAHOO.lang.merge(YAHOO.util.DateLocale["en"]);})();YAHOO.register("datasource",YAHOO.util.DataSource,{version:"2.7.0",build:"1796"});/*
Copyright (c) 2009, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.net/yui/license.txt
version: 2.7.0
*/
YAHOO.widget.DS_JSArray=YAHOO.util.LocalDataSource;YAHOO.widget.DS_JSFunction=YAHOO.util.FunctionDataSource;YAHOO.widget.DS_XHR=function(B,A,D){var C=new YAHOO.util.XHRDataSource(B,D);C._aDeprecatedSchema=A;return C;};YAHOO.widget.DS_ScriptNode=function(B,A,D){var C=new YAHOO.util.ScriptNodeDataSource(B,D);C._aDeprecatedSchema=A;return C;};YAHOO.widget.DS_XHR.TYPE_JSON=YAHOO.util.DataSourceBase.TYPE_JSON;YAHOO.widget.DS_XHR.TYPE_XML=YAHOO.util.DataSourceBase.TYPE_XML;YAHOO.widget.DS_XHR.TYPE_FLAT=YAHOO.util.DataSourceBase.TYPE_TEXT;YAHOO.widget.AutoComplete=function(G,B,J,C){if(G&&B&&J){if(J instanceof YAHOO.util.DataSourceBase){this.dataSource=J;}else{return;}this.key=0;var D=J.responseSchema;if(J._aDeprecatedSchema){var K=J._aDeprecatedSchema;if(YAHOO.lang.isArray(K)){if((J.responseType===YAHOO.util.DataSourceBase.TYPE_JSON)||(J.responseType===YAHOO.util.DataSourceBase.TYPE_UNKNOWN)){D.resultsList=K[0];this.key=K[1];D.fields=(K.length<3)?null:K.slice(1);}else{if(J.responseType===YAHOO.util.DataSourceBase.TYPE_XML){D.resultNode=K[0];this.key=K[1];D.fields=K.slice(1);}else{if(J.responseType===YAHOO.util.DataSourceBase.TYPE_TEXT){D.recordDelim=K[0];D.fieldDelim=K[1];}}}J.responseSchema=D;}}if(YAHOO.util.Dom.inDocument(G)){if(YAHOO.lang.isString(G)){this._sName="instance"+YAHOO.widget.AutoComplete._nIndex+" "+G;this._elTextbox=document.getElementById(G);}else{this._sName=(G.id)?"instance"+YAHOO.widget.AutoComplete._nIndex+" "+G.id:"instance"+YAHOO.widget.AutoComplete._nIndex;this._elTextbox=G;}YAHOO.util.Dom.addClass(this._elTextbox,"yui-ac-input");}else{return;}if(YAHOO.util.Dom.inDocument(B)){if(YAHOO.lang.isString(B)){this._elContainer=document.getElementById(B);}else{this._elContainer=B;}if(this._elContainer.style.display=="none"){}var E=this._elContainer.parentNode;var A=E.tagName.toLowerCase();if(A=="div"){YAHOO.util.Dom.addClass(E,"yui-ac");}else{}}else{return;}if(this.dataSource.dataType===YAHOO.util.DataSourceBase.TYPE_LOCAL){this.applyLocalFilter=true;}if(C&&(C.constructor==Object)){for(var I in C){if(I){this[I]=C[I];}}}this._initContainerEl();this._initProps();this._initListEl();this._initContainerHelperEls();var H=this;var F=this._elTextbox;YAHOO.util.Event.addListener(F,"keyup",H._onTextboxKeyUp,H);YAHOO.util.Event.addListener(F,"keydown",H._onTextboxKeyDown,H);YAHOO.util.Event.addListener(F,"focus",H._onTextboxFocus,H);YAHOO.util.Event.addListener(F,"blur",H._onTextboxBlur,H);YAHOO.util.Event.addListener(B,"mouseover",H._onContainerMouseover,H);YAHOO.util.Event.addListener(B,"mouseout",H._onContainerMouseout,H);YAHOO.util.Event.addListener(B,"click",H._onContainerClick,H);YAHOO.util.Event.addListener(B,"scroll",H._onContainerScroll,H);YAHOO.util.Event.addListener(B,"resize",H._onContainerResize,H);YAHOO.util.Event.addListener(F,"keypress",H._onTextboxKeyPress,H);YAHOO.util.Event.addListener(window,"unload",H._onWindowUnload,H);this.textboxFocusEvent=new YAHOO.util.CustomEvent("textboxFocus",this);this.textboxKeyEvent=new YAHOO.util.CustomEvent("textboxKey",this);this.dataRequestEvent=new YAHOO.util.CustomEvent("dataRequest",this);this.dataReturnEvent=new YAHOO.util.CustomEvent("dataReturn",this);this.dataErrorEvent=new YAHOO.util.CustomEvent("dataError",this);this.containerPopulateEvent=new YAHOO.util.CustomEvent("containerPopulate",this);this.containerExpandEvent=new YAHOO.util.CustomEvent("containerExpand",this);this.typeAheadEvent=new YAHOO.util.CustomEvent("typeAhead",this);this.itemMouseOverEvent=new YAHOO.util.CustomEvent("itemMouseOver",this);this.itemMouseOutEvent=new YAHOO.util.CustomEvent("itemMouseOut",this);this.itemArrowToEvent=new YAHOO.util.CustomEvent("itemArrowTo",this);this.itemArrowFromEvent=new YAHOO.util.CustomEvent("itemArrowFrom",this);this.itemSelectEvent=new YAHOO.util.CustomEvent("itemSelect",this);this.unmatchedItemSelectEvent=new YAHOO.util.CustomEvent("unmatchedItemSelect",this);this.selectionEnforceEvent=new YAHOO.util.CustomEvent("selectionEnforce",this);this.containerCollapseEvent=new YAHOO.util.CustomEvent("containerCollapse",this);this.textboxBlurEvent=new YAHOO.util.CustomEvent("textboxBlur",this);this.textboxChangeEvent=new YAHOO.util.CustomEvent("textboxChange",this);F.setAttribute("autocomplete","off");YAHOO.widget.AutoComplete._nIndex++;}else{}};YAHOO.widget.AutoComplete.prototype.dataSource=null;YAHOO.widget.AutoComplete.prototype.applyLocalFilter=null;YAHOO.widget.AutoComplete.prototype.queryMatchCase=false;YAHOO.widget.AutoComplete.prototype.queryMatchContains=false;YAHOO.widget.AutoComplete.prototype.queryMatchSubset=false;YAHOO.widget.AutoComplete.prototype.minQueryLength=1;YAHOO.widget.AutoComplete.prototype.maxResultsDisplayed=10;YAHOO.widget.AutoComplete.prototype.queryDelay=0.2;YAHOO.widget.AutoComplete.prototype.typeAheadDelay=0.5;YAHOO.widget.AutoComplete.prototype.queryInterval=500;YAHOO.widget.AutoComplete.prototype.highlightClassName="yui-ac-highlight";YAHOO.widget.AutoComplete.prototype.prehighlightClassName=null;YAHOO.widget.AutoComplete.prototype.delimChar=null;YAHOO.widget.AutoComplete.prototype.autoHighlight=true;YAHOO.widget.AutoComplete.prototype.typeAhead=false;YAHOO.widget.AutoComplete.prototype.animHoriz=false;YAHOO.widget.AutoComplete.prototype.animVert=true;YAHOO.widget.AutoComplete.prototype.animSpeed=0.3;YAHOO.widget.AutoComplete.prototype.forceSelection=false;YAHOO.widget.AutoComplete.prototype.allowBrowserAutocomplete=true;YAHOO.widget.AutoComplete.prototype.alwaysShowContainer=false;YAHOO.widget.AutoComplete.prototype.useIFrame=false;YAHOO.widget.AutoComplete.prototype.useShadow=false;YAHOO.widget.AutoComplete.prototype.suppressInputUpdate=false;YAHOO.widget.AutoComplete.prototype.resultTypeList=true;YAHOO.widget.AutoComplete.prototype.queryQuestionMark=true;YAHOO.widget.AutoComplete.prototype.toString=function(){return"AutoComplete "+this._sName;};YAHOO.widget.AutoComplete.prototype.getInputEl=function(){return this._elTextbox;};YAHOO.widget.AutoComplete.prototype.getContainerEl=function(){return this._elContainer;
};YAHOO.widget.AutoComplete.prototype.isFocused=function(){return(this._bFocused===null)?false:this._bFocused;};YAHOO.widget.AutoComplete.prototype.isContainerOpen=function(){return this._bContainerOpen;};YAHOO.widget.AutoComplete.prototype.getListEl=function(){return this._elList;};YAHOO.widget.AutoComplete.prototype.getListItemMatch=function(A){if(A._sResultMatch){return A._sResultMatch;}else{return null;}};YAHOO.widget.AutoComplete.prototype.getListItemData=function(A){if(A._oResultData){return A._oResultData;}else{return null;}};YAHOO.widget.AutoComplete.prototype.getListItemIndex=function(A){if(YAHOO.lang.isNumber(A._nItemIndex)){return A._nItemIndex;}else{return null;}};YAHOO.widget.AutoComplete.prototype.setHeader=function(B){if(this._elHeader){var A=this._elHeader;if(B){A.innerHTML=B;A.style.display="block";}else{A.innerHTML="";A.style.display="none";}}};YAHOO.widget.AutoComplete.prototype.setFooter=function(B){if(this._elFooter){var A=this._elFooter;if(B){A.innerHTML=B;A.style.display="block";}else{A.innerHTML="";A.style.display="none";}}};YAHOO.widget.AutoComplete.prototype.setBody=function(A){if(this._elBody){var B=this._elBody;YAHOO.util.Event.purgeElement(B,true);if(A){B.innerHTML=A;B.style.display="block";}else{B.innerHTML="";B.style.display="none";}this._elList=null;}};YAHOO.widget.AutoComplete.prototype.generateRequest=function(B){var A=this.dataSource.dataType;if(A===YAHOO.util.DataSourceBase.TYPE_XHR){if(!this.dataSource.connMethodPost){B=(this.queryQuestionMark?"?":"")+(this.dataSource.scriptQueryParam||"query")+"="+B+(this.dataSource.scriptQueryAppend?("&"+this.dataSource.scriptQueryAppend):"");}else{B=(this.dataSource.scriptQueryParam||"query")+"="+B+(this.dataSource.scriptQueryAppend?("&"+this.dataSource.scriptQueryAppend):"");}}else{if(A===YAHOO.util.DataSourceBase.TYPE_SCRIPTNODE){B="&"+(this.dataSource.scriptQueryParam||"query")+"="+B+(this.dataSource.scriptQueryAppend?("&"+this.dataSource.scriptQueryAppend):"");}}return B;};YAHOO.widget.AutoComplete.prototype.sendQuery=function(B){this._bFocused=null;var A=(this.delimChar)?this._elTextbox.value+B:B;this._sendQuery(A);};YAHOO.widget.AutoComplete.prototype.collapseContainer=function(){this._toggleContainer(false);};YAHOO.widget.AutoComplete.prototype.getSubsetMatches=function(E){var D,C,A;for(var B=E.length;B>=this.minQueryLength;B--){A=this.generateRequest(E.substr(0,B));this.dataRequestEvent.fire(this,D,A);C=this.dataSource.getCachedResponse(A);if(C){return this.filterResults.apply(this.dataSource,[E,C,C,{scope:this}]);}}return null;};YAHOO.widget.AutoComplete.prototype.preparseRawResponse=function(C,B,A){var D=((this.responseStripAfter!=="")&&(B.indexOf))?B.indexOf(this.responseStripAfter):-1;if(D!=-1){B=B.substring(0,D);}return B;};YAHOO.widget.AutoComplete.prototype.filterResults=function(J,L,P,K){if(K&&K.argument&&K.argument.query){J=K.argument.query;}if(J&&J!==""){P=YAHOO.widget.AutoComplete._cloneObject(P);var H=K.scope,O=this,B=P.results,M=[],D=false,I=(O.queryMatchCase||H.queryMatchCase),A=(O.queryMatchContains||H.queryMatchContains);for(var C=B.length-1;C>=0;C--){var F=B[C];var E=null;if(YAHOO.lang.isString(F)){E=F;}else{if(YAHOO.lang.isArray(F)){E=F[0];}else{if(this.responseSchema.fields){var N=this.responseSchema.fields[0].key||this.responseSchema.fields[0];E=F[N];}else{if(this.key){E=F[this.key];}}}}if(YAHOO.lang.isString(E)){var G=(I)?E.indexOf(decodeURIComponent(J)):E.toLowerCase().indexOf(decodeURIComponent(J).toLowerCase());if((!A&&(G===0))||(A&&(G>-1))){M.unshift(F);}}}P.results=M;}else{}return P;};YAHOO.widget.AutoComplete.prototype.handleResponse=function(C,A,B){if((this instanceof YAHOO.widget.AutoComplete)&&this._sName){this._populateList(C,A,B);}};YAHOO.widget.AutoComplete.prototype.doBeforeLoadData=function(C,A,B){return true;};YAHOO.widget.AutoComplete.prototype.formatResult=function(B,D,A){var C=(A)?A:"";return C;};YAHOO.widget.AutoComplete.prototype.doBeforeExpandContainer=function(D,A,C,B){return true;};YAHOO.widget.AutoComplete.prototype.destroy=function(){var B=this.toString();var A=this._elTextbox;var D=this._elContainer;this.textboxFocusEvent.unsubscribeAll();this.textboxKeyEvent.unsubscribeAll();this.dataRequestEvent.unsubscribeAll();this.dataReturnEvent.unsubscribeAll();this.dataErrorEvent.unsubscribeAll();this.containerPopulateEvent.unsubscribeAll();this.containerExpandEvent.unsubscribeAll();this.typeAheadEvent.unsubscribeAll();this.itemMouseOverEvent.unsubscribeAll();this.itemMouseOutEvent.unsubscribeAll();this.itemArrowToEvent.unsubscribeAll();this.itemArrowFromEvent.unsubscribeAll();this.itemSelectEvent.unsubscribeAll();this.unmatchedItemSelectEvent.unsubscribeAll();this.selectionEnforceEvent.unsubscribeAll();this.containerCollapseEvent.unsubscribeAll();this.textboxBlurEvent.unsubscribeAll();this.textboxChangeEvent.unsubscribeAll();YAHOO.util.Event.purgeElement(A,true);YAHOO.util.Event.purgeElement(D,true);D.innerHTML="";for(var C in this){if(YAHOO.lang.hasOwnProperty(this,C)){this[C]=null;}}};YAHOO.widget.AutoComplete.prototype.textboxFocusEvent=null;YAHOO.widget.AutoComplete.prototype.textboxKeyEvent=null;YAHOO.widget.AutoComplete.prototype.dataRequestEvent=null;YAHOO.widget.AutoComplete.prototype.dataReturnEvent=null;YAHOO.widget.AutoComplete.prototype.dataErrorEvent=null;YAHOO.widget.AutoComplete.prototype.containerPopulateEvent=null;YAHOO.widget.AutoComplete.prototype.containerExpandEvent=null;YAHOO.widget.AutoComplete.prototype.typeAheadEvent=null;YAHOO.widget.AutoComplete.prototype.itemMouseOverEvent=null;YAHOO.widget.AutoComplete.prototype.itemMouseOutEvent=null;YAHOO.widget.AutoComplete.prototype.itemArrowToEvent=null;YAHOO.widget.AutoComplete.prototype.itemArrowFromEvent=null;YAHOO.widget.AutoComplete.prototype.itemSelectEvent=null;YAHOO.widget.AutoComplete.prototype.unmatchedItemSelectEvent=null;YAHOO.widget.AutoComplete.prototype.selectionEnforceEvent=null;YAHOO.widget.AutoComplete.prototype.containerCollapseEvent=null;YAHOO.widget.AutoComplete.prototype.textboxBlurEvent=null;
YAHOO.widget.AutoComplete.prototype.textboxChangeEvent=null;YAHOO.widget.AutoComplete._nIndex=0;YAHOO.widget.AutoComplete.prototype._sName=null;YAHOO.widget.AutoComplete.prototype._elTextbox=null;YAHOO.widget.AutoComplete.prototype._elContainer=null;YAHOO.widget.AutoComplete.prototype._elContent=null;YAHOO.widget.AutoComplete.prototype._elHeader=null;YAHOO.widget.AutoComplete.prototype._elBody=null;YAHOO.widget.AutoComplete.prototype._elFooter=null;YAHOO.widget.AutoComplete.prototype._elShadow=null;YAHOO.widget.AutoComplete.prototype._elIFrame=null;YAHOO.widget.AutoComplete.prototype._bFocused=null;YAHOO.widget.AutoComplete.prototype._oAnim=null;YAHOO.widget.AutoComplete.prototype._bContainerOpen=false;YAHOO.widget.AutoComplete.prototype._bOverContainer=false;YAHOO.widget.AutoComplete.prototype._elList=null;YAHOO.widget.AutoComplete.prototype._nDisplayedItems=0;YAHOO.widget.AutoComplete.prototype._sCurQuery=null;YAHOO.widget.AutoComplete.prototype._sPastSelections="";YAHOO.widget.AutoComplete.prototype._sInitInputValue=null;YAHOO.widget.AutoComplete.prototype._elCurListItem=null;YAHOO.widget.AutoComplete.prototype._bItemSelected=false;YAHOO.widget.AutoComplete.prototype._nKeyCode=null;YAHOO.widget.AutoComplete.prototype._nDelayID=-1;YAHOO.widget.AutoComplete.prototype._nTypeAheadDelayID=-1;YAHOO.widget.AutoComplete.prototype._iFrameSrc="javascript:false;";YAHOO.widget.AutoComplete.prototype._queryInterval=null;YAHOO.widget.AutoComplete.prototype._sLastTextboxValue=null;YAHOO.widget.AutoComplete.prototype._initProps=function(){var B=this.minQueryLength;if(!YAHOO.lang.isNumber(B)){this.minQueryLength=1;}var E=this.maxResultsDisplayed;if(!YAHOO.lang.isNumber(E)||(E<1)){this.maxResultsDisplayed=10;}var F=this.queryDelay;if(!YAHOO.lang.isNumber(F)||(F<0)){this.queryDelay=0.2;}var C=this.typeAheadDelay;if(!YAHOO.lang.isNumber(C)||(C<0)){this.typeAheadDelay=0.2;}var A=this.delimChar;if(YAHOO.lang.isString(A)&&(A.length>0)){this.delimChar=[A];}else{if(!YAHOO.lang.isArray(A)){this.delimChar=null;}}var D=this.animSpeed;if((this.animHoriz||this.animVert)&&YAHOO.util.Anim){if(!YAHOO.lang.isNumber(D)||(D<0)){this.animSpeed=0.3;}if(!this._oAnim){this._oAnim=new YAHOO.util.Anim(this._elContent,{},this.animSpeed);}else{this._oAnim.duration=this.animSpeed;}}if(this.forceSelection&&A){}};YAHOO.widget.AutoComplete.prototype._initContainerHelperEls=function(){if(this.useShadow&&!this._elShadow){var A=document.createElement("div");A.className="yui-ac-shadow";A.style.width=0;A.style.height=0;this._elShadow=this._elContainer.appendChild(A);}if(this.useIFrame&&!this._elIFrame){var B=document.createElement("iframe");B.src=this._iFrameSrc;B.frameBorder=0;B.scrolling="no";B.style.position="absolute";B.style.width=0;B.style.height=0;B.tabIndex=-1;B.style.padding=0;this._elIFrame=this._elContainer.appendChild(B);}};YAHOO.widget.AutoComplete.prototype._initContainerEl=function(){YAHOO.util.Dom.addClass(this._elContainer,"yui-ac-container");if(!this._elContent){var C=document.createElement("div");C.className="yui-ac-content";C.style.display="none";this._elContent=this._elContainer.appendChild(C);var B=document.createElement("div");B.className="yui-ac-hd";B.style.display="none";this._elHeader=this._elContent.appendChild(B);var D=document.createElement("div");D.className="yui-ac-bd";this._elBody=this._elContent.appendChild(D);var A=document.createElement("div");A.className="yui-ac-ft";A.style.display="none";this._elFooter=this._elContent.appendChild(A);}else{}};YAHOO.widget.AutoComplete.prototype._initListEl=function(){var C=this.maxResultsDisplayed;var A=this._elList||document.createElement("ul");var B;while(A.childNodes.length<C){B=document.createElement("li");B.style.display="none";B._nItemIndex=A.childNodes.length;A.appendChild(B);}if(!this._elList){var D=this._elBody;YAHOO.util.Event.purgeElement(D,true);D.innerHTML="";this._elList=D.appendChild(A);}};YAHOO.widget.AutoComplete.prototype._focus=function(){var A=this;setTimeout(function(){try{A._elTextbox.focus();}catch(B){}},0);};YAHOO.widget.AutoComplete.prototype._enableIntervalDetection=function(){var A=this;if(!A._queryInterval&&A.queryInterval){A._queryInterval=setInterval(function(){A._onInterval();},A.queryInterval);}};YAHOO.widget.AutoComplete.prototype._onInterval=function(){var A=this._elTextbox.value;var B=this._sLastTextboxValue;if(A!=B){this._sLastTextboxValue=A;this._sendQuery(A);}};YAHOO.widget.AutoComplete.prototype._clearInterval=function(){if(this._queryInterval){clearInterval(this._queryInterval);this._queryInterval=null;}};YAHOO.widget.AutoComplete.prototype._isIgnoreKey=function(A){if((A==9)||(A==13)||(A==16)||(A==17)||(A>=18&&A<=20)||(A==27)||(A>=33&&A<=35)||(A>=36&&A<=40)||(A>=44&&A<=45)||(A==229)){return true;}return false;};YAHOO.widget.AutoComplete.prototype._sendQuery=function(D){if(this.minQueryLength<0){this._toggleContainer(false);return;}if(this.delimChar){var A=this._extractQuery(D);D=A.query;this._sPastSelections=A.previous;}if((D&&(D.length<this.minQueryLength))||(!D&&this.minQueryLength>0)){if(this._nDelayID!=-1){clearTimeout(this._nDelayID);}this._toggleContainer(false);return;}D=encodeURIComponent(D);this._nDelayID=-1;if(this.dataSource.queryMatchSubset||this.queryMatchSubset){var C=this.getSubsetMatches(D);if(C){this.handleResponse(D,C,{query:D});return;}}if(this.responseStripAfter){this.dataSource.doBeforeParseData=this.preparseRawResponse;}if(this.applyLocalFilter){this.dataSource.doBeforeCallback=this.filterResults;}var B=this.generateRequest(D);this.dataRequestEvent.fire(this,D,B);this.dataSource.sendRequest(B,{success:this.handleResponse,failure:this.handleResponse,scope:this,argument:{query:D}});};YAHOO.widget.AutoComplete.prototype._populateList=function(K,F,C){if(this._nTypeAheadDelayID!=-1){clearTimeout(this._nTypeAheadDelayID);}K=(C&&C.query)?C.query:K;var H=this.doBeforeLoadData(K,F,C);if(H&&!F.error){this.dataReturnEvent.fire(this,K,F.results);if(this._bFocused||(this._bFocused===null)){var M=decodeURIComponent(K);this._sCurQuery=M;
this._bItemSelected=false;var R=F.results,A=Math.min(R.length,this.maxResultsDisplayed),J=(this.dataSource.responseSchema.fields)?(this.dataSource.responseSchema.fields[0].key||this.dataSource.responseSchema.fields[0]):0;if(A>0){if(!this._elList||(this._elList.childNodes.length<A)){this._initListEl();}this._initContainerHelperEls();var I=this._elList.childNodes;for(var Q=A-1;Q>=0;Q--){var P=I[Q],E=R[Q];if(this.resultTypeList){var B=[];B[0]=(YAHOO.lang.isString(E))?E:E[J]||E[this.key];var L=this.dataSource.responseSchema.fields;if(YAHOO.lang.isArray(L)&&(L.length>1)){for(var N=1,S=L.length;N<S;N++){B[B.length]=E[L[N].key||L[N]];}}else{if(YAHOO.lang.isArray(E)){B=E;}else{if(YAHOO.lang.isString(E)){B=[E];}else{B[1]=E;}}}E=B;}P._sResultMatch=(YAHOO.lang.isString(E))?E:(YAHOO.lang.isArray(E))?E[0]:(E[J]||"");P._oResultData=E;P.innerHTML=this.formatResult(E,M,P._sResultMatch);P.style.display="";}if(A<I.length){var G;for(var O=I.length-1;O>=A;O--){G=I[O];G.style.display="none";}}this._nDisplayedItems=A;this.containerPopulateEvent.fire(this,K,R);if(this.autoHighlight){var D=this._elList.firstChild;this._toggleHighlight(D,"to");this.itemArrowToEvent.fire(this,D);this._typeAhead(D,K);}else{this._toggleHighlight(this._elCurListItem,"from");}H=this.doBeforeExpandContainer(this._elTextbox,this._elContainer,K,R);this._toggleContainer(H);}else{this._toggleContainer(false);}return;}}else{this.dataErrorEvent.fire(this,K);}};YAHOO.widget.AutoComplete.prototype._clearSelection=function(){var A=(this.delimChar)?this._extractQuery(this._elTextbox.value):{previous:"",query:this._elTextbox.value};this._elTextbox.value=A.previous;this.selectionEnforceEvent.fire(this,A.query);};YAHOO.widget.AutoComplete.prototype._textMatchesOption=function(){var A=null;for(var B=0;B<this._nDisplayedItems;B++){var C=this._elList.childNodes[B];var D=(""+C._sResultMatch).toLowerCase();if(D==this._sCurQuery.toLowerCase()){A=C;break;}}return(A);};YAHOO.widget.AutoComplete.prototype._typeAhead=function(B,D){if(!this.typeAhead||(this._nKeyCode==8)){return;}var A=this,C=this._elTextbox;if(C.setSelectionRange||C.createTextRange){this._nTypeAheadDelayID=setTimeout(function(){var F=C.value.length;A._updateValue(B);var G=C.value.length;A._selectText(C,F,G);var E=C.value.substr(F,G);A.typeAheadEvent.fire(A,D,E);},(this.typeAheadDelay*1000));}};YAHOO.widget.AutoComplete.prototype._selectText=function(D,A,B){if(D.setSelectionRange){D.setSelectionRange(A,B);}else{if(D.createTextRange){var C=D.createTextRange();C.moveStart("character",A);C.moveEnd("character",B-D.value.length);C.select();}else{D.select();}}};YAHOO.widget.AutoComplete.prototype._extractQuery=function(H){var C=this.delimChar,F=-1,G,E,B=C.length-1,D;for(;B>=0;B--){G=H.lastIndexOf(C[B]);if(G>F){F=G;}}if(C[B]==" "){for(var A=C.length-1;A>=0;A--){if(H[F-1]==C[A]){F--;break;}}}if(F>-1){E=F+1;while(H.charAt(E)==" "){E+=1;}D=H.substring(0,E);H=H.substr(E);}else{D="";}return{previous:D,query:H};};YAHOO.widget.AutoComplete.prototype._toggleContainerHelpers=function(D){var E=this._elContent.offsetWidth+"px";var B=this._elContent.offsetHeight+"px";if(this.useIFrame&&this._elIFrame){var C=this._elIFrame;if(D){C.style.width=E;C.style.height=B;C.style.padding="";}else{C.style.width=0;C.style.height=0;C.style.padding=0;}}if(this.useShadow&&this._elShadow){var A=this._elShadow;if(D){A.style.width=E;A.style.height=B;}else{A.style.width=0;A.style.height=0;}}};YAHOO.widget.AutoComplete.prototype._toggleContainer=function(I){var D=this._elContainer;if(this.alwaysShowContainer&&this._bContainerOpen){return;}if(!I){this._toggleHighlight(this._elCurListItem,"from");this._nDisplayedItems=0;this._sCurQuery=null;if(this._elContent.style.display=="none"){return;}}var A=this._oAnim;if(A&&A.getEl()&&(this.animHoriz||this.animVert)){if(A.isAnimated()){A.stop(true);}var G=this._elContent.cloneNode(true);D.appendChild(G);G.style.top="-9000px";G.style.width="";G.style.height="";G.style.display="";var F=G.offsetWidth;var C=G.offsetHeight;var B=(this.animHoriz)?0:F;var E=(this.animVert)?0:C;A.attributes=(I)?{width:{to:F},height:{to:C}}:{width:{to:B},height:{to:E}};if(I&&!this._bContainerOpen){this._elContent.style.width=B+"px";this._elContent.style.height=E+"px";}else{this._elContent.style.width=F+"px";this._elContent.style.height=C+"px";}D.removeChild(G);G=null;var H=this;var J=function(){A.onComplete.unsubscribeAll();if(I){H._toggleContainerHelpers(true);H._bContainerOpen=I;H.containerExpandEvent.fire(H);}else{H._elContent.style.display="none";H._bContainerOpen=I;H.containerCollapseEvent.fire(H);}};this._toggleContainerHelpers(false);this._elContent.style.display="";A.onComplete.subscribe(J);A.animate();}else{if(I){this._elContent.style.display="";this._toggleContainerHelpers(true);this._bContainerOpen=I;this.containerExpandEvent.fire(this);}else{this._toggleContainerHelpers(false);this._elContent.style.display="none";this._bContainerOpen=I;this.containerCollapseEvent.fire(this);}}};YAHOO.widget.AutoComplete.prototype._toggleHighlight=function(A,C){if(A){var B=this.highlightClassName;if(this._elCurListItem){YAHOO.util.Dom.removeClass(this._elCurListItem,B);this._elCurListItem=null;}if((C=="to")&&B){YAHOO.util.Dom.addClass(A,B);this._elCurListItem=A;}}};YAHOO.widget.AutoComplete.prototype._togglePrehighlight=function(B,C){if(B==this._elCurListItem){return;}var A=this.prehighlightClassName;if((C=="mouseover")&&A){YAHOO.util.Dom.addClass(B,A);}else{YAHOO.util.Dom.removeClass(B,A);}};YAHOO.widget.AutoComplete.prototype._updateValue=function(C){if(!this.suppressInputUpdate){var F=this._elTextbox;var E=(this.delimChar)?(this.delimChar[0]||this.delimChar):null;var B=C._sResultMatch;var D="";if(E){D=this._sPastSelections;D+=B+E;if(E!=" "){D+=" ";}}else{D=B;}F.value=D;if(F.type=="textarea"){F.scrollTop=F.scrollHeight;}var A=F.value.length;this._selectText(F,A,A);this._elCurListItem=C;}};YAHOO.widget.AutoComplete.prototype._selectItem=function(A){this._bItemSelected=true;this._updateValue(A);this._sPastSelections=this._elTextbox.value;
this._clearInterval();this.itemSelectEvent.fire(this,A,A._oResultData);this._toggleContainer(false);};YAHOO.widget.AutoComplete.prototype._jumpSelection=function(){if(this._elCurListItem){this._selectItem(this._elCurListItem);}else{this._toggleContainer(false);}};YAHOO.widget.AutoComplete.prototype._moveSelection=function(G){if(this._bContainerOpen){var H=this._elCurListItem,D=-1;if(H){D=H._nItemIndex;}var E=(G==40)?(D+1):(D-1);if(E<-2||E>=this._nDisplayedItems){return;}if(H){this._toggleHighlight(H,"from");this.itemArrowFromEvent.fire(this,H);}if(E==-1){if(this.delimChar){this._elTextbox.value=this._sPastSelections+this._sCurQuery;}else{this._elTextbox.value=this._sCurQuery;}return;}if(E==-2){this._toggleContainer(false);return;}var F=this._elList.childNodes[E],B=this._elContent,C=YAHOO.util.Dom.getStyle(B,"overflow"),I=YAHOO.util.Dom.getStyle(B,"overflowY"),A=((C=="auto")||(C=="scroll")||(I=="auto")||(I=="scroll"));if(A&&(E>-1)&&(E<this._nDisplayedItems)){if(G==40){if((F.offsetTop+F.offsetHeight)>(B.scrollTop+B.offsetHeight)){B.scrollTop=(F.offsetTop+F.offsetHeight)-B.offsetHeight;}else{if((F.offsetTop+F.offsetHeight)<B.scrollTop){B.scrollTop=F.offsetTop;}}}else{if(F.offsetTop<B.scrollTop){this._elContent.scrollTop=F.offsetTop;}else{if(F.offsetTop>(B.scrollTop+B.offsetHeight)){this._elContent.scrollTop=(F.offsetTop+F.offsetHeight)-B.offsetHeight;}}}}this._toggleHighlight(F,"to");this.itemArrowToEvent.fire(this,F);if(this.typeAhead){this._updateValue(F);}}};YAHOO.widget.AutoComplete.prototype._onContainerMouseover=function(A,C){var D=YAHOO.util.Event.getTarget(A);var B=D.nodeName.toLowerCase();while(D&&(B!="table")){switch(B){case"body":return;case"li":if(C.prehighlightClassName){C._togglePrehighlight(D,"mouseover");}else{C._toggleHighlight(D,"to");}C.itemMouseOverEvent.fire(C,D);break;case"div":if(YAHOO.util.Dom.hasClass(D,"yui-ac-container")){C._bOverContainer=true;return;}break;default:break;}D=D.parentNode;if(D){B=D.nodeName.toLowerCase();}}};YAHOO.widget.AutoComplete.prototype._onContainerMouseout=function(A,C){var D=YAHOO.util.Event.getTarget(A);var B=D.nodeName.toLowerCase();while(D&&(B!="table")){switch(B){case"body":return;case"li":if(C.prehighlightClassName){C._togglePrehighlight(D,"mouseout");}else{C._toggleHighlight(D,"from");}C.itemMouseOutEvent.fire(C,D);break;case"ul":C._toggleHighlight(C._elCurListItem,"to");break;case"div":if(YAHOO.util.Dom.hasClass(D,"yui-ac-container")){C._bOverContainer=false;return;}break;default:break;}D=D.parentNode;if(D){B=D.nodeName.toLowerCase();}}};YAHOO.widget.AutoComplete.prototype._onContainerClick=function(A,C){var D=YAHOO.util.Event.getTarget(A);var B=D.nodeName.toLowerCase();while(D&&(B!="table")){switch(B){case"body":return;case"li":C._toggleHighlight(D,"to");C._selectItem(D);return;default:break;}D=D.parentNode;if(D){B=D.nodeName.toLowerCase();}}};YAHOO.widget.AutoComplete.prototype._onContainerScroll=function(A,B){B._focus();};YAHOO.widget.AutoComplete.prototype._onContainerResize=function(A,B){B._toggleContainerHelpers(B._bContainerOpen);};YAHOO.widget.AutoComplete.prototype._onTextboxKeyDown=function(A,B){var C=A.keyCode;if(B._nTypeAheadDelayID!=-1){clearTimeout(B._nTypeAheadDelayID);}switch(C){case 9:if(!YAHOO.env.ua.opera&&(navigator.userAgent.toLowerCase().indexOf("mac")==-1)||(YAHOO.env.ua.webkit>420)){if(B._elCurListItem){if(B.delimChar&&(B._nKeyCode!=C)){if(B._bContainerOpen){YAHOO.util.Event.stopEvent(A);}}B._selectItem(B._elCurListItem);}else{B._toggleContainer(false);}}break;case 13:if(!YAHOO.env.ua.opera&&(navigator.userAgent.toLowerCase().indexOf("mac")==-1)||(YAHOO.env.ua.webkit>420)){if(B._elCurListItem){if(B._nKeyCode!=C){if(B._bContainerOpen){YAHOO.util.Event.stopEvent(A);}}B._selectItem(B._elCurListItem);}else{B._toggleContainer(false);}}break;case 27:B._toggleContainer(false);return;case 39:B._jumpSelection();break;case 38:if(B._bContainerOpen){YAHOO.util.Event.stopEvent(A);B._moveSelection(C);}break;case 40:if(B._bContainerOpen){YAHOO.util.Event.stopEvent(A);B._moveSelection(C);}break;default:B._bItemSelected=false;B._toggleHighlight(B._elCurListItem,"from");B.textboxKeyEvent.fire(B,C);break;}if(C===18){B._enableIntervalDetection();}B._nKeyCode=C;};YAHOO.widget.AutoComplete.prototype._onTextboxKeyPress=function(A,B){var C=A.keyCode;if(YAHOO.env.ua.opera||(navigator.userAgent.toLowerCase().indexOf("mac")!=-1)&&(YAHOO.env.ua.webkit<420)){switch(C){case 9:if(B._bContainerOpen){if(B.delimChar){YAHOO.util.Event.stopEvent(A);}if(B._elCurListItem){B._selectItem(B._elCurListItem);}else{B._toggleContainer(false);}}break;case 13:if(B._bContainerOpen){YAHOO.util.Event.stopEvent(A);if(B._elCurListItem){B._selectItem(B._elCurListItem);}else{B._toggleContainer(false);}}break;default:break;}}else{if(C==229){B._enableIntervalDetection();}}};YAHOO.widget.AutoComplete.prototype._onTextboxKeyUp=function(A,C){var B=this.value;C._initProps();var D=A.keyCode;if(C._isIgnoreKey(D)){return;}if(C._nDelayID!=-1){clearTimeout(C._nDelayID);}C._nDelayID=setTimeout(function(){C._sendQuery(B);},(C.queryDelay*1000));};YAHOO.widget.AutoComplete.prototype._onTextboxFocus=function(A,B){if(!B._bFocused){B._elTextbox.setAttribute("autocomplete","off");B._bFocused=true;B._sInitInputValue=B._elTextbox.value;B.textboxFocusEvent.fire(B);}};YAHOO.widget.AutoComplete.prototype._onTextboxBlur=function(A,C){if(!C._bOverContainer||(C._nKeyCode==9)){if(!C._bItemSelected){var B=C._textMatchesOption();if(!C._bContainerOpen||(C._bContainerOpen&&(B===null))){if(C.forceSelection){C._clearSelection();}else{C.unmatchedItemSelectEvent.fire(C,C._sCurQuery);}}else{if(C.forceSelection){C._selectItem(B);}}}C._clearInterval();C._bFocused=false;if(C._sInitInputValue!==C._elTextbox.value){C.textboxChangeEvent.fire(C);}C.textboxBlurEvent.fire(C);C._toggleContainer(false);}else{C._focus();}};YAHOO.widget.AutoComplete.prototype._onWindowUnload=function(A,B){if(B&&B._elTextbox&&B.allowBrowserAutocomplete){B._elTextbox.setAttribute("autocomplete","on");}};YAHOO.widget.AutoComplete.prototype.doBeforeSendQuery=function(A){return this.generateRequest(A);
};YAHOO.widget.AutoComplete.prototype.getListItems=function(){var C=[],B=this._elList.childNodes;for(var A=B.length-1;A>=0;A--){C[A]=B[A];}return C;};YAHOO.widget.AutoComplete._cloneObject=function(D){if(!YAHOO.lang.isValue(D)){return D;}var F={};if(YAHOO.lang.isFunction(D)){F=D;}else{if(YAHOO.lang.isArray(D)){var E=[];for(var C=0,B=D.length;C<B;C++){E[C]=YAHOO.widget.AutoComplete._cloneObject(D[C]);}F=E;}else{if(YAHOO.lang.isObject(D)){for(var A in D){if(YAHOO.lang.hasOwnProperty(D,A)){if(YAHOO.lang.isValue(D[A])&&YAHOO.lang.isObject(D[A])||YAHOO.lang.isArray(D[A])){F[A]=YAHOO.widget.AutoComplete._cloneObject(D[A]);}else{F[A]=D[A];}}}}else{F=D;}}}return F;};YAHOO.register("autocomplete",YAHOO.widget.AutoComplete,{version:"2.7.0",build:"1796"});if(YAHOO&&YAHOO.widget&&YAHOO.widget.AutoComplete){YAHOO.widget.AutoComplete.prototype.maxResultsVisible=5;YAHOO.widget.AutoComplete.prototype.resultsAvailable=-1;YAHOO.widget.AutoComplete.prototype.resultCharLimit=35;YAHOO.widget.AutoComplete.prototype._jumpSelection=function(){return true;};YAHOO.widget.AutoComplete.prototype.rearrageVisibleResults=function(k,a,d){if(this.resultsAvailable<=this.maxResultsVisible){return;}if(!a){a="";}var c=null;var b=-1;var e=-1;var l=-1;var j=-1;for(var f=0;f<this.resultsAvailable;f++){var h=this.resultElements[f];var g=YAHOO.util.Dom.getStyle(h,"display");if(YAHOO.util.Dom.hasClass(h,this.highlightClassName)){e=f;}if(g!="none"&&b==-1){b=f;l=f;j=f+(this.maxResultsVisible-1);if(a=="up"&&l>0){l--;j--;}else{if(a=="down"&&j<(this.resultsAvailable-1)){l++;j++;}}}}for(var f=0;f<this.resultElements.length;f++){var h=this.resultElements[f];if(f<l||f>j){YAHOO.util.Dom.setStyle(h,"display","none");}else{YAHOO.util.Dom.setStyle(h,"display","list-item");}}if(d){if(e>-1&&e<l){this.rearrageVisibleResults(k,"up");}else{if(e>j){this.rearrageVisibleResults(k,"down");}}}YAHOO.Shopping.AC.initScrollButtuns();};}YAHOO.namespace("YAHOO.Shopping.AC");YAHOO.Shopping.AC={init:function(){if(!YAHOO.widget||!YAHOO.widget.AutoComplete){return;}this.container=document.getElementById("ac-container");if(!this.container){return;}this.searchForm=YAHOO.util.Dom.getElementsByClassName("srch-form","FORM",this.container.parentNode.parentNode)[0];this.searchBox=document.getElementById("srch-box-top");this.acContent=document.getElementById("ac-content");this.messages={initMsg:"No suggestions. Please begin typing your search query.",noresultMsg:"Sorry, no suggestions.",offMsg:'Suggestions are turned off. <a id="ac-control-on-2" href="#">Click here to activate.</a>'};this.messageEl=YAHOO.util.Dom.getElementsByClassName("msg","DIV",this.container)[0];this.showMessage(this.messages.initMsg);this.cookieName="YSHPAC";this.containerCanOpen=true;this.minQueryLength=3;this.firstExpand=true;this.isAcEnabled=this.getAcState();this.isContainerOpen=false;this.ad=document.getElementById("shmodnbd");this.openCloseBtn=document.getElementById("ac-toggle-button");YAHOO.util.Event.on(this.openCloseBtn,"click",this.toggleContainer,this,true);var a=YAHOO.util.Dom.getElementsByClassName("ac-arrows","DIV",this.container)[0];this.scrollUpBtn=YAHOO.util.Dom.getElementsByClassName("up","A",a)[0];this.scrollDownBtn=YAHOO.util.Dom.getElementsByClassName("down","A",a)[0];YAHOO.util.Event.on(this.scrollUpBtn,"click",this.scrollUp,this,true);YAHOO.util.Event.on(this.scrollDownBtn,"click",this.scrollDown,this,true);this.turnOnBtn=document.getElementById("ac-control-on");this.turnOffBtn=document.getElementById("ac-control-off");YAHOO.util.Event.on(this.turnOnBtn,"click",this.turnOn,this,true);YAHOO.util.Event.on(this.turnOffBtn,"click",this.turnOff,this,true);this.initStateButtons();YAHOO.util.Event.on(this.searchBox,"keyup",this.onKeyUp,this,true);YAHOO.util.Event.on(this.searchForm,"submit",this.formSubmitted,this,true);this.acDS=new YAHOO.widget.DS_ScriptNode("http://sugg.shopping.yahoo.com/ac/query?",["gossip.results","key"]);this.acDS.scriptQueryParam="command";this.ac=new YAHOO.widget.AutoComplete(this.searchBox,this.acContent,this.acDS);this.ac.allowBrowserAutocomplete=true;this.ac.maxResultsDisplayed=0;this.ac.autoHighlight=false;this.ac.minQueryLength=this.minQueryLength;this.ac.animVert=false;this.ac.alwaysShowContainer=true;this.ac.typeAhead=true;this.ac.formatResult=function(c,g){var b=this.resultCharLimit;var f=c[0].toLowerCase();var e=f;g=g.toLowerCase();if(f.length>b){var d=f.indexOf(g);if(d>0){f="..."+f.substr(d);b-=3;}if(f.length>b){f=f.substr(0,b)+"...";}}return'<a alt="'+e+'" title="'+e+'">'+f.replace(g,"<strong>"+g+"</strong>")+"</a>";};this.ac.doBeforeExpandContainer=function(b,c,e,d){YAHOO.Shopping.AC.expandContainer();return true;};this.ac.itemArrowToEvent.subscribe(this.arrowed,this,true);this.ac.dataReturnEvent.subscribe(this.dataReturned,this,true);this.ac.itemSelectEvent.subscribe(this.itemSelected,this,true);if(!this.isAcEnabled){this.turnOff();}YAHOO.util.Event.on(window,"resize",this.resized,this,true);},formSubmitted:function(a){this.containerCanOpen=false;this.collapseContainer();return true;},itemSelected:function(b,a){this.formSubmitted(null);if(YAHOO.Shopping.Listing){YAHOO.Shopping.Listing.searchSubmitted(this.searchForm);}this.searchForm.submit();},expandContainer:function(a){if(this.isContainerOpen){return;}if(!this.containerCanOpen){return false;}if(this.ad){YAHOO.util.Dom.addClass(this.ad,"invisible");}var b=new YAHOO.util.Anim(this.container,{height:{to:100}},0.3,YAHOO.util.Easing.easeOut);b.animate();YAHOO.util.Dom.replaceClass(this.openCloseBtn,"closed","open");if(a&&this.firstExpand&&this.searchBox.value!=""){this.makeManualRequest();}this.firstExpand=false;this.isContainerOpen=true;if(a){YAHOO.Shopping.util.trackAction({sec:"searchac",slk:"sac-op"});}else{YAHOO.Shopping.util.trackAction({sec:"searchac",slk:"sac-aop"});}},collapseContainer:function(a){if(!this.isContainerOpen){return;}var b=new YAHOO.util.Anim(this.container,{height:{to:0}},0.3,YAHOO.util.Easing.easeOut);b.onComplete.subscribe(this.afterCollapse,this,true);b.animate();YAHOO.util.Dom.replaceClass(this.openCloseBtn,"open","closed");this.isContainerOpen=false;if(a){YAHOO.Shopping.util.trackAction({sec:"searchac",slk:"sac-cl"});}else{YAHOO.Shopping.util.trackAction({sec:"searchac",slk:"sac-acl"});}},afterCollapse:function(){if(this.ad){YAHOO.util.Dom.removeClass(this.ad,"invisible");}},toggleContainer:function(b){YAHOO.util.Event.preventDefault(b);var a=YAHOO.util.Event.getTarget(b);if(a.id=="ac-toggle-button"){a.blur();}if(this.isContainerOpen){this.collapseContainer(true);}else{this.expandContainer(true);}return false;},scrollUp:function(a){YAHOO.util.Event.preventDefault(a);if(YAHOO.util.Dom.hasClass(this.scrollUpBtn,"up-disabled")){return;}this.ac.rearrageVisibleResults(this.container,"up");return false;},scrollDown:function(a){YAHOO.util.Event.preventDefault(a);if(YAHOO.util.Dom.hasClass(this.scrollDownBtn,"down-disabled")){return;}this.ac.rearrageVisibleResults(this.container,"down");return false;},initScrollButtuns:function(){var b="up";var d="down";var a=YAHOO.util.Dom.getStyle(this.ac.resultElements[0],"display");var c=YAHOO.util.Dom.getStyle(this.ac.resultElements[this.ac.resultsAvailable-1],"display");if(a!="none"||this.ac.resultsAvailable<=this.ac.maxResultsVisible){b="up-disabled";}if(c!="none"||this.ac.resultsAvailable<=this.ac.maxResultsVisible){d="down-disabled";}YAHOO.util.Dom.replaceClass(this.scrollUpBtn,"up",b);YAHOO.util.Dom.replaceClass(this.scrollUpBtn,"up-disabled",b);YAHOO.util.Dom.replaceClass(this.scrollDownBtn,"down",d);YAHOO.util.Dom.replaceClass(this.scrollDownBtn,"down-disabled",d);},arrowed:function(){this.ac.rearrageVisibleResults(this.container,"",true);},dataReturned:function(b,a){var c=a[2];this.ac.resultsAvailable=c.length;if(c.length==0){this.showMessage(this.messages.noresultMsg);}else{this.hideMessage();this.ac.resultElements=this.ac.getListItems();this.ac.rearrageVisibleResults(this.container);this.initScrollButtuns();}},onKeyUp:function(b){var a=YAHOO.util.Event.getCharCode(b);switch(a){case 27:this.collapseContainer(true);break;case 46:case 8:if(this.searchBox.value.length<3){this.showMessage(this.messages.noresultMsg);}break;case 40:break;}},turnOn:function(a){if(a){YAHOO.util.Event.preventDefault(a);if(this.isAcEnabled){return;}}this.isAcEnabled=this.setAcState("on");this.initStateButtons();this.hideMessage();this.ac.minQueryLength=this.minQueryLength;if(this.searchBox.value==""){this.showMessage(this.messages.initMsg);}else{this.makeManualRequest();}YAHOO.Shopping.util.trackAction({sec:"searchac",slk:"sac-on"});return false;},turnOff:function(a){if(a){YAHOO.util.Event.preventDefault(a);if(!this.isAcEnabled){return;}this.collapseContainer();}this.isAcEnabled=this.setAcState("off");this.initStateButtons();this.showMessage(this.messages.offMsg);this.ac.minQueryLength=-1;YAHOO.util.Event.on("ac-control-on-2","click",this.turnOn,this,true);YAHOO.Shopping.util.trackAction({sec:"searchac",slk:"sac-off"});return false;},makeManualRequest:function(){this.searchBox.focus();this.ac._initProps();this.ac.sendQuery(this.searchBox.value);},initStateButtons:function(){if(this.isAcEnabled){YAHOO.util.Dom.addClass(this.turnOnBtn,"disabled");YAHOO.util.Dom.removeClass(this.turnOffBtn,"disabled");}else{YAHOO.util.Dom.removeClass(this.turnOnBtn,"disabled");YAHOO.util.Dom.addClass(this.turnOffBtn,"disabled");}},getAcState:function(){var a=YAHOO.Shopping.util.getCookie(this.cookieName);if(a=="off"){return false;}return true;},setAcState:function(a){if(a=="off"){YAHOO.Shopping.util.setCookie(this.cookieName,a,14);return false;}else{YAHOO.Shopping.util.setCookie(this.cookieName,a,-1);return true;}},showMessage:function(a){this.messageEl.innerHTML=a;YAHOO.util.Dom.addClass(this.container,"ac-msg");},hideMessage:function(){YAHOO.util.Dom.removeClass(this.container,"ac-msg");}};YAHOO.Shopping.AC.init();YAHOO.namespace("YAHOO.Shopping.util");YAHOO.Shopping.util.targetPGUrl="";YAHOO.Shopping.util.initAfterOnload=function(){this.initCarousels();this.initExpandos();this.initImageCarousel();this.initDealsCarousels();this.initComparisonGrid();this.initHelpfulLinks();this.initUpsTrackClickListing();this.initUpsTrackClickProductPage();this.reportabuseMessageForUsersAfterLogin();};YAHOO.Shopping.util.initCarousels=function(){if(!YAHOO.Shopping.Carousel){return false;}var b=YAHOO.util.Dom.getElementsByClassName("shmod-hero-teaser");if(b.length>0){YAHOO.Shopping.util.heroCarousel=new YAHOO.Shopping.Carousel("shmodhero",{animate:"opacity",autoplay:true,varname:"YAHOO.Shopping.util.heroCarousel",buttonsClass:"teaser"});new YAHOO.Shopping.YLTTracking("shmodhero",{buttonsClass:"teaser"});}else{YAHOO.Shopping.util.heroCarousel=new YAHOO.Shopping.Carousel("shmodhero",{animate:"opacity",autoplay:true,varname:"YAHOO.Shopping.util.heroCarousel"});}new YAHOO.Shopping.Carousel("shmodcoupons",{animate:"scroll",autoplay:false});new YAHOO.Shopping.Carousel("shmodcapitalone",{animate:"scroll",autoplay:false});new YAHOO.Shopping.Carousel("shmodpopularproducts",{animate:false,autoplay:false});new YAHOO.Shopping.Carousel("shmodrecommendations",{animate:"scroll",autoplay:false});new YAHOO.Shopping.Carousel("shmodcategoryseo",{animate:"scroll",autoplay:false});new YAHOO.Shopping.Carousel("shmodproductvibes",{animate:"scroll",autoplay:false});new YAHOO.Shopping.Carousel("shmodproductcoupons",{animate:"scroll",autoplay:false});new YAHOO.Shopping.Carousel("shmodrelatedartist",{animate:false,autoplay:false});new YAHOO.Shopping.Carousel("shmodimgcarousel",{animate:"scroll",autoplay:false,scrollWidth:73,scrollSize:3});new YAHOO.Shopping.Carousel("shmodbuyingguides",{animate:"scroll",autoplay:false,scrollWidth:204,scrollSize:3});new YAHOO.Shopping.Carousel("shmodholidaydeals",{animate:"scroll",autoplay:false,scrollWidth:121,scrollSize:5});new YAHOO.Shopping.Carousel("shmodholidaygiftcards",{animate:false,autoplay:false});new YAHOO.Shopping.Carousel("shmodseo",{animate:false,autoplay:false});new YAHOO.Shopping.Carousel("shrecentsearches",{animate:false,autoplay:false});new YAHOO.Shopping.Carousel("shrecentpages",{animate:false,autoplay:false});new YAHOO.Shopping.Carousel("shrecentproducts",{animate:false,autoplay:false});if(YAHOO.Shopping.deals&&YAHOO.Shopping.deals.DailyDeals){var c=YAHOO.Shopping.deals.DailyDeals.deals;if(c){var a=c.length;for(i=0;i<a;i++){if(!c[i]){continue;}new YAHOO.Shopping.Carousel("shmoddealcarousel"+i,{animate:"scroll",autoplay:false,scrollWidth:274,scrollSize:2});}}}};YAHOO.Shopping.util.initExpandos=function(){var a=YAHOO.util.Dom.getElementsByClassName("exp-toggle");YAHOO.util.Event.on(a,"click",function(d){YAHOO.util.Event.preventDefault(d);var c=YAHOO.util.Event.getTarget(d);var b=0;while(b++<10&&!YAHOO.util.Dom.hasClass(c,"exp-expandable")){c=c.parentNode;}if(YAHOO.util.Dom.hasClass(c,"exp-expanded")){YAHOO.util.Dom.replaceClass(c,"exp-expanded","exp-collapsed");}else{if(YAHOO.util.Dom.hasClass(c,"exp-collapsed")){YAHOO.util.Dom.replaceClass(c,"exp-collapsed","exp-expanded");}}});};YAHOO.Shopping.util.initImageCarousel=function(){if(!YAHOO.Shopping.pdp){return false;}var a=YAHOO.util.Dom.getElementsByClassName("btn-img","A","shmodimgcarousel");YAHOO.util.Event.on(a,"click",function(j,g){YAHOO.util.Event.preventDefault(j);var h=YAHOO.util.Event.getTarget(j);if(h.tagName=="IMG"){h=h.parentNode;}var d=parseInt(h.getAttribute("for"));if(d===""||!YAHOO.Shopping.pdp.ImgCarousel.imgs[d]){return false;}var f=document.getElementById("shimgproductmain");var b=f.parentNode;var c=document.createElement("IMG");c.id="shimgproductmain";c.src=YAHOO.Shopping.pdp.ImgCarousel.imgs[d].src;c.style.width=YAHOO.Shopping.pdp.ImgCarousel.imgs[d].width+"px";c.style.height=YAHOO.Shopping.pdp.ImgCarousel.imgs[d].height+"px";c.style.marginTop=YAHOO.Shopping.pdp.ImgCarousel.imgs[d]["margin-top"]+"px";b.innerHTML="";b.appendChild(c);b.innerHTML+='<span class="sprite1 haslarge"></span>';b.href=YAHOO.Shopping.pdp.ImgCarousel.imgs[d].href;YAHOO.util.Dom.removeClass(g,"active");YAHOO.util.Dom.addClass(h,"active");h.blur();return false;},a);};YAHOO.Shopping.util.initDealsCarousels=function(){if(!YAHOO.Shopping.deals||!YAHOO.Shopping.deals.DailyDeals){return false;}var f=YAHOO.Shopping.deals.DailyDeals.deals;if(!f){return;}var c=f.length;var b=YAHOO.util.Dom.getElementsByClassName;for(i=0;i<c;i++){if(!f[i]){continue;}var e=b("btn-prev","DIV","shmoddealcarousel"+i)[0].getElementsByTagName("A")[0];YAHOO.util.Event.on(e,"click",function(h,g){YAHOO.Shopping.util.trackAction({sec:"deals",slk:"dealsscroll"+g});},i);var a=b("btn-next","DIV","shmoddealcarousel"+i)[0].getElementsByTagName("A")[0];YAHOO.util.Event.on(a,"click",function(h,g){YAHOO.Shopping.util.trackAction({sec:"deals",slk:"dealsscroll"+g});},i);var d=b("carousel-trigger","A","shmoddealcarousel"+i);YAHOO.util.Event.on(d,"click",function(A,u){YAHOO.util.Event.preventDefault(A);var D=YAHOO.util.Event.getTarget(A);while(D.tagName!="A"){D=D.parentNode;}var w=D.getAttribute("for").split(":");var s=w[0];var t=w[1];var q=f[s][t];if(!q){return false;}YAHOO.Shopping.util.trackAction({sec:"deals",slk:"dealscarousel"+s});var E=b("product-display","DIV","shmoddailydeals"+s)[0];var g=b("img","DIV",E)[0];var n=g.getElementsByTagName("A")[0];var x=g.getElementsByTagName("IMG")[0];var y=E.getElementsByTagName("H3")[0].getElementsByTagName("A")[0];var C=b("price","STRONG",E)[0].getElementsByTagName("A")[0];var m=b("shipping","EM",E)[0];var k=b("short-desc","SPAN",E)[0];var z=b("full-desc","SPAN",E)[0];var p=b("exp-show","A",E)[0];var o=b("exp-hide","A",E)[0];var v=b("status","EM",E)[0];var B=b("next-deal","EM",E)[0];var r=b("logo","DIV",E)[0].getElementsByTagName("IMG")[0];var h=YAHOO.Shopping.util.trackLink;n.href=h(q.PurchaseURL,{sec:"deals",slk:"dealimage"+s,prtnr_id:q.__feed});x.src=q.LargeImg["src"];x.width=q.LargeImg["width"];x.height=q.LargeImg["height"];x.alt=q.LargeImg["alt"];x.style.cssText=q.LargeImg["style"];x.style.visibility="visible";y.href=h(q.PurchaseURL,{sec:"deals",slk:"dealtitle"+s,prtnr_id:q.__feed});y.innerHTML=q.Title;C.href=h(q.PurchaseURL,{sec:"deals",slk:"dealprice"+s,prtnr_id:q.__feed});C.innerHTML=q.Price;m.innerHTML=(q.Shipping)?q.Shipping:"";YAHOO.util.Dom.replaceClass(E,"exp-expanded","exp-collapsed");k.innerHTML=(q.ShortDescription)?q.ShortDescription:"";z.innerHTML=(q.FullDescription)?q.FullDescription:"";p.href=q.PurchaseURL;o.href=q.PurchaseURL;if(typeof(q.ShortDescription)!="undefined"&&typeof(q.FullDescription)!="undefined"&&q.ShortDescription.length<q.FullDescription.length){p.innerHTML="Read more";}else{p.innerHTML="";}v.innerHTML=q.Status;B.innerHTML=q.NextDeal;var j=q.__feed.replace(/\d+/,"");var l=YAHOO.Shopping.deals.DailyDeals.providerLogos[j];r.src=l.src;r.width=l.width;r.height=l.height;r.alt=l.alt;YAHOO.util.Dom.removeClass(u,"active");YAHOO.util.Dom.addClass(D,"active");D.blur();return false;},d);}};YAHOO.Shopping.util.initComparisonGrid=function(){if(!YAHOO.Shopping.pdp){return false;}var b=YAHOO.util.Dom.getElementsByClassName("check-condition","INPUT","shcgcondition");YAHOO.util.Event.on(b,"click",function(h,j){var f=j[0];var d=j[1];var g=document.getElementById("shcgoffergrid");var c="offer-grid ";if(!g){return false;}if(f.checked&&!d.checked){c+="shownew";}else{if(d.checked&&!f.checked){c+="showused";}else{c+="showall";}}g.className=c;},b);var a=document.forms.refine_zip;YAHOO.util.Event.on(a,"submit",function(f,c){var d=YAHOO.util.Dom.getElementsByClassName("zip-input-box","INPUT",c)[0];if(d.value==""||d.value.length<5){d.focus();YAHOO.util.Event.preventDefault(f);return false;}return true;});};YAHOO.Shopping.util.reportabuseMessageForUsersAfterLogin=function(){if((YAHOO.util.Dom.get("shmoduserreviews")||YAHOO.util.Dom.get("shmodmerchantreviews"))&&YAHOO.Shopping.pdp.ReviewReportAbuse.raComponentToShow){YAHOO.Shopping.pdp.ReviewReportAbuse.factory.getInstance(YAHOO.Shopping.pdp.ReviewReportAbuse.raComponentToShow);}};YAHOO.Shopping.util.initHelpfulLinks=function(){var d=["shmoduserreviews","shmodmerchantreviews"];for(var c=0;c<d.length;c++){var a=d[c];var b=YAHOO.util.Dom.getElementsByClassName("helpful","A",a);YAHOO.util.Event.on(b,"click",function(h){YAHOO.util.Event.preventDefault(h);var g=YAHOO.util.Event.getTarget(h);if(g.tagName!="A"){g=g.parentNode;}var f=g.parentNode;var j=YAHOO.util.Dom.getElementsByClassName("recommend","INPUT",f)[0];if(YAHOO.util.Dom.hasClass(g,"no")){j.value="no";}var k={success:YAHOO.Shopping.util.helpfulCallback,failure:YAHOO.Shopping.util.helpfulCallback,timeout:5000,scope:YAHOO.Shopping.util};YAHOO.util.Connect.setForm(f);YAHOO.util.Connect.asyncRequest("POST","/maple/repository/components/xhr.html",k);return false;},this,true);}};YAHOO.Shopping.util.helpfulCallback=function(c){if(c.status!=200){alert("Error communicating with server. Please try later.");return;}var a=YAHOO.lang.JSON.parse(c.responseText);var b=document.getElementById(a.el,"DIV");b.innerHTML=a.msg;};YAHOO.Shopping.util.upsAjaxPost=function(g){YAHOO.util.Event.preventDefault(g);var f=YAHOO.util.Event.getTarget(g);var d=0;while(f.tagName!="A"&&f.tagName!="BODY"&&d<3){f=f.parentNode;d++;}if(f.tagName!="A"){return;}if(!f.href){return;}var c="";if(YAHOO.env.ua.ie>0){YAHOO.Shopping.util.targetPGUrl=f.getAttribute("href",2);c=f.getAttribute("upstrackindex",2);}else{YAHOO.Shopping.util.targetPGUrl=f.href;c=f.getAttribute("upstrackindex");}c=window.arrProductOffersListing[c];var b=window.offerXhrUrlListing+"?"+c;var h={success:{},failure:{},timeout:1000,scope:YAHOO.Shopping.util};YAHOO.util.Connect.asyncRequest("GET",b,h);if(f.target){var a=window.open(f.href,"_blank");if(a){if(a.focus){a.focus();}return false;}a=null;return true;}};YAHOO.Shopping.util.initUpsTrackClickListing=function(f){if(window.offerXhrUrlListing&&window.offerXhrUrlListing!=""&&window.arrProductOffersListing&&window.arrProductOffersListing.length>0){var a=document.getElementsByTagName("A");for(var d=0;d<a.length;d++){var b=a[d].getAttribute("upstrackindex");var c=a[d].href;if(c&&c!=null&&c!=""&&b&&b!=null&&b!=""){c=c.search("yahooshopping.pgpartner.com");b=window.arrProductOffersListing[b];if(c!=null&&c>-1&&b!=null&&b!=""){a[d].onclick=YAHOO.Shopping.util.upsAjaxPost;}}}}};YAHOO.Shopping.util.initUpsTrackClickProductPage=function(d){if(window.offerXhrUrl&&window.offerXhrUrl!=""&&window.arrProductOffers&&window.arrProductOffers.length>0){var a=document.getElementsByTagName("A");for(var c=0;c<a.length;c++){var b="";b=a[c].href;if(b&&b!=null&&b!=""){b=b.search("yahooshopping.pgpartner.com");if(b!=null&&b>-1){YAHOO.util.Event.on(a[c],"click",function(j){YAHOO.util.Event.preventDefault(j);var h=YAHOO.util.Event.getTarget(j);var g=0;while(h.tagName!="A"&&h.tagName!="BODY"&&g<3){h=h.parentNode;g++;}if(h.tagName!="A"){return;}if(!h.href){return;}if(YAHOO.env.ua.ie>0){YAHOO.Shopping.util.targetPGUrl=h.getAttribute("href",2);}else{YAHOO.Shopping.util.targetPGUrl=h.href;}var f=window.offerXhrUrl+"?"+window.arrProductOffers[0];var k={success:YAHOO.Shopping.util.upsTrackClickCallback,failure:YAHOO.Shopping.util.upsTrackClickCallback,timeout:2000,scope:YAHOO.Shopping.util};YAHOO.util.Connect.asyncRequest("GET",f,k);},this,true);}}}}};YAHOO.Shopping.util.upsTrackClickCallback=function(a){if(window.shpBuckTest201104065){window.open(YAHOO.Shopping.util.targetPGUrl,"shp201104065");}else{window.location=YAHOO.Shopping.util.targetPGUrl;}};YAHOO.Shopping.util.initAfterOnload();YUI().use("overlay",function(g){var f=g.one(".shmod-relatedproduct .mod-content .bd");if(f!=null){xy=f.getXY();oNodeWidth=f.getComputedStyle("width");oNodeHeight=f.getComputedStyle("height");}var h=g.one(".rlpone");if(h!=null){var e=h.all(".yui3-overlay-loading");var d,c;var a=0;var b=e.size();e.each(function(i){d=i.get("id");c=new g.Overlay({srcNode:"#"+d,width:oNodeWidth,height:oNodeHeight,visible:false,xy:[xy[0],xy[1]]});c.render();g.on("click",g.bind(c.show,c),"#rlpshow"+a);g.on("click",g.bind(c.hide,c),"#rlphide"+a++);if(b==1){c.set("visible",true);i.one(".close-button").remove(true);}});}});YAHOO.namespace("YAHOO.Shopping.util");YAHOO.Shopping.util.execute=function(){if(window.location.hash.length===0){this.searchBarFocus();}};YAHOO.Shopping.util.searchBarFocus=function(){YAHOO.util.Event.onAvailable("srch-box-top",function(){document.getElementById("srch-box-top").focus();});};YAHOO.Shopping.util.execute();if(!window.ucs){window.ucs={};window.ucs._sendBeacon=function(c,b){var a=new Image();a.height=0;a.width=0;a.src="https://geo.yahoo.com/t"+c;document.body.appendChild(a);};window.ucs.YObj=(function(){var a=document.getElementById("yucs");return(typeof window.Y!=="undefined"&&(a&&a.getAttribute("data-property")==="srp"))?window.Y:YUI();})();}YUI.add("gallery-jsonp",function(b){var a=b.Lang.isObject,c=b.Lang.isFunction;function d(){this._init.apply(this,arguments);}d._pattern=/\bcallback=(.*?)(?=&|$)/i;d._template="callback={callback}";d.prototype={_init:function(f,e){this.url=f;e=e||{};if(c(e)){e={on:{success:e}};}e.on=e.on||{};if(!e.on.success){e.on.success=this._getCallbackFromUrl(f);}this._config=b.merge({on:{},context:this,args:[],format:this._format},e);},_getCallbackFromUrl:function(i){var j=i.match(d._pattern),e,g,f,h;if(j){g=b.config.win;f=j[1].split(/\./).reverse();e=f.shift();for(h=f.length-1;h>=0;--h){g=g[f[h]];if(!a(g)){return null;}}if(a(g)&&c(g[e])){return b.bind(g[e],g);}}return null;},send:function(e){if(!this._config.on.success){return this;}var g=b.guid().replace(/-/g,"_"),h=this._config,i=h.format.call(this,this.url,"YUI.Env.JSONP."+g);function f(j){return(c(j))?function(k){delete YUI.Env.JSONP[g];j.apply(h.context,[k].concat(h.args));}:null;}YUI.Env.JSONP[g]=f(h.on.success);b.Get.script(i,{onFailure:f(h.on.failure),onTimeout:f(h.on.timeout||h.on.failure),timeout:h.timeout});return this;},_format:function(h,f){var e=d._template.replace(/\{callback\}/,f),g;if(d._pattern.test(h)){return h.replace(d._pattern,e);}else{g=h.slice(-1);if(g!=="&"&&g!=="?"){h+=(h.indexOf("?")>-1)?"&":"?";}return h+e;}}};b.JSONPRequest=d;b.jsonp=function(f,e){return new b.JSONPRequest(f,e).send();};if(!YUI.Env.JSONP){YUI.Env.JSONP={};}},"gallery-2010.08.11-20-39",{requires:["get","oop"]});YUI.add("ucs-menu-utils",function(c){c.namespace("ucs");if(c.ucs.MenuUtils){return;}var m="{separatorTop}"+'<li class="{isDisabled} {isActive} {menuClass}">'+'<a target="{target}" {actionData} href="{url}" {disabledAria}>'+"{icon}"+"{menuText}"+"</a></li>"+"{separatorBottom}",r="{separatorTop}"+'<li class="{isDisabled} {isActive} {menuClass}">'+'<a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria}>'+"{icon}"+"{menuText}"+"</a></li>"+"{separatorBottom}",l='<span class="separator" role="presentation"></span>',g="click",p="a",h="role",a="tabIndex",f="yucs-hide",b="iframe",j="ul",d="li",o="parentNode",q="http://l.yimg.com/a/lib/ush/icon.gif",e="https://s.yimg.com/lq/lib/ush/icon.gif",k=300,i,n;c.ucs.MenuUtils=function(t,s){var u=s&&s.panelSelector||j;this.menu=t;this.panel=this.menu.one(u);if(this.panel){this.init();}this.openDelay=(s&&typeof s.openDelay!="undefined")?(s.openDelay):(k);this.closeTimer=null;this.overPanel=false;this.overLink=false;};c.ucs.MenuUtils.prototype={init:function(){this.keyedup=false;this.menu.on("hover",c.bind(this._handleMenuEnter,this),c.bind(this._handleMouseOut,this),this);this.panel.on("hover",c.bind(this._handlePanelEnter,this),c.bind(this._handlePanelLeave,this),this);this.menu.delegate(g,this._handleMenuItemClick,"li a",this);this.menu.on("keyup",this._handleKeyup,this);this.menu.on("keydown",this._handleKeydown,this);this.menu.removeClass("yucs-activate");this._initAria();},_initAria:function(){this.menu.one(p).set(h,"button");this.panel.all(p).set(h,"menuitemradio");this.panel.set(h,"menu");this.panel.all("div,ul,li").set(h,"presentation");if(!c.UA.ipad&&!c.UA.mobile){this.panel.set(a,-1);}this.focusmanager=this.panel.plug(c.Plugin.NodeFocusManager,{descendants:p,keys:{next:"down:40",previous:"down:38"},focusClass:{className:"yucs-has-focus",fn:function(s){return s.get(o);}},circular:true});},_refreshAria:function(){this.focusmanager.focusManager.refresh();},_destructAria:function(){this.panel.unplug(c.Plugin.NodeFocusManager);this.panel.one(p).set(a,0);},_handleMenuClick:function(s){if(this.overLink&&this.panel.hasClass(f)){this._accessShowMenu(s);if(this.closeTimer){this.closeTimer.cancel();this.closeTimer=null;}}},_handleMenuEnter:function(s){s.halt();this.overLink=true;c.later(this.openDelay,this,this._handleMenuClick);},_handlePanelEnter:function(s){if(this.closeTimer){this.closeTimer.cancel();this.closeTimer=null;}this.overPanel=true;},_handlePanelLeave:function(s){this.overPanel=false;if(this.panelShown){this._handleMouseOut();}},_handleKeyup:function(s){if(27===s.keyCode){this.menu.one(p).focus();this._hideMenu();}else{if(40===s.keyCode&&!this.keyedup){this.panel.one(p).focus();this.keyedup=true;}}},_handleKeydown:function(s){if(!this.panel.hasClass(f)){s.stopPropagation();}if(40===s.keyCode){s.preventDefault();}},_handleDocumentClick:function(s){if(this.panel.contains(s.target)||s.target._node===this.panel._node||this.panel.hasClass(f)||s.target===this.menu.one(">a")||s.target.get("parentNode")===this.menu.one(">a")){this.skipBlur=true;return;}this._hideMenu();},_accessShowMenu:function(t){var s=this;this._hideAllMenus();this._showMenu(t);this.panel.focus();c.Node.DOM_EVENTS.touchend=true;this.documentBlurHandle=c.on("blur",function(v){var u=this;if(!this.skipBlur){this.timeout=setTimeout(function(){u._hideMenu();},50);}this.skipBlur=false;},this.panel,this);this.documentFocusHandle=c.on("focus",function(u){if(this.timeout&&this.panel.hasChildNodes(u.target)){clearTimeout(this.timeout);this.timeout=null;}},this.panel,this);},_showMenu:function(t){this.panel.removeClass(f);this._addIframeShim();var s=this.menu.one(b);if(s){s.removeClass(f);}},_position:function(){var s=this.menu.get("region");if(!this.panel.hasClass("yucs-menu-right")&&!this.panel.hasClass("yucs-menu-left")){this.panel.setStyle("left",s[0]);}this.panel.setStyle("top",s[1]+13);},_handleMouseOut:function(s){this.overLink=false;if(this.closeTimer){this.closeTimer.cancel();this.closeTimer=null;}if(!this.panel.hasClass(f)){this.closeTimer=c.later(500,this,this._handleLeave);}},_handleLeave:function(s){if(!this.overPanel&&!this.overLink){this._hideMenu();}},_hideMenu:function(){this.panel.addClass(f);this.overPanel=false;var s=this.menu.one(b);if(s){s.addClass(f);}if(this.documentBlurHandle){this.documentBlurHandle.detach();}if(this.documentFocusHandle){this.documentFocusHandle.detach();}if(this.documentClickHandle){this.documentClickHandle.detach();}if(this.documentMouseDownHandle){this.documentMouseDownHandle.detach();}if(this.documentTouchEndHandle){this.documentTouchEndHandle.detach();}this.keyedup=false;},_hideAllMenus:function(){var t=c.all("yucs-menu iframe"),s=c.one("#yucs-top-menu");this._hideMenu();if(s&&s.one("ul")){s.one("ul").addClass(f);c.one("#yucs-more").removeClass("yucs-menu-active");}t.addClass(f);},_addIframeShim:function(){var s=c.all("select"),u=(c.UA.ie<=6),t;if(!u||(s.size()===0)){return;}t=this.menu.one(b);if(!t){t=document.createElement(b);t=this.panel.get(o).insertBefore(t,this.panel);}t.className="yucs-shim";t.setStyle("position","absolute");t.setStyle("width",this.panel.getComputedStyle("width"));t.setStyle("height",this.panel.getComputedStyle("height"));t.setStyle("top",this.panel.getY()+"px");t.setStyle("border","0px none");if(!this.menu.hasClass("yucs-help")){t.setStyle("left",0);}t.frameBorder=0;},_addMenuGroups:function(v,A,z){var x=this.menu.one(j),s="",t=(x.get("children")._nodes.length)?true:false;for(var u=0,w=v.length;u<w;u++){var y=v[u].length;if(A==="bottom"){v[u][0].separatorTop=true;}else{if(u<(w-1)||t){v[u][y-1].separatorBottom=true;}}s+=this._addMenuGroup(v[u],z);}if(A==="bottom"){x.append(s);}else{x.prepend(s);}},_addMenuGroup:function(t,v){var w="";for(var u=0,s=t.length;u<s;u++){if(v){t[u].isDebugItem=true;t[u].menuClass="debug-item";}else{t[u].isDebugItem=false;t[u].menuClass="minty-item";}w+=this._addMenuItem(t[u]);}return w;},_addMenuItem:function(t){var s="";if(t.isActive){t.checkedAria='aria-checked="true"';}else{t.checkedAria="";
}if(t.isDisabled){t.disabledAria='aria-disabled="true"';}else{t.disabledAria="";}switch(t.actionType){case"link":s=c.substitute(m,t,this._processTemplateValue);break;case"customEvent":s=c.substitute(r,t,this._processTemplateValue);break;default:break;}if(s){if(t.isDebugItem){s=s.replace(/separator/,"separator debug-item");}else{s=s.replace(/separator/,"separator minty-item");}}return s;},_clearMenuItem:function(s){this.menu.one(j).all("."+s).each(function(t){t.remove(true);});},_processTemplateValue:function(t,u,v){c.log("key = "+t+" value = "+u+" meta_data = "+v);var w="";var s=(document.location.protocol==="https:")?e:q;switch(t){case"icon":if(u!==undefined){if(u==="available"){w='<img src="'+s+'" class="yucs-opi available"/>';}else{if(u==="offline"){w='<img src="'+s+'" class="yucs-opi offline"/>';}else{if(u==="invisible"){w='<img src="'+s+'" class="yucs-opi invisible"/>';}else{if(u==="busy"){w='<img src="'+s+'" class="yucs-opi busy"/>';}else{if(u==="idle"){w='<img src="'+s+'" class="yucs-opi idle"/>';}else{w='<img src="'+u+'" />';}}}}}}break;case"separatorTop":if(u){w=l;}break;case"separatorBottom":if(u){w=l;}break;case"actionData":if(u){w='data-mad="'+u+'"';}break;case"isDisabled":if(u){w="disabled";}break;case"isActive":if(u){w="sp active";}break;case"checkedAria":w=u;break;default:w=u;break;}return w;},_resetItemStatus:function(v){var u=v.ancestor(j).all(d),t=v.ancestor(j).all("li.disabled"),s;u.removeClass("sp active");t.removeClass("disabled");if(v.getAttribute("data-dis")){s=v.ancestor(d);s.addClass("disabled");}if(v.getAttribute("data-hs")){s=v.ancestor(d);s.addClass("sp active");}},_handleMenuItemClick:function(u){var s=u.target;}};},"1.0",{requires:["node","event","event-hover","event-custom","substitute","node-focusmanager"]});(function(){var a=document.getElementById("yucs");if(!a){return;}ucs.YObj.use("node","ucs-menu-utils",function(c){var b=c.one("#yucs").all("li.yucs-menu.yucs-activate");b.each(function(e){var d=new c.ucs.MenuUtils(e);});});})();(function(){var i="%Y",g="%y",e="%m",h="%d",k=["en-ae","en-au","en-ca","en-ie","en-in","en-my","en-nz","en-ph","en-sg","en-us","es-us","ja-jp","sv-se"],f=["zh-hant-cn","zh-hant-tw"],j=document.getElementById("yucs").getAttribute("data-lang").toLowerCase(),a=j.split("-")[0],b,d,c;switch(a){case"tr":b=[{"locale":null,"separator":[" "]}];break;default:b=[{"separator":["-"],"locale":["es-cl","nl-nl","ta-in","zh-hant-cn"]},{"separator":["."],"locale":["de-at","de-ch","de-de","fi-fi","nb-no","pl-pl","ro-ro","ru-ru"]},{"separator":["/"],"locale":null}];}(function(){var n;if(!Array.prototype.indexOf){Array.prototype.indexOf=function(q,r){for(var p=(r||0),o=this.length;p<o;p++){if(this[p]===q){return p;}}return -1;};}for(var m=0,l=b.length;m<l;m++){n=b[m]["locale"];if(!n){d=b[m]["separator"];}else{if(n.indexOf(j)>=0){d=b[m]["separator"];break;}}}if(!d){d=["/"];}})();(function(){var l=d[0];if(f.indexOf(j)>=0){c=[i,l,e,l,h].join("");}else{if(k.indexOf(j)>=0){c=[e,l,h,l,g].join("");}else{c=[h,l,e,l,i].join("");}}})();window.ucs["localeDateFormat"]=c;})();ucs.YObj.use("datatype-date",function(a){});YUI.add("ucs-timestamp-library",function(a){a.namespace("ucs.Timestamp");a.ucs.Timestamp={getTimeStamp:function(e){var n,r,u,s,w,o,g="AM",j,b=a.one("#yucs"),l=e.dateRef||new Date(),m=e.date,q=e.locale?e.locale:b.getAttribute("data-lang"),i=m.getTime(),v=m.getDate(),k=l.getDate(),x=l.getTime(),h=x-i,p=k-v,f=true,c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];f=/^en-us$/i.test(q);h=parseInt(h/1000,10);r=m.getMonth();w=m.getHours();o=m.getMinutes();j=x-((l.getHours()*60*60*1000)+(l.getMinutes()*60*1000)+(l.getSeconds()*1000)+l.getMilliseconds());if(o<10){o="0"+o;}if(w>=12){g="PM";}if(w>12){w-=12;}if(e.type&&e.type==="short"&&a.DataType&&a.DataType.Date){if(p===0){n=w+":"+o+" "+g;}else{if(/^th-th$/i.test(q)){m.setFullYear(m.getFullYear()+543);}n=a.DataType.Date.format(m,{format:window.ucs.localeDateFormat}).replace(/\b0(?=\d)/g,"");}}else{if(!f){n=c[r]+" "+v+"&nbsp;&nbsp;"+w+":"+o+" "+g;}else{if(p===0){if(h<60){if(h>1){n=h+" secs ago";}else{n=h+" sec ago";}}else{if(h<3600){h=Math.ceil(h/60,10);if(h<2){n=h+" min ago";}else{n=h+" mins ago";}}else{if(h<86400){h=Math.ceil(h/3600);if(h>1){n=h+" hours ago";}else{n=h+" hour ago";}}}}}else{if(((j-i)<86400000)&&p!==0){n="Yesterday "+w+":"+o+" "+g;}else{n=c[r]+" "+v+"&nbsp;&nbsp;"+w+":"+o+" "+g;}}}}return n;}};},"1.0",{requires:["node","datatype-date"]});YUI.add("ucs-logodebug",function(d){d.namespace("ucs");var a=document.getElementById("imageCheck"),c=document.getElementById("yucs-logo-ani"),b=false;if(navigator.userAgent.toLowerCase().indexOf("msie")!=-1){b=true;}if((a&&a.offsetWidth===0)||(a&&a.offsetWidth===0)||(b&&a&&a.readyState=="uninitialized")||(b&&a&&a.readyState==undefined)){c.style.visibility="visible";c.style.position="relative";}d.ucs.LogoDebug=function(e){e.on("click",this._handleClick,this);this.publish("ucs:logoDebug",{broadcast:2,emitFacade:true});};d.ucs.LogoDebug.prototype={_handleClick:function(f){if(f.altKey){f.halt();this.fire("ucs:logoDebug");}}};d.Global.on("ucs:themeChange",function(f){d.later(11,this,function(g){if(d.one("#animator")){d.one("#animator").setStyle("display","none");}if(d.one("#yucs-logo-ani")){d.one("#yucs-logo-ani").setStyle("clip","auto");d.one("#yucs-logo-ani").setStyle("visibility","visible");if(d.one(".lt #yucs-logo-ani")){d.one(".lt #yucs-logo-ani").setStyle("backgroundPosition","-350px 0 !important");}else{d.one("#yucs-logo-ani").setStyle("backgroundPosition","0% 0%");}}});});d.Global.on("ucs:playLogo",function(f){if(typeof Aniden!="undefined"&&Aniden.play){Aniden.play();}});d.augment(d.ucs.LogoDebug,d.EventTarget);},"1.0",{requires:["node"]});(function(){ucs.YObj.use("node","ucs-logodebug",function(c){var b=c.one("#yucs-logo");if(b){var a=new c.ucs.LogoDebug(b);}});})();if(window.ucs&&window.ucs.YObj){(function(a){a.YObj.add("ucs-meta",function(g){g.namespace("ucs");if(g.ucs.Meta){g.log("Y.ucs.Meta is already defined.","debug","ucs-meta");return;}var c=null,f=null,d=null,e={},b=function(h){if(g.version>="3.5.1"){return h.getData();}else{return{authstate:h.getAttribute("data-authState"),cobrand:h.getAttribute("data-cobrand"),crumb:h.getAttribute("data-crumb"),device:h.getAttribute("data-device"),firstname:h.getAttribute("data-firstname"),flight:h.getAttribute("data-flight"),guid:h.getAttribute("data-guid"),host:h.getAttribute("data-host"),https:h.getAttribute("data-https"),languagetag:h.getAttribute("data-languagetag"),property:h.getAttribute("data-property"),protocol:h.getAttribute("data-protocol"),shortfirstname:h.getAttribute("data-shortfirstname"),shortuserid:h.getAttribute("data-shortuserid"),status:h.getAttribute("data-status"),spaceid:h.getAttribute("data-spaceid"),userid:h.getAttribute("data-userid")};}};g.ucs.Meta=function(h){c=this;c.components={meta:h};c.data=b(h);};g.ucs.Meta.prototype={authState:function(){return g.Object.getValue(c.data,"authstate");},cobrand:function(){return g.Object.getValue(c.data,"cobrand");},crumb:function(){return g.Object.getValue(c.data,"crumb");},device:function(){return g.Object.getValue(c.data,"device");},firstname:function(){return g.Object.getValue(c.data,"firstname");},flight:function(){return g.Object.getValue(c.data,"flight");},guid:function(){return g.Object.getValue(c.data,"guid");},host:function(){return g.Object.getValue(c.data,"host");},https:function(){return g.Object.getValue(c.data,"https");},languagetag:function(){return g.Object.getValue(c.data,"languagetag");},property:function(){return g.Object.getValue(c.data,"property");},protocol:function(){return g.Object.getValue(c.data,"protocol");},shortfirstname:function(){return g.Object.getValue(c.data,"shortfirstname");},shortuserid:function(){return g.Object.getValue(c.data,"shortuserid");},status:function(){return g.Object.getValue(c.data,"status");},spaceid:function(){return g.Object.getValue(c.data,"spaceid");},userid:function(){return g.Object.getValue(c.data,"userid");},toJSON:function(){return{authState:c.authState(),cobrand:c.cobrand(),crumb:c.crumb(),device:c.device(),firstname:c.firstname(),flight:c.flight(),guid:c.guid(),host:c.host(),https:c.https(),languagetag:c.languagetag(),property:c.property(),protocol:c.protocol(),shortfirstname:c.shortfirstname(),shortuserid:c.shortuserid(),status:c.status(),spaceid:c.spaceid(),userid:c.userid()};}};},"0.0.1",{requires:["node"]});a.YObj.use("ucs-meta",function(b){if(!b.Lang.isObject(a.Meta)||!(a.Meta instanceof b.ucs.Meta)){a.Meta=new b.ucs.Meta(b.one("#yucs-meta"));}});}(window.ucs));}/*jslint indent: 4, nomen:true, white:true */
/*global YUI */

YUI.add('ucs-beacon', function (Y) {

    'use strict';

    var instance = null,
        emitBeacon = function (data) {
            var beacon = null,
                params = {},
                queryString = '',
                sep = '',
                i = null;

            beacon = getBeacon();
            if (beacon !== null) {
                // send beacon using YMedia.Af.Beacon

                switch (data.type) {
                    case 'info':
                        beacon.info(data.source, {
                            code: data.code,
                            message: Y.JSON.stringify(data)
                        });
                        break;
                    case 'error':
                        beacon.error(data.source, {
                            code: data.code,
                            message: Y.JSON.stringify(data)
                        });
                        break;
                }
            } else {
                // send beacon to geo.yahoo.com

                // prepare query params
                params.s = 1197747123; // space id
                params.r = encodeURIComponent(location.href); // referrer url
                params.t = Math.random(); // random # to avoid cache
                params.dmsgs = encodeURIComponent(Y.JSON.stringify(data.dmsgs)); // data
                params.sec = encodeURIComponent(data.sec); // ult param: sec
                params.slk = encodeURIComponent(data.slk); // ult param: slk
                params.type = data.type;

                // formulate query string
                for (i in params) {
                    queryString += sep + i + '=' + params[i];
                    sep = '&';
                }

                // emit the beacon
                beacon = new Image(0, 0);
                beacon.src = 'https://geo.yahoo.com/p?' + queryString;
            }
        },
        getBeacon = function () {
            var beacon = null;
            if (typeof YMedia !== 'undefined' && Y.Lang.isObject(YMedia) && Y.Lang.isObject(YMedia.Af) && Y.Lang.isObject(YMedia.Af.Beacon)) {
                beacon = YMedia.Af.Beacon;
                if (Y.Lang.isFunction(beacon.setSampleSize)) {
                    //beacon.setSampleSize(1);
                } else {
                }
            }
            return beacon;
        };


    /**
     * Util for beaconing data back to server.
     * @class ucs.Beacon
     */
    Y.namespace('ucs').Beacon = {

        error: function(data) {
            emitBeacon(data);
        },

        info: function(data) {
            emitBeacon(data);
        },

        perf: function(data) {
            emitBeacon(data);
        }

    };

}, '1.0', {
    requires: [
        'json'
    ]
});/*
 * Copyright (c) 2013 Yahoo! Inc. All rights reserved.
 */

/**
 * The Comet Module provides JS client functions following Bayeux protocol,
 * Including handshake, subscribe, unsubscribe, disconnect and some other user validation functions.
 *
 * @module comet
 * @author onepush-devel@yahoo-inc.com
 * @version 1.3
 *
 * Example:
 *   var comet_url = 'http://comet.yahoo.com:4080/comet';
 *   var comet = Y.initComet(comet_url, function(param) {
 *        comet.subscribe('/mail/counter/*',function(message){
 *             //message from comet server: {count: "1", user: "5BEXUKYCJ23YSBOKJIYJ45GYSU"}
 *        });
 *   });
 *
 *   comet.unsubscribe('/mail/count/comet');
 *   comet.disconnect();
 *
 *   comet.addListener('/meta/handshake',function(){
 *       alert('callback called');
 *   });
 *
 */

/**
 * Register cometd-yui3 module
 */
YUI.add("comet", function (Y) {
    Y.namespace('Comet');
    function Comet(cfg) {
        Comet.superclass.constructor.apply(this, arguments);
    }

    var comet_instance = {};
    var EVT_COMETREADY = 'comet:ready';

    Y.initComet = function (url, handshake_callback) {
        //'http://comet.yahoo.com/comet' and 'https://comet.yahoo.com/comet/' point to same comet server
        var normal_url = url.replace(/https:/, "http:");
        //trim last /
        if (normal_url.substr(-1) === "/") {
            normal_url = normal_url.substring(0, normal_url.length - 1);
        }

        if (!comet_instance[normal_url]) {
            Y.publish(EVT_COMETREADY);
            comet_instance[normal_url] = new Comet();
            comet_instance[normal_url].clearListeners();
        } else {
        }

        if (handshake_callback) {
            comet_instance[normal_url].addListener('/meta/handshake', handshake_callback);
        }
        comet_instance[normal_url].initBayeux(url, function (message) {
            if (message.successful) {
                Y.fire(EVT_COMETREADY, {message: message});
            }
        });

        return comet_instance[normal_url];
    }

    Comet.NAME = "Comet";
    Comet.ATTRS = {
        /**
        * @attribute uri
        * @description the server uri of Cometd server.
        */
        uri: {
            value: null,
            setter: function (val) {
                if (val === null) {
                    return;
                }

                // use the same protocol as the hosting page
                var current_protocol = window.location.protocol;
                if (current_protocol.indexOf("https") !== -1) {
                    val = val.replace(/http:/, "https:");
                } else if (current_protocol.indexOf("http") !== -1) {
                    val = val.replace(/https:/, "http:");
                }

                // set protocol
                var url = val.toLowerCase();
                if (url.indexOf("https://") !== -1) {
                    this.set("protocol", "https://");
                } else if (url.indexOf("http://") !== -1) {
                    this.set("protocol", "http://");
                }
                return val;
            }
        },

        /**
         ** @attribute protocol
         ** @description the protocol of server uri
         **/
        protocol: {
            value: "https://"
        },

        /**
         * @attribute meta
         * @description meta message properties defined in the Bayeux Protocol.
         */
        meta: {
            value: {
                handshake: {channel: '/meta/handshake', version: '1.0', supportedConnectionTypes: ['long-polling']},
                connect: {channel: '/meta/connect', connectionType: 'long-polling'},
                subscribe: {channel: '/meta/subscribe'},
                unsubscribe: {channel: '/meta/unsubscribe'},
                publish: {},
                disconnect: {channel: '/meta/disconnect'}
            }
        },

        /**
         * @attribute ioCfg
         * @description base io configuration.
         */
        ioCfg: {
            value: {
                method: "POST",
                headers: { 'Content-Type': 'application/json', 'Accept': '*/*'}
            }
        },

        /**
         * @attribute ext
         * @description static ext data to be included in every message.
         */
        ext: {
            value: {
                all: {},
                handshake: {},
                subscribe: {'Comet-api-version': '1.1', 'Comet-subscriber-auth-info': null },
                unsubscribe: {'Comet-api-version': '1.1', 'Comet-subscriber-auth-info': null },
                connect: {},
                publish: {'Comet-api-version': '1.1', 'Comet-registration-id': 'make-up', 'Comet-opaque-id': 'markup', 'Comet-acknowledge-URI': 'www.yahoo.com/ack', 'Comet-acknowledge-type': 'All' },
                disconnect: {}
            }
        }
    };

    Y.extend(Comet, Y.Base, {
        /**
         * Client state as defined in section 1.5.1 of the Bayeux Protocol. Possible values: 'unconnected', 'connecting', 'connected'
         */
        _clientState: 'unconnected',

        /**
         *  to restore Server's advice
         */
        _advice : {},

        /**
         *  whether the connect request is sucessfull
         */
        _connected : false,

        /**
         *  Some basic configaration
         */
        _config : {
            backoffIncrement: 1000,
            maxBackoff: 10000,
            maxNetworkDelay: 300000,
            delayedSendMaxCount: 10,
            advice: {
                timeout: 60000,
                interval: 0,
                reconnect: 'retry'
            },
            subscribe: {
                jsonpTimeout: 5000
            }
        },

        /**
         * _delayedSendCount is used to avoid delay forever
         */
        _delayedSendCount: 0,

        /**
         * orign url, using for fire event parameter
         */
        _urlOrigin : '',

        /**
         * the timeout of delay_send
         */
        _backoff : 0,

        /**
         * _isLongpollingConnect is used to avoid two re-connect happen at the same time
         */
        _isLongpollingConnect : false,

        /**
         *  _isSendingQueue is used To avoid two sending at same time
         */
        _isSendingQueue: false,

        /**
         * Client ID as returned in a successful handshake as defined at 4.1.2. handshake Response of the Bayeux Protocol.
         */
        _clientId: null,

        /**
         * because the T cookie is HTTP Only, we use _token for user validation which is returned from Comet Server by JSONP call
         */
        _token: null,

        /**
         * An incremental message ID. +1 for every outgoing message.
         */
        _lastMessageId: 0,

        /**
         * Queue Stored, outgoing message to the server
         */
        _outgoing: [],

        /**
         * For re-subscribe when rehandshake happens
         */
        _subscribeChannel: {},

        /**
         * _queue : Async function call
         * ioQueue_c2s : client send data to server
         * ioQueue_s2c : sever push data to client
         * _jsonp: used to get _token back from Comet server
         */
        _queue: new Y.AsyncQueue(),
        _ioQueue_c2s: Y.io.queue,
        _ioQueue_s2c: Y.io.queue,
        _jsonp: null,

        /**
         * Callback function array
         */
        _listeners: {},

        /**
         * Private function begin
         */
        initializer: function (cfg) {
            this.setClientState('unconnected');
            Y.on('beforeunload', Y.bind(function () {
                if (this.getClientState() !== 'unconnected') {
                    this.disconnect();
                    //Y.Cookie.remove('BAYEUX_BROWSER', {path: '/'});
                }
            }, this), window);
        },

        /**
         * Allow configuring comet instance, such as subscribe jsonp timeout
         */
        config: function (key, value) {
            Y.Object.setValue(this._config, key, value);
        },

        /**
         * IO level to send Message
         */
        _Queue_send: function (messages) {
            var that = this;
            //handshake message can't be binded here
            that._batch(messages);

            if (!that.getClientId()) { return; }
            if (that._isSendingQueue) { return; }
            if (that._outgoing.length <= 0) { return; }

            Y.each(that._outgoing, function (v) { v = that._patchMessage(v); });
            that._IO_send(true, that._outgoing);
            that._outgoing = [];
        },

        _nextQueueSend : function () {
            this._Queue_send();
        },

        /**
         * Use to send Message
         */
        _IO_send: function (isMetaMessage, messages) {
            var that = this;
            if (!that.get('uri')) { return; }
            if (isMetaMessage) {
                if (that._isSendingQueue || !messages) { return; }
                that._IO_Queue_Send(messages);
            } else {
                if (!that.getClientId()) { return; }
                if (that._isLongpollingConnect || !messages) { return; }
                that._IO_Longpolling_Send(messages);
            }
        },

        /**
         * _IO_Queue_Send: queue send
         */
        _IO_Queue_Send: function (messages) {

            var that = this;
            that.setTokenHeader(that._token);
            var ioCfg = Y.merge(that.get('ioCfg'), {
                    context: that,
                    timeout: that._config.maxNetworkDelay,
                    data: Y.JSON.stringify(messages),
                    xdr: {credentials: true},
                    on: {
                        success: function (ioId, o) {
                            try {

                                var response = Y.JSON.parse(o.responseText);
                                that._handleResponse(response);
                            } catch (e) {

                                that._handleFailure(messages, 'json parse error');
                                return;
                            }
                        },
                        failure: function (ioId, o) {

                            that._handleFailure(messages, '500::io failed');
                        },
                        start: function () {

                            that._isSendingQueue = true;
                        },
                        complete: function () {

                            that._isSendingQueue = false;
                            that._nextQueueSend();
                        }
                    }
                });
            that._ioQueue_c2s.stop();
            that._ioQueue_c2s(that.get('uri'), ioCfg);
            that._ioQueue_c2s.start();
        },

        /**
         * _IO_Jsonp_Send: jsonp send
         */
        _IO_Jsonp_Send: function (messages) {

            var that = this;
            if (!that.get('uri')) { return; }
            //set up JSONP Object
            var jsonp_url = that.get("uri") + "?callback={callback}";
            //add Bayeux Data
            var data = encodeURIComponent(Y.JSON.stringify(messages));
            jsonp_url = jsonp_url + "&data=" + data;
            that._jsonp = new Y.JSONPRequest(jsonp_url, {
                on: {
                    success: function (response) {

                        that._handleResponse(response);
                    },
                    timeout: function (response) {

                        that._handleFailure(messages, '408:' + that._config.subscribe.jsonpTimeout + ':jsonp timeout');
                    },
                    failure: function () {

                        that._handleFailure(messages, '500::jsonp failed');
                    }
                },
                timeout: that._config.subscribe.jsonpTimeout
            });
            that._jsonp.send();
        },

        /**
         * _IO_Longpolling_Send: longpolling request send
         */
        _IO_Longpolling_Send: function (messages) {

            var that = this;
            that.setTokenHeader(that._token);
            var ioCfg = Y.merge(that.get('ioCfg'), {
                context: that,
                timeout: that._config.maxNetworkDelay,
                xdr: {credentials: true},
                data: Y.JSON.stringify(messages),
                on: {
                    success: function (ioId, o) {
                        try {

                            var response = Y.JSON.parse(o.responseText);
                            that._handleResponse(response);
                        } catch (e) {

                            that._handleFailure(messages, 'json parse error');
                            return;
                        }
                    },
                    failure: function (ioId, o) {

                        that._handleFailure(messages, '500::io failed');
                    },
                    start: function () {

                        that._isLongpollingConnect = true;
                    },
                    complete: function () {

                        that._isLongpollingConnect = false;
                    }
                }
            });
            that._ioQueue_s2c.stop();
            that._ioQueue_s2c(that.get('uri'), ioCfg);
            that._ioQueue_s2c.start();
        },

        /**
         * Handle the response from server
         * @param response an Array of messages
         */
        _handleResponse: function (response) {


            if (response === undefined || response === null) {
                return;
            }

            var that = this;
            Y.each(response, function (message) { //for every response item
                that._updateAdvice(message.advice);
                //add _urlOrigin in response
                message.originalURI = that._urlOrigin;
                var channel = message.channel;
                switch (channel) {
                case '/meta/handshake':
                    that._handshakeResponse(message);
                    break;
                case '/meta/connect':
                    that._connectResponse(message);
                    break;
                case '/meta/disconnect':
                    that._disconnectResponse(message);
                    break;
                case '/meta/subscribe':
                    that._subscribeResponse(message);
                    break;
                case '/meta/unsubscribe':
                    that._unsubscribeResponse(message);
                    break;
                default:
                    that._messageResponse(message);
                    break;
                }
            });
        },

        /**
         * Handle the advices from server, we merge the advice with local config
         */
        _updateAdvice: function (newAdvice) {
            if (newAdvice) {
                this._advice = this._mixin(false, {}, this._config.advice, newAdvice);
            } else {
                this._advice = this._config.advice;
            }
        },

        _handshakeResponse : function (message) {
            var that = this;
            if (message.successful) {
                //From Bayeux Protocol, only after connect successfull that client state = connected
                that.setClientState('connected');
                that._clientId = message.clientId;
                //switch to VIP
                if (that._advice.VIP) {
                    that.set('uri', that.get("protocol") + that._advice.VIP + "/comet");
                }
                that._notifyListeners('/meta/handshake', message);
                //flush the queue
                that._Queue_send();

                var action = that._isDisconnected() ? 'none' : that._advice.reconnect;


                switch (action) {
                case 'retry':
                    that._resetBackoff();
                    that._delayedConnect();
                    break;
                case 'handshake':
                    that.setClientState('unconnected');
                    that._resetBackoff();
                    that._delayedHandshake();
                    break;
                case 'none':
                    that._disconnect(false);
                    break;
                }
            } else {
                that._failHandshake(message);
            }
        },

        _failHandshake : function (message) {
            var that = this;
            that.setClientState('unconnected');
            that._clientId = null;
            that._notifyListeners('/meta/handshake', message);
            that._notifyListeners('/meta/unsuccessful', message);
            // Only try again if we haven't been disconnected and
            // the advice permits us to retry the handshake

            var retry = (that._advice.reconnect !== 'none');
            if (retry) {
                that._increaseBackoff();
                that._delayedHandshake();
            } else {
                that._disconnect(false);
            }
        },

        _delayedHandshake: function () {
            var that = this;
            this._delayedSend(function () {
                that._handshake();
            });
        },

        _subscribeResponse : function (message) {
            if (message.successful) {
                if (this._subscribeChannel[message.subscription]
                        && this._subscribeChannel[message.subscription] === true) {
                    //already subscribe
                } else {
                    this._subscribeChannel[message.subscription] = true;
                }
                //store the token
                if (message["ext"]["Comet-auth-token"]) {
                    this._token = message["ext"]["Comet-auth-token"];
                }
                this._notifyListeners('/meta/subscribe', message);
            } else {
                this._failSubscribe(message);
            }
        },

        _failSubscribe : function (message) {
            this._notifyListeners('/meta/subscribe', message);
            this._notifyListeners('/meta/unsuccessful', message);
        },

        _connectResponse: function (message) {
            var that = this;
            if (that._isDisconnected()) { return; }
            that._connected = message.successful;
            if (that._connected) {
                that.setClientState('connected');
                that._notifyListeners('/meta/connect', message);

                var action = that._isDisconnected() ? 'none' : that._advice.reconnect;


                switch (action) {
                case 'retry':
                    that._resetBackoff();
                    that._delayedConnect();
                    break;
                case 'handshake':
                    that.setClientState('unconnected');
                    that._resetBackoff();
                    that._delayedHandshake();
                    break;
                case 'none':
                    that._disconnect(false);
                    break;
                }
            } else {
                that._failConnect(message);
            }
        },

        _failConnect : function (message) {
            var that = this;
            // Notify the listeners after the status change but before the next action
            that._notifyListeners('/meta/connect', message);
            that._notifyListeners('/meta/unsuccessful', message);

            // 'retry' may happen when the server crashed, the current clientId
            // will be invalid, and the server will ask to handshake again
            var action = that._isDisconnected() ? 'none' : that._advice.reconnect;
            switch (action) {
            case 'retry':
                that._delayedConnect();
                that._increaseBackoff();
                break;
            case 'subscribe':
                that._delayedConnect();
                that._increaseBackoff();
                break;
            case 'handshake':
                that.setClientState('unconnected');
                that._resetBackoff();
                that._delayedHandshake();
                break;
            case 'none':
                that._disconnect(false);
                break;
            }
        },

        _delayedConnect: function () {
            var that = this;
            this._delayedSend(function () {
                that._connect();
            });
        },

        _disconnectResponse : function (message) {
            if (message.successful) {
                this._disconnect(false);
                this._notifyListeners('/meta/disconnect', message);
            } else {
                this._failDisconnect(message);
            }
        },

        _failDisconnect : function (message) {
            this._disconnect(true);
            this._notifyListeners('/meta/disconnect', message);
            this._notifyListeners('/meta/unsuccessful', message);
        },

        _unsubscribeResponse : function (message) {
            if (message.successful) {
                if (this._subscribeChannel[message.subscription]
                        && this._subscribeChannel[message.subscription] === true) {
                    //delete subscribe info
                    delete this._subscribeChannel[message.subscription];
                }
                this._notifyListeners('/meta/unsubscribe', message);
            } else {
                this._failUnsubscribe(message);
            }
        },

        _failUnsubscribe : function (message) {
            this._notifyListeners('/meta/unsubscribe', message);
            this._notifyListeners('/meta/unsuccessful', message);
        },

        _messageResponse : function (message) {
            if (message.successful === undefined) {
                if (message.data) {
                   // It is a plain message, and not a bayeux meta message
                    this._notifyListeners(message.channel, message);
                } else {
                   // no-data field
                    this._notifyListeners('/meta/unsuccessful', message);
                }
            } else {
                if (message.successful) {
                    this._notifyListeners('/meta/publish', message);
                } else {
                    this._failMessage(message);
                }
            }
        },

        _failMessage : function (message) {
            this._notifyListeners('/meta/publish', message);
            this._notifyListeners('/meta/unsuccessful', message);
        },

        _delayedSend : function (operation) {
            var that = this;
            var delay = that._advice.interval + that._backoff;
            if (that._config.maxBackoff <= that._backoff) {
                that._delayedSendCount++;
            } else {
                that._delayedSendCount = 0;
            }
            if (that._delayedSendCount > that._config.delayedSendMaxCount) {
                //when VIP is down(BCP happens), we should switch back to CNAME
                var current_url = that.get('uri');
                that.set('uri', that._urlOrigin);
                if (current_url === that.get('uri')) {
                    return;
                }
                that._resetBackoff();
                that._delayedSendCount = 0;
            }
            that._queue.add(
            {
                fn: operation,
                timeout : delay
            });
            that._queue.run();
        },

        /////////////deal with fail event
        _handshakeFailure : function (message, error) {
            this._failHandshake({
                successful: false,
                failure: true,
                channel: '/meta/handshake',
                request: message,
                advice: {
                    reconnect: 'retry',
                    interval: this._backoff
                },
                error: error || '',
                ext: message.ext || {},
                id: message.id || ''
            });
        },

        _connectFailure : function (message, error) {
            this._connected = false;
            this._failConnect({
                successful: false,
                failure: true,
                channel: '/meta/connect',
                request: message,
                advice: {
                    reconnect: 'retry',
                    interval: this._backoff
                },
                clientId: message.clientId || '',
                error: error || '',
                ext: message.ext || {},
                id: message.id || ''
            });
        },

        _disconnectFailure : function (message, error) {
            this._failDisconnect({
                successful: false,
                failure: true,
                channel: '/meta/disconnect',
                request: message,
                advice: {
                    reconnect: 'none',
                    interval: 0
                },
                clientId: message.clientId || '',
                error: error || '',
                ext: message.ext || {},
                id: message.id || ''
            });
        },

        _subscribeFailure : function (message, error) {
            this._failSubscribe({
                successful: false,
                failure: true,
                channel: '/meta/subscribe',
                request: message,
                advice: {
                    reconnect: 'none',
                    interval: 0
                },
                clientId: message.clientId || '',
                subscription: message.subscription || '',
                error: error || '',
                ext: message.ext || {},
                id: message.id || ''
            });
        },

        _unsubscribeFailure : function (message, error) {
            this._failUnsubscribe({
                successful: false,
                failure: true,
                channel: '/meta/unsubscribe',
                request: message,
                advice: {
                    reconnect: 'none',
                    interval: 0
                },
                clientId: message.clientId || '',
                subscription: message.subscription || '',
                error: error || '',
                ext: message.ext || {},
                id: message.id || ''
            });
        },

        _messageFailure : function (message, error) {
            this._failMessage({
                successful: false,
                failure: true,
                channel: message.channel,
                request: message,
                advice: {
                    reconnect: 'none',
                    interval: 0
                },
                clientId: message.clientId || '',
                subscription: message.subscription || '',
                error: error || '',
                ext: message.ext || {},
                id: message.id || ''
            });
        },

        _handleFailure : function (messages, error) {
            var message, channel, i;
            for (i = 0; i < messages.length; ++i) {
                message = messages[i];
                channel = message.channel;
                switch (channel) {
                case '/meta/handshake':
                    this._handshakeFailure(message, error);
                    break;
                case '/meta/connect':
                    this._connectFailure(message, error);
                    break;
                case '/meta/disconnect':
                    this._disconnectFailure(message, error);
                    break;
                case '/meta/subscribe':
                    this._subscribeFailure(message, error);
                    break;
                case '/meta/unsubscribe':
                    this._unsubscribeFailure(message, error);
                    break;
                default:
                    this._messageFailure(message, error);
                    break;
                }
            }
        },

        _notifyListeners : function (channel, message) {
            // Notify direct listeners
            this._notify(channel, message);
            this._notify(channel + '/*', message);
            // Notify the globbing listeners
            var channelParts = channel.split('/');
            var last = channelParts.length - 1, i = 0;
            for (i = last; i > 0; --i) {
                // Add the recursive globber and notify
                var channelPart = channelParts.slice(0, i).join('/') + '/*';
                // We don't want to notify /foo/* if the channel is /foo/bar/baz,
                // so we stop at the first non recursive globbing
                if (i === last) {
                    this._notify(channelPart, message);
                }
                this._notify(channelPart, message);
            }
        },

        _notify : function (channel, message) {
            var listeners = this._listeners[channel];
            if (listeners) {
                Y.each(listeners, function (listener) {
                    if (Y.Lang.isFunction(listener.listener)) {
                        listener.listener(message);
                    }
                });
            }
        },

        _isDisconnected :  function () {
            return this._clientState === 'unconnected';
        },

        _resetBackoff : function () {
            this._backoff = 0;
        },

        _nextMessageId : function () {
            return ++this._lastMessageId + "";
        },

        _increaseBackoff: function () {
            if (this._backoff < this._config.maxBackoff) {
                this._backoff += this._config.backoffIncrement;
            }
        },

        /**
         * create messages according Bayeux Protocol
         */
        _createMessage: function (operation, cfg) {
            cfg = cfg || {};
            var timestamp = (new Date()).valueOf();
            var host = window.location.host;
            var result = [];
            var ext = Y.merge(this.get('ext').all, this.get('ext')[operation], cfg.ext || {}, {'timestamp' : timestamp, 'host' : host || ""});
            switch (operation) {
            case 'handshake':
                result.push(Y.merge({id: this._nextMessageId(), ext: ext}, this.get('meta')[operation]));
                break;

            case 'connect':
                result.push(Y.merge({id: this._nextMessageId(), ext: ext}, this.get('meta')[operation], {clientId: this.getClientId()}));
                break;

            case 'subscribe':
                result.push(Y.merge({id: this._nextMessageId(), ext: ext}, this.get('meta')[operation], {clientId: this.getClientId(), subscription: cfg.channel}));
                break;

            case 'unsubscribe':
                result.push(Y.merge({id: this._nextMessageId(), ext: ext}, this.get('meta')[operation], {clientId: this.getClientId(), subscription: cfg.channel}));
                break;

            case 'publish':
                result.push(Y.merge({id: this._nextMessageId(), ext: ext}, this.get('meta')[operation], {clientId: this.getClientId(), channel: cfg.channel, data: cfg.data}));
                break;

            case 'disconnect':
                result.push(Y.merge({id: this._nextMessageId(), ext: ext}, this.get('meta')[operation], {clientId: this.getClientId()}));
                break;
            }

            return result;
        },

        /**
         * handshake operation
         * Perform a handshake operation as defined at section 4.1. handshake of the Bayeux Protocol.
         */
        _handshake: function (cfg) {
            var that = this;
            if (that.getClientState() !== 'unconnected') {
                if (that.getClientState() === 'connected') {
                    //already handshaked
                    var message = {
                        successful: true,
                        channel: '/meta/handshake',
                        clientId: that._clientId,
                        originalURI: that._urlOrigin
                    };
                    that._notifyListeners('/meta/handshake', message);
                }
                return;
            }

            if (cfg && cfg.listener) {
                that._addListener(cfg, false);
            }

            that._clientId = null;
            that._token = null;
            that.resetTokenHeader();
            that._clearSubscriptions();

            that._updateAdvice(that._config.advice);

            var messages = that._createMessage('handshake', cfg);
            that._IO_send(true, messages);
            that.setClientState('connecting');

        },

        /**
         * connect operation
         */
        _connect: function (cfg) {
            var that = this;
            if (that.getClientState() !== 'connected') { return; }
            if (that._isLongpollingConnect) { return; }

            var messages = that._createMessage('connect', cfg);
            that._IO_send(false, messages);
        },

        /**
         * subscribe operation
         */
        /* the following function is replace by _subscribeJSONP
        _subscribe: function (cfg) {
            if (!(cfg && cfg.channel)) return;

            //check if has already subscribed the channel
            if (this._subscribeChannel[cfg.channel]
                    && this._subscribeChannel[cfg.channel] === true){
                return;
            }
            if (cfg.listener) {
                this._addListener(cfg, true);
            }

            var messages = this._createMessage('subscribe', cfg);
            this._Queue_send(messages);
        },
        */

        /**
         * subscribe JSONP operation
         */
        _subscribeJSONP: function (cfg) {
            if (!(cfg && cfg.channel)) { return; }
            if (!this.getClientId()) { return; }

            //check if has already subscribed the channel
            if (this._subscribeChannel[cfg.channel]
                    && this._subscribeChannel[cfg.channel] === true) {
                return;
            }

            if (cfg.listener) {
                this._addListener(cfg, true);
            }

            var messages = this._createMessage('subscribe', cfg);
            this._IO_Jsonp_Send(messages);
        },

        /**
         * unsubscribe operation
         */
        _unsubscribe: function (cfg) {
            if (!this.getClientId()) { return; }
            if (cfg &&  cfg.channel) {
                this.removeListeners(cfg.channel);
            }

            if (cfg && cfg.channel) {
                var messages = this._createMessage('unsubscribe', cfg);
                this._Queue_send(messages);
            }
        },

        /**
         * Comet disconnect operation
         */
        _disconnect: function (isAbort) {
            var that = this;
            if (isAbort) {
                that._ioQueue_c2s.stop();
                that._ioQueue_s2c.stop();
            }
            that.setClientState('unconnected');
            that._clientId = null;
            that._resetBackoff();
            that._queue.stop(); //STOP the queue

            // Fail any existing queued message
            if (that._outgoing.length > 0) {
                var messageFail = that._outgoing;
                that._outgoing = [];
                that._handleFailure(messageFail, '500::canceled after disconnect');
            }

            that._clearSubscriptions();
        },

        /**
         *  patchMessage to re-assign the value of messageId and clientId
         */
        _patchMessage: function (m) {
            if (!m.id) { m.id = this._nextMessageId(); }
            m.clientId = this.getClientId();
            if (m.channel === "/meta/handshake") { delete m.clientId; }
            return m;
        },

        /**
         * As messages to batch
         * @param arguments any number of messages
         */
        _batch: function () {
            Y.each(arguments, function (v) {
                if (v && Y.Lang.isArray(v)) {
                    var index = 0;
                    for (index = 0; index < v.length; ++index) {
                        this._outgoing.push(v[index]);
                    }
                } else if (v) {
                    this._outgoing.push(v);
                }
            }, this);
        },

        _clearSubscriptions: function () {
            Y.each(this._listeners, function (listeners) {
                if (listeners) {
                    Y.each(listeners, function (listener, key, obj) {
                        if (listener && listener.isSub) {
                            obj.splice(key);
                        }
                    });
                }
            });

            this._subscribeChannel = {};
        },

        _reDoSubscriptions: function () {
            Y.each(this._subscribeChannel, function (flag, channel_name) {
                if (flag) {
                    //redo subscribe & the subscribe state is old
                    this._subscribeChannel[channel_name] = false;
                    this._subscribeJSONP({channel: channel_name});
                }
            }, this);
        },

        isDuplicatedListener: function (fun, listeners) {
            var index = 0;
            for (index = 0; index < listeners.length; ++index) {
                var listener = listeners[index];
                if (listener && listener.listener && listener.listener.toString() === fun.toString()) {
                    return true;
                }
            }
            return false;
        },

        _addListener: function (cfg, isSubscribe, force) {
            if (cfg && cfg.listener && Y.Lang.isFunction(cfg.listener)) {
                if (this._listeners[cfg.channel]) {
                    if (force || !this.isDuplicatedListener(cfg.listener, this._listeners[cfg.channel])) {
                        //not duplicated listener
                        this._listeners[cfg.channel].push({listener: cfg.listener, isSub: isSubscribe});
                    }
                } else {
                    this._listeners[cfg.channel] = [{listener: cfg.listener, isSub: isSubscribe}];
                }
            }
        },

        _mixin : function (deep, target, objects) {
            var i, propName;
            var result = target || {};
            // Skip first 2 parameters (deep and target), and loop over the others
            for (i = 2; i < arguments.length; ++i) {
                var object = arguments[i];
                if (object === undefined || object === null) {
                    continue;
                }
                for (propName in object) {
                    var prop = object[propName];
                    var targ = result[propName];
                    // Avoid infinite loops
                    if (prop === target) {
                        continue;
                    }
                   // Do not mixin undefined values
                    if (prop === undefined) {
                        continue;
                    }
                    if (deep && typeof prop === 'object' && prop !== null) {
                        if (prop instanceof Array) {
                            result[propName] = this._mixin(deep, targ instanceof Array ? targ : [], prop);
                        } else {
                            result[propName] = this._mixin(deep, {}, prop);
                        }
                    } else {
                        result[propName] = prop;
                    }
                }
            }
            return result;
        },

        destructor: function () { },

        ////////////////////////Public API Start/////////////////////////////////////

        getClientState: function () {
            return this._clientState;
        },

        setClientState: function (newStatus) {
            this._clientState = newStatus;
        },

        getClientId: function () {
            return this._clientId;
        },

        initBayeux: function (url, callback) {
            this._urlOrigin = url;
            this.set('uri', url);
            this._handshake({channel: "/meta/handshake", listener: callback});
        },

        subscribe: function (channel_name, callback) {
            this._subscribeJSONP({channel: channel_name, listener: callback});
        },

        //handshake: function (cfg) { this._handshake(cfg); },
        unsubscribe: function (channel_name) {
            this._unsubscribe({channel: channel_name});
        },

        disconnect: function (callback) {
            var that = this;
            if (callback) {
                that._addListener({channel: "/meta/disconnect", listener: callback}, false);
            }
            if (that.getClientState() === 'unconnected') { return; }
            if (!that.getClientId()) { return; }

            var messages = that._createMessage('disconnect');
            that._Queue_send(messages);
        },

        publishMsg: function (channel_name, data_publish) {
            if (channel_name && data_publish) {
                var cfg = {channel: channel_name, data: data_publish};
                var messages = this._createMessage('publish', cfg);
                this._Queue_send(messages);
            }
        },

        ///////////////////Listeners Operation/////////////////////////////////////
        clearListeners: function () {
            this._listeners = {};
        },

        addListener: function (channel_name, callback, force) {
            force = force || false;
            if (!callback && Y.Lang.isFunction(callback)) { return; }
            this._addListener({channel: channel_name, listener: callback}, false, force);
        },

        removeListeners: function (channel) {
            if (this._listeners[channel]) {
                delete this._listeners[channel];
            }
        },

        //////////////////User Validation////////////////////////////////////////////
        setUserInfo: function (uid, user_cred) {
            if (uid && user_cred) {
                var ext = this.get('ext');
                ext.subscribe['Comet-subscriber-auth-info'] = {"uid": uid, "user_type": "yahoo", "user_cred": user_cred };
            }
        },

        setUserInfoWithCookie: function (uid, cookie) {
            if (uid) {
                var ext = this.get('ext');
                ext.subscribe['Comet-subscriber-auth-info'] = {"uid": uid, "user_type": "yahoo", "user_cred": 'Any Value' };
            }
        },

        setTokenHeader: function (token) {
            if(token) {
                var ioCfg = this.get('ioCfg');
                ioCfg['headers']['Authorization'] = "Basic token=" + token;
            }
        },

        resetTokenHeader: function() {
            var ioCfg = this.get('ioCfg');
            ioCfg['headers']['Authorization'] = "Basic token=";
        },

        setYcaHeader: function (yca, opaqueId) {
            if (yca) {
                //add YCA
                var ioCfg = this.get('ioCfg');
                ioCfg['headers']['Yahoo-App-Auth'] = yca;
            }
            if (opaqueId) {
                var ext = this.get('ext');
                ext.publish['Comet-opaque-id'] = opaqueId;
            }
        }

    });

    Y.Comet = Comet;

}, '3.4.1', {requires: ['base', 'io',  'json', 'async-queue', 'cookie', 'jsonp', 'jsonp-url']});
/*jslint indent: 4, nomen:true, white:true */
/*global YUI */

YUI.add('ucs-comet-conn', function (Y) {

    'use strict';

    Y.namespace('ucs');

    // --------------------------------------------------------------------------------
    //  Private Variables & Methods
    //

    /**
     * Configurations
     * It contains both production and non-production settings
     * for different Comet applications.
     * 
     * @private
     */
    var config = {
        counts_max: {
            unsuccessful: {
                '/meta/handshake': 5,
                '/meta/subscribe': 5,
                '/meta/unsubscribe': 5,
                '/meta/connect': 5,
                '/meta/disconnect': 5
            }
        },
        prod: {
            /* private comet cluster */
            notifications: {
                host: 'https://pr.comet.yahoo.com/comet'
            },
            mail_count: {
                host: 'https://pr.comet.yahoo.com/comet'
            },
            /* public comet cluster */
            system_status: {
                host: 'https://comet.yahoo.com/comet'
            }
        },
        nonprod: {
            /* private comet cluster */
            notifications: {
                //host: 'http://perf405.snp.mobile.gq1.yahoo.com/comet',
                //host: 'http://perf501.snp.mobile.gq1.yahoo.com/comet'
                //host: 'http://session4.snp.mobile.gq1.yahoo.com/comet'
                host: 'http://stage-comet1.onepush.mobile.gq1.yahoo.com/comet'
            },
            mail_count: {
                //host: 'http://perf405.snp.mobile.gq1.yahoo.com/comet',
                //host: 'http://perf501.snp.mobile.gq1.yahoo.com/comet'
                //host: 'http://session4.snp.mobile.gq1.yahoo.com/comet'
                host: 'http://stage-comet1.onepush.mobile.gq1.yahoo.com/comet'
            },
            /* public comet cluster */
            system_status: {
                //host: 'https://comet.yahoo.com/comet'
                host: 'http://perf501.snp.mobile.gq1.yahoo.com/comet'
                //host: 'http://perf405.snp.mobile.gq1.yahoo.com/comet'
                //host: 'http://session4.snp.mobile.gq1.yahoo.com/comet'
            }
        }
    },

    /**
     * Events
     * 
     * @private
     */
     EVT_CONNECT    = 'connect',
     EVT_DISCONNECT = 'disconnect',
     EVT_MESSAGE    = 'message',
     EVT_ERROR      = 'error',

    /**
     * Instances
     * Support single instance per application type.
     *
     * @private
     */
    instances = {};

    /**
     * Componet Constructor
     *
     * @class CometConn
     * @param {Object} config The config object.
     * @constructor
     */
    Y.ucs.CometConn = function (app, env) {

        // initialize class variables
        this.app = app;
        this.env = env;
        this.comet = null;

        this.init(config[env][app]);

        this.publish(EVT_CONNECT);
        this.publish(EVT_DISCONNECT);
        this.publish(EVT_MESSAGE);
    };


    // --------------------------------------------------------------------------------
    //  Static Variables & Methods
    //

    /**
     * Create Comet Instance.
     *
     * @param {String} app The application type. [notifications | system_status]
     * @param {String} env The environment. [prod | nonprod]
     * @return {CometConnection} The CometConnection instance.
     * @static
     */
    Y.ucs.CometConn.getConn = function(app, env, callback) {
        var conf = null,
            key = null;
        
        Y.config.debug = window.location.href.match(/debug_comet-conn=1/);

        env = env || 'prod';
        if (window.location.href.match(/env=nonprod/)) {
            env = 'nonprod';
        }
        

        // check params: env
        if (Y.Lang.isUndefined(env)) {
            throw new Error('getConn(): env is required.');
        }

        // check params: app
        if (Y.Lang.isUndefined(app)) {
            throw new Error('getConn(): app is required.');
        }

        // valid params: env
        if (!Y.Object.hasKey(config, env)) {
            throw new Error('getConn(): cannot find config for env=' + env);
        }

        // valid params: app
        if (!Y.Object.hasKey(config[env], app)) {
            throw new Error('getConn(): cannot find config for app=' + app);            
        }

        // set instance key. <app>:<env>
        key = Y.Lang.sub('{app}:{env}', {app:app, env:env});

        // create instance if necessary
        if (!Y.Object.hasKey(instances, key)) {
            instances[key] = new Y.ucs.CometConn(app, env); 
        } else {
        }

        return instances[key];
    };


    // --------------------------------------------------------------------------------
    //  Class Variables & Methods
    //

    Y.ucs.CometConn.prototype = {

        /**
         * Counts
         * Store the number of unsuccessful count. 
         *
         * @private
         */
        counts: {},

        /**
        * Initialize
        *
        * @method init
        */
        init: function (config) {
            var self = this;

            self.comet = Y.initComet(config.host);
            self.comet.addListener('/meta/handshake', Y.bind(self.cbHandShake, self), true);
            self.comet.addListener('/meta/subscribe', Y.bind(self.cbSubscribe, self), true);
            self.comet.addListener('/meta/unsubscribe', Y.bind(self.cbUnsubscribe, self), true);
            self.comet.addListener('/meta/connect', Y.bind(self.cbConnect, self), true);
            self.comet.addListener('/meta/disconnect', Y.bind(self.cbDisconnect, self), true);
            self.comet.addListener('/meta/unsuccessful', Y.bind(self.cbUnsuccessful, self), true);

            self.counts = {
                unsuccessful: {
                    '/meta/handshake': 0,
                    '/meta/subscribe': 0,
                    '/meta/unsubscribe': 0,
                    '/meta/connect': 0,
                    '/meta/disconnect': 0
                }
            };
        },

        /**
         * @method getComet
         * @returns the comet object
         */
        getComet: function () {
            return this.comet;
        },

        /**
         * @method isDisconnect
         * @return true if it is disconnected
         * @private
         */
         isDisconnect: function (e) {
            var self = this,
                disconnect = true;

            if (e.successful === false) {
                if (Y.Object.hasKey(self.counts.unsuccessful, e.channel)) {
                    self.counts.unsuccessful[e.channel]++;
                    if (self.counts.unsuccessful[e.channel] < config.counts_max.unsuccessful[e.channel]) {
                        disconnect = false;
                    }
                }
            }

            return disconnect;
         },

        /**
         * Callback Handler for Handshake.
         * 
         * @method cbHandShake
         * @param e The event message
         * @private
         */
        cbHandShake: function (e) {
            var self = this,
                evt = null,
                uri = null;

      
            // check param: uri / originalURI  
            if (Y.Object.hasKey(e, 'originalURI')) {
                uri = e.originalURI;
            } else if (Y.Object.hasKey(e, 'uri')) {
                uri = e.uri;
            } else {
                this.fire(EVT_ERROR, 'uri / originalURI is missing in the callback_handshake response.');
                return;
            }


            if (uri === config[this.env][this.app].host) {
                if (e.successful) {
                    self.fire(EVT_CONNECT, e);
                } else {
                    self.fire(EVT_ERROR, 'cb_handshake. successful=false');
                }
            } else {
                self.fire(EVT_ERROR, 'cb_handshake.uri is not found in config. uri=' + uri);
            }

            if (e) {
                self.emitBeacon({
                    sec: 'UH 3 Comet',
                    slk: 'UH 3 Comet HandShake',
                    dmsgs: e,
                    type: 'error',
                    source: 'ucs-comet-conn',
                    code: 'hand'
                });
            }
        },

        /**
         * Callback Handler for Subscribe.
         *
         * @method cbSubscribe
         * @param e The event message
         * @private
         */
        cbSubscribe: function (e) {
            var self = this;
            

            if (e) {
                self.emitBeacon({
                    sec: 'UH 3 Comet',
                    slk: 'UH 3 Comet Subscribe',
                    dmsgs: e,
                    type: 'error',
                    source: 'ucs-comet-conn',
                    code: 'sub'
                });
            }
        },

        /**
         * Callback Handler for Unsubscribe.
         *
         * @method cbUnsubscribe
         * @param e The event message
         * @private
         */
        cbUnsubscribe: function (e) {
            var self = this;


            if (e) {
                self.emitBeacon({
                    sec: 'UH 3 Comet',
                    slk: 'UH 3 Comet Unsubscribe',
                    dmsgs: e,
                    type: 'error',
                    source: 'ucs-comet-conn',
                    code: 'unsub'
                });
            }
        },

        /**
         * Callback Handler for Connect.
         *
         * @method cbConnect
         * @param e The event message
         * @private
         */
        cbConnect: function (e) {
            var self = this;


            if (e) {
                self.emitBeacon({
                    sec: 'UH 3 Comet',
                    slk: 'UH 3 Comet Connect',
                    dmsgs: e,
                    type: 'error',
                    source: 'ucs-comet-conn',
                    code: 'conn'
                });
            }
        },

        /**
         * Callback Handler for Disconnect.
         *
         * @method cbDisconnect
         * @param e The event message
         * @private
         */
        cbDisconnect: function (e) {
            var self = this;


            if (e) {
                self.emitBeacon({
                    sec: 'UH 3 Comet',
                    slk: 'UH 3 Comet Disconnect',
                    dmsgs: e,
                    type: 'error',
                    source: 'ucs-comet-conn',
                    code: 'disconn'
                });
            }
        },

        /**
         * Callback Handler for Unsuccessful.
         *
         * @method cbUnsuccessful
         * @param e The event message
         * @private
         */
        cbUnsuccessful: function (e) {
            var self = this;
            

            if (e) {
                self.emitBeacon({
                    sec: 'UH 3 Comet',
                    slk: 'UH 3 Comet Unsuccessful',
                    dmsgs: e,
                    type: 'error',
                    source: 'ucs-comet-conn',
                    code: 'fail'
                });
            }

            // should client execute 'disconnect'?
            if (self.isDisconnect(e)) {
                self.getComet().disconnect();
            }
        },

        /**
         * Callback Handler for System Status.
         *
         * @method cbSystemStatus
         * @param {Object} data Event message returned from server.
         */
        cbSystemStatus: function (data) {
            if (data) {
                this.fire('message', data);
            }
        },

        /**
         * Callback Handler for Notifications.
         *  
         * @method cbNotifications
         * @param {Object} data Event message returned from server
         */
        cbNotification: function (data) {
            if (data) {
                this.fire(EVT_MESSAGE, data);
            }
        },

        /**
         * @method initSystemStatus
         * @param channel The channel name of the system status.
         */
        initSystemStatus: function(channel) {
            this.comet.subscribe(channel, Y.bind(this.cbSystemStatus, this));
        },

        /**
         * @method initNotification
         */
        initNotification: function () {
            this.comet.subscribe("/UNP/alerts/*", Y.bind(this.cbNotification, this));
        },

        /**
         * @method emitBeacon
         * @param data The message atteched to the beacon
         */
        emitBeacon: function (data) {
            /*
            var beacon = null,
                params = {},
                queryString = '',
                sep = '',
                i = null;

            // prepare query params
            params.s = 1197747123; // space id
            params.r = encodeURIComponent(location.href); // referrer url
            params.t = Math.random(); // random # to avoid cache
            params.dmsgs = encodeURIComponent(Y.JSON.stringify(data.dmsgs)); // data
            params.sec = encodeURIComponent(data.sec); // ult param: sec
            params.slk = encodeURIComponent(data.slk); // ult param: slk
            params.type = data.type;

            // formulate query string
            for (i in params) {
                queryString += sep + i + '=' + params[i];
                sep = '&';
            }

            // emit the beacon
            beacon = new Image(0, 0);
            beacon.src = 'https://geo.yahoo.com/p?' + queryString;
            */

            if (Y.Lang.isObject(Y.ucs) && Y.Lang.isObject(Y.ucs.Beacon)) {
                switch (data.type) {
                    case 'info':
                        Y.ucs.Beacon.info(data);
                        break;
                    case 'error':
                        Y.ucs.Beacon.error(data);
                        break;
                }
            }
        }

    };
        
    // Class Augmentation

    Y.augment(Y.ucs.CometConn, Y.EventTarget, true, null, {
        emitFacade: true,
        broadcast: 2
    });

        
}, '1.0', {
    requires: [
        'event', 
        'event-custom', 
        'comet',
        'ucs-beacon'
    ]
});
YUI.add("ucs-simple-menu",function(f){f.namespace("ucs.MoreMenu");var d="yucs-menu-active",e="role",a="tabIndex",b=">li>a",c="parentNode";f.ucs.MoreMenu=function(g){f.ucs.MoreMenu.superclass.constructor.call(this,g);g.removeClass("yucs-more-activate");this.ylt=g.getAttribute("data-ylt");this.topBar=f.one("#yucs-top-bar");this._init();};f.extend(f.ucs.MoreMenu,f.ucs.MenuUtils,{_init:function(){this._position();this._initAriaTopbar();this._initEvents();},_initEvents:function(){this.menu.detach("hover");this.panel.detach("hover");f.one("#yucs-more-link").on("click",this._handleMenuClick,this);f.Global.on("ucs:menuNavShow",this._hideMenu,this);},_handleMenuClick:function(g){g.halt();if(this.panel.hasClass("yucs-hide")){this._showMenu(g);this.menu.removeClass("yucs-has-focus");this.menu.one("a").blur();this.documentClickHandle=f.one("body").on("click",this._handleDocumentClick,this);this.documentMouseDownHandle=f.one("body").on("mousedown",this._handleDocumentClick,this);}else{this._hideMenu();}},_position:function(){var g=this.menu.get("region").height;g=g-2;f.one("#yucs-top-menu").setStyle("top",g+"px");},_sendBeacon:function(){window.ucs._sendBeacon(this.ylt);},_showMenu:function(g){if(this.panel.hasClass("yucs-hide")){this._sendBeacon();this.menu.addClass(d);f.ucs.MoreMenu.superclass._showMenu.apply(this,arguments);}},_hideMenu:function(g){f.ucs.MoreMenu.superclass._hideMenu.apply(this,arguments);this.menu.removeClass(d);},_handleKeyup:function(g){if(27===g.keyCode||9===g.keyCode){this.menu.one("a").focus();this._hideMenu();}else{if(40===g.keyCode&&!this.keyedup){if(this.panel.one("a")){this._handleMenuClick(g);this.panel.one("a").focus();}this.keyedup=true;}}},_initAriaTopbar:function(){if(!this.topBar){return;}this.toolbar=f.one("#yucs-top-list");this.toolbar.set(e,"toolbar");this.toolbar.all(">li").set(e,"presentation");this.toolbar.delegate("mouseenter",function(g){g.currentTarget.removeClass("yucs-has-focus");},">li");this.fm=this.toolbar.plug(f.Plugin.NodeFocusManager,{descendants:b,keys:{next:"down:39",previous:"down:37"},focusClass:{TABINDEX_ATTR:"-1",className:"yucs-has-focus",fn:function(g){return g.get(c);}},circular:true});this.panel.focusManager.get("descendants").after("keydown",function(g){if(9===g.keyCode){this.panel.focusManager.focus(0);this._hideMenu();}},this);this.toolbar.focusManager.get("descendants").after("keyup",function(g){if(9===g.keyCode){this.toolbar.focusManager.focus(0);}if(27===g.keyCode){this.menu.one("a").focus();this._hideMenu();}},this);}});},"1.0",{requires:["node","event","ucs-menu-utils","event-resize","event-hover","node-focusmanager","event-mouseenter","event-delegate"]});(function(){ucs.YObj.use("node","ucs-simple-menu",function(b){var c=b.one("#yucs-more.yucs-more-activate"),a;if(c){a=new b.ucs.MoreMenu(c);}});})();ucs.YObj.use("node","node-core","event-base","event-mousewheel","event-resize","dom-screen",function(a){var g=a.one("body"),f=a.one("html"),e=false,h="page-has-scrolled",b="yucs-fixed",i,d=false;if(a.one("#yucs.persist-init")){return;}a.one("#yucs").addClass("persist-init");if(a.one(".yucs-games")&&a.one(".yom-games-gameplay, .yom-games-yap")!=null){f.addClass(b);return;}function c(){if(a.DOM.winWidth()>970){f.removeClass(b);}else{f.addClass(b);}}if(!a.UA.ie||a.UA.ie>6){c();a.on("windowresize",c);}if((window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop)>0){g.addClass(h);e=true;}a.on("scroll",function(){var j=window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop;if(j===0){g.removeClass(h);e=false;}else{if(!e){g.addClass(h);e=true;}}});});if(typeof(YAHOO)=="undefined"){YAHOO={};}if(typeof(YAHOO.util)=="undefined"){YAHOO.util={};}if(typeof(YAHOO.util.UHScriptNodeDataSource)=="undefined"){YAHOO.util.UHScriptNodeDataSource={};}YUI.add("ucs-search",function(d){var p={"&":" ","<":" ",">":" ",'"':" ","'":" ","/":" ","`":" "};if(!ucs.Search){var h="value",m="click",u="suggest",c="touchstart",t="submit",s="innerHTML",a="tabindex",f="target",o=20,b=10,e=parseInt(d.one("#yucs").getStyle("paddingLeft"),b),j="yucs-qry",n="yucs-content-qry",v="#yucs-satray",i=d.one("#yucs-debug"),r="#yucs-btn-delete",q="https://s.yimg.com/kx/yucs/uh3/search/js/553/mini-assist-min.js",l="https://s.yimg.com/kx/yucs/uh3/search/js/442/tray-align-plugin-min.js",g="https://s.yimg.com/lq/lib/s7/tray-shim-plugin-201009101433.js",k="https://s.yimg.com/kx/yucs/uh3/search/css/434/assist-min.css";ucs.Search=function(w){if(typeof w.getDOMNode==="function"){this.form=(w.getDOMNode().nodeName.toLowerCase()==="form")?w:w.one("form");}else{this.form=w.one("form");}this.searchWrapper=d.one("#yucs-search");this.searchFormClass=d.one(".yucs-search");this.buttons=this.form.all("button");this.stype=this.form.one("#yucs-search_type");this.form.set("onsubmit",null);this.yucs=d.one("#yucs");this.loadedAssist=false;this.property=d.one("#yucs").getData("property");this.cleanBtn=d.one(r);this.languagetag=d.one("#yucs").getAttribute("data-lang");this.init();};ucs.Search.prototype={isWebSearch:false,init:function(){var C=this.property;var A=navigator.userAgent.toLowerCase();if(d.one(".enable_form_focus")&&C!=="mail"){if(C==="foo"&&d.UA.ie&&d.UA.ie<10){d.on("domready",function(){document.getElementById("mnp-search_box").focus();});}else{if(C==="foo"&&d.UA.ie==10){d.later(1,this,function(){document.getElementById("mnp-search_box").blur();document.getElementById("mnp-search_box").focus();this._setCaretStart();});}else{document.getElementById("mnp-search_box").focus();}}}else{if(C==="foo"&&d.UA.ie&&d.UA.ie<10){d.on("domready",function(){document.getElementById("mnp-search_box").focus();});}else{if(C==="foo"&&d.UA.ie==10){d.later(1,this,function(){document.getElementById("mnp-search_box").blur();document.getElementById("mnp-search_box").focus();this._setCaretStart();});}}}this.searchWrapper.removeClass("yucs-search-activate");this._setTabIndex();this.is2Button=(this.buttons.size()===2);if(this.searchFormClass.getAttribute("data-webaction")){this.form.one("input").setAttribute("name","p");this.searchFormClass.setAttribute("action",this.searchFormClass.getAttribute("data-webaction"));d.one("#yucs-sprop_button").setAttribute("data-vsearch",d.one("#mnp-search_box").getAttribute("data-yltvsearch"));}if(this._hasPlaceholderSupport()&&!d.UA.ie){var z=document.getElementById("mnp-search_box");z.removeAttribute("data-sh");}if((C==="finance")&&!this.is2Button){document.getElementById("mnp-search_box").name="s";}this.input=this.form.one("input");this.vertSearchBtn=this.form.one("#yucs-sprop_button");this.webSearchBtn=this.form.one("#yucs-search_button");this.searchToggleBtn=this.form.one("#yucs-search_toggle_button");this.searchHint=this.input.getAttribute("data-sh");this.yltvsearch=this.input.getAttribute("data-yltvsearch");this.yltvsearchsugg=this.input.getAttribute("data-yltvsearchsugg");if(!this._inputIsEmpty()&&!this._inputIsDefaultTerm()&&!this.loadedAssist){this.loadedAssist=true;this._initAssist();}if((d.one("#yucs")&&d.one("#yucs").getAttribute("data-linktarget"))){this.linkTarget=d.one("#yucs").getAttribute("data-linktarget");}else{this.linkTarget=this.form.getAttribute("target")||"_top";}this._setFormTarget();var y=this.input.getAttribute("data-resize");if(!y||y==="enable"){this._initSizeControl();}this._initEventListeners();this.form.removeClass("yucs-activate");var x=document.URL,B=/[?&]p=([^&]+)/i,w=B.exec(x);if(w==null&&C==="help"){B=/[?&]question_box=([^&]+)/i;w=B.exec(x);}if(w!=null&&(C==="answers"||C==="help"||C==="shopping")){d.one(".yucs-search-input").setAttribute("value",decodeURIComponent(w[1].replace(/\+/g," ")));}if(document.activeElement!==this.input._node&&this.input.get(h)===""){this._resetSearchInput();}if(d.one("#search_hot_keyword_block")&&C!=="mail"){this._initHotKeyword();}else{if(d.one("#search_hot_keyword_block")&&C!=="mail"){d.one("#advanced-search").set("offsetWidth",d.one(".yucs-search-input").get("offsetWidth"));}}},html:function(w){return(w+"").replace(/[&<>"'\/`]/g,this._htmlReplacer);},_htmlReplacer:function(w){return p[w];},_initSizeControl:function(){this.oldYucsWidth=this.yucs.get("region").width;this.isRTL=/ar|he/gi.test(d.one("#yucs").getAttribute("data-lang").split("-")[0]);this.leftWrapperWidth=this._calcLeftWrapperWidth();this.leftWrapper=d.one(".yucs-fl-left");this.rightWrapper=d.one(".yucs-fl-right");this.defaultWidth=parseInt(this.searchWrapper.getComputedStyle("width"),b);this.IEOffset=0;if(d.UA.ie>0&&d.UA.ie<=7){this._calcIEOffset();}this._resizeSearchContainer(this.oldYucsWidth);d.on("windowresize",d.bind(this._handleWindowResize,this));},_hasPlaceholderSupport:function(){var w=document.createElement("input");return("placeholder" in w);},_initEventListeners:function(){var w=this.form.on(t,this._handleSubmit,this);this.input.on("keydown",this._handleInputKeypress,this);this.input.on("blur",this._handleInputBlur,this);this.input.on("keyup",this._handleInputKeyup,this);this.input.on("click",this._handleInputClick,this);if(this.stype){this._initSearchTypeMenu();}if(this.property==="mail"||this.is2Button){if(this.vertSearchBtn){this.vertSearchBtn.on(m,this._handleVertSearch,this);}if(d.UA.ie){w.detach();this.webSearchBtn.on(m,this._handleWebSearchClick,this);this.form.on(t,this._handleVertSearch,this);}this.publish("ucs:webSearch",{broadcast:2,emitFacade:true});d.Global.on("ucs:webSearch",this._handleWebSearchEvent,this);d.Global.on("ucs:mailSearch",this._trackMailSearch,this);d.Global.on("ucs:mailSearchSugg",this._trackMailSearchSugg,this);}if(this.cleanBtn){this.cleanBtn.on("click",this._resetSearchInput,this);}},_initSearchTypeMenu:function(){this.stype.one(".yucs-stype_prop").setData("yucs-stype","propsearch");
this.stype.one(".yucs-stype_web").setData("yucs-stype","web");this.stype.delegate("click",function(C){var y=this.stype.one(".yucs-active"),x=this.stype.one(".yucs-inactive"),A,w,z,B;C.preventDefault();if(parseFloat(YUI.version,10)>3.1){x.toggleView();}else{if(x.getStyle("display")=="none"){x.setStyle("display","block");}else{x.setStyle("display","none");}}if(C.target.hasClass("yucs-active")||C.target.hasClass("yucs-inactive")){z=y.getData("yucs-stype");B=C.target.getData("yucs-stype");if(z!=B){A=y.get("text");w=C.target.get("text");y.set("text",w);y.setData("yucs-stype",B);x.set("text",A);x.setData("yucs-stype",z);}}},"span",this);this.stype.one(".yucs-active").on("focus",function(w){if(inactiveElm.getStyle("display")=="none"){this.stype.one(".yucs-inactive").show();}},this);this.stype.one(".yucs-inactive").on("blur",function(w){this.stype.one(".yucs-inactive").hide();},this);},_calcLeftWrapperWidth:function(){var w=d.all(".yucs-fl-left > div"),y=e,z,x;w.each(function(A){if(A.get("id")!=="yucs-search"){y+=A.get("offsetWidth")+parseInt(A.getStyle("marginLeft"),b)+parseInt(A.getStyle("marginRight"),b);}else{y+=parseInt(A.getStyle("marginLeft"),b)+parseInt(A.getStyle("marginRight"),b);}});return y;},_calcIEOffset:function(){var x=d.all(".yucs-search-buttons").pop(),w=x.intersect(this.searchWrapper);if(d.one("body").getAttribute("dir")==="rtl"){this.IEOffset=w.left-this.searchWrapper.getX();}else{this.IEOffset=this.searchWrapper.getX()+parseInt(this.searchWrapper.getComputedStyle("width"),b)-w.right;}this.defaultWidth+=this.IEOffset;},_handleWindowResize:function(){var w=this.yucs.get("region").width;if(w!==this.oldYucsWidth){this._resizeSearchContainer(w);this.oldYucsWidth=w;}},_setInputWidth:function(){var w=d.one(".yucs-form-input"),x=parseInt(this.input.getStyle("paddingLeft"))+parseInt(this.input.getStyle("paddingRight"))+parseInt(this.input.getStyle("borderLeftWidth"))+parseInt(this.input.getStyle("borderRightWidth"));this.input.setStyle("width",(w.get("region").width-x)+"px");},_resizeSearchContainer:function(z){var y=this.searchWrapper.get("region").width,x=this.rightWrapper.get("region").width+e,w=z-(this.leftWrapperWidth+x+o)+this.IEOffset;if(w>this.defaultWidth){if(y===this.defaultWidth){return;}else{w=this.defaultWidth;}}if(this.IEOffset>0&&this.isRTL){this.searchWrapper.setStyle("visibility","hidden");}this.searchWrapper.setStyle("width",w+"px");if(this.IEOffset>0&&this.isRTL){d.later(50,this,function(){this.searchWrapper.setStyle("visibility","visible");});}},_getInputValTrimmed:function(){var w=this.input.get(h);w=d.Lang.trim(w);return w;},_inputIsEmpty:function(){return this._getInputValTrimmed()==="";},_inputIsDefaultTerm:function(){return this._getInputValTrimmed()===this.searchHint;},_handleInputKeyup:function(w){if(w.keyCode==13){}if(this._inputIsEmpty()){this._resetSearchInput();this._setCaretStart();}if(!this._inputIsEmpty()&&!this._inputIsDefaultTerm()){this._setTabIndex();}if(!this.loadedAssist){this.loadedAssist=true;this._initAssist();}this._showCleanBtn();},_handleInputClick:function(){if(this._inputIsDefaultTerm()){this._resetSearchInput();this._setCaretStart();}},_setCaretStart:function(){var y;if((y=window.document.selection)){if(y.type!="Control"){var w=this.input.get("value").length,x=y.createRange();x.move("character",-w);x.select();}}},_setTabIndex:function(){var w=(d.UA.ie>0&&d.UA.ie<=7);this.buttons.each(function(x){var y=x.getAttribute(a);if((w&&y===0)||(w&&y===65535)||(y&&!(w&&y===32768))){x.setAttribute(a,0);}else{x.setAttribute(a,-1);}});},_setFormTarget:function(){if(this.linkTarget==="_blank"||this.form.hasClass("yucs-search-fh")){this.form.setAttribute(f,"searchWin");}else{this.form.setAttribute(f,this.linkTarget);}},_initAssist:function(){var w=this.input.getAttribute("data-satype");switch(w){case"mini":this._initMiniAssist(this.input._node);break;case"rich":this._initRichAssist(this.input._node);break;default:break;}},_buildAssistConfig:function(w){var x={searchbox:w,clid:"uh-yui3",align:true,shim:1,nresults:w.getAttribute("data-maxresults")||10};x.node=v;if(w.getAttribute("data-pubid")){x.pubid=w.getAttribute("data-pubid");}if(w.getAttribute("data-gosurl")){x.url=w.getAttribute("data-gosurl");}if(d.one("#yucs-sfilter")&&d.one("#yucsHead").hasClass("ua-ie")){x.tray={plugin:{align:"#yucs-input_wrap"}};}return x;},_initMiniAssist:function(y){var w=this,x={miniassist:{fullpath:q,requires:["base","get","node","event-focus","plugin","array-extras"]},"miniassist-skin":{fullpath:k,type:"css"},"tray-align-plugin":{fullpath:l,requires:["miniassist"]},"tray-shim-plugin":{fullpath:g,requires:["miniassist"]}};ucs.YObj.applyConfig({modules:x});ucs.YObj.use("miniassist","miniassist-skin","tray-align-plugin","tray-shim-plugin","event-move","escape",function(A){if(ucs.YObj.config.fetchCSS===false){A.Get.css(w.miniassistSkin);}var G=new A.Node(y),E=w._buildAssistConfig(G);w.sa=new A.Search.MiniAssist(E);w.sa.assist._checkValue();w.sa.gossip.set("scrollSize",13);w.sa.gossip.set("linkStem",A.one(v).getAttribute("data-vsearch"));if(A.one("#search_hot_keyword_block")){var J="",F="",z=A.one("#yucs").getData("property"),B=A.one("#yucs").getAttribute("data-lang");if("sports"==z&&B=="zh-hant-tw"){J="tw.sports.yahoo.com";}else{if("ivy"==z&&B=="zh-hant-tw"){F="hq";}else{if("omg"==z&&B=="zh-hant-hk"){J="hk.ent.yahoo.com";}else{if("finance"==z&&B=="zh-hant-hk"){J="hk.finance.yahoo.com";}else{if("lifestyles"==z&&B=="zh-hant-hk"){J="hk.lifestyle.yahoo.com";}}}}}if(J!=""){w.sa.gossip.set("linkParams",{fr:A.one(v).getAttribute("data-vfr"),"vs":J});}else{if(F!=""){w.sa.gossip.set("linkParams",{fr:A.one(v).getAttribute("data-vfr"),"ilk":F});}else{w.sa.gossip.set("linkParams",{fr:A.one(v).getAttribute("data-vfr")});}}}else{w.sa.gossip.set("linkParams",{fr:A.one(v).getAttribute("data-vfr")});}w.sa.gossip.set("uhbParams",{uhb:A.one(v).getAttribute("data-vfr")});if(!w.is2Button){w.sa.gossip.set("hideEmptyTray",false);w.sa.gossip.set("linkParams",{});}if(w.property==="finance"&&w.languagetag!=="zh-hant-hk"){var I=A.one(E.node),C=I.getAttribute("data-vstext"),D=I.getAttribute("data-vert_fin_search"),H=A.one(v).getAttribute("data-searchNews");
w.sa.assist.on(u,function(L){if(L.query){var K=A.one("#"+n),M=w.sa.buildSearchUrl(G,L.query,D,{fr:H});if(w.property==="finance"){M=M.replace("?s=","?p=");}if(!K){if(document.getElementById("hspart")){M+="&hspart="+document.getElementById("hspart").value;}if(document.getElementById("hsimp")){M+="&hsimp="+document.getElementById("hsimp").value;}if(document.getElementById("yucs-hstype")){M+="&type="+document.getElementById("yucs-hstype").value;}K=A.Node.create("<ul id='"+n+"'><li><a id='searchVertical' href='"+M+"'>"+C+"<q>"+A.Escape.html(L.query)+"</q></a></li></ul>");A.one(".sa-panel").append(K);}else{K.one("li").setContent("<a  id='searchVertical' href='"+M+"' text='"+L.query+"'>"+C+" <q>"+A.Escape.html(L.query)+"</q></a>");}}});}A.one(".yucs-search").on("submit",function(L){if(A.one("#"+j+" a.sa-active")){var K=A.one("#"+j+" a.sa-active").getAttribute("href");L.preventDefault();if(w.linkTarget==="_blank"||w.form.hasClass("yucs-search-fh")){window.open(K,"searchWin");}else{window.location.href=K;}}});});},_initRichAssist:function(y){var w=this,x={richassist:{fullpath:"https://s.yimg.com/lq/lib/s7/richassist-yui3-201009101433.js",requires:["base","get","node","event-focus","plugin"]},"tray-align-plugin":{fullpath:"https://s.yimg.com/lq/lib/s7/tray-align-plugin-201009101433.js",requires:["richassist"]},"tray-shim-plugin":{fullpath:"https://s.yimg.com/lq/lib/s7/tray-shim-plugin-201009101433.js",requires:["richassist"]}};ucs.YObj.applyConfig({modules:x});ucs.YObj.use("richassist","tray-align-plugin","tray-shim-plugin",function(B){var z=new B.Node(y),A=w._buildAssistConfig(z);w.sa=new B.Search.RichAssist(A);});},_setInputBlank:function(){this.input.set(h,"");},_handleSearchToggle:function(w){w.preventDefault();this._toggleSearch();},_toggleSearch:function(){var w=this,x=function(y){w._handleBodyClick(y);};d.one("#yucs").toggleClass("yucs-show_search");if(!this.bodyClick){if(d.UA.mobile&&("createTouch" in document)&&("addEventListener" in document.body)){d.log("using touchstart in mobile browser","info","search");document.body.addEventListener(c,x,false);this.bodyClick={detach:function(){if("removeEventListener" in document.body){document.body.removeEventListener(c,x,false);}}};}else{this.bodyClick=d.one("body").on(m,this._handleBodyClick,this);}this.bodyScroll=d.on("scroll",function(y){this._toggleSearch();},this);}else{this.bodyClick.detach();this.bodyScroll.detach();this.bodyClick=this.bodyScroll=null;}},_handleBodyClick:function(y){var x=y&&y.target||null,w;if(!x){return;}w=typeof x.ancestor==="function"?x:d.one(x);if(w&&!w.ancestor("#yucs")){this._toggleSearch();}},_handleWebSearchClick:function(w){this.isWebSearch=true;},_handleSubmit:function(x){if(this.form.one("#yucs-sky-term")){this.form.one("#yucs-sky-term").set(h,this._getInputValTrimmed());}if(this._inputIsDefaultTerm()){this._setInputBlank();}if(x&&x.target){this.isWebSearch=d.one(x.target).hasClass("yucs-wsearch-button");}if(document.getElementById("yuhead-att-cat")){if(this.form.getAttribute(f)!=="searchWin"){x.preventDefault();}var w=d.Node.create("<img />");w.once("load",this._handleImageLoad,this);w.once("error",this._handleImageLoad,this);this._timer=window.setTimeout(d.bind(this._handleImageLoad,this),2000);w.set("src","https://attadworks.turn.com/r/dd/id/L21rdC8xMDAvY2lkLzE1OTE3NzExL3QvMg/qry/"+encodeURIComponent(this._getInputValTrimmed()));}},_handleImageLoad:function(w){if(this._timer!==null){clearTimeout(this._timer);this._timer=null;}if(this.form.getAttribute(f)!=="searchWin"){this.form.submit();}},_handleInputKeypress:function(w){if((w.keyCode===46||w.keyCode===8)&&this._inputIsDefaultTerm()){w.preventDefault();return;}else{if(w.keyCode!==9&&w.keyCode!==13){if(this._inputIsDefaultTerm()){this._setInputBlank();this.input.removeClass("yucs-search-hint-color");}if(!this.loadedAssist){this.loadedAssist=true;this._initAssist();}}}},_handleInputBlur:function(w){if(this._inputIsEmpty()){this._resetSearchInput();}},_handleVertSearch:function(z){d.log("handleVertSearch");if(this.isWebSearch||d.one("#"+j+" a.sa-active")){this.isWebSearch=false;return;}z.preventDefault();if(this._inputIsEmpty()){return;}var y=z.target.getAttribute("data-vsearch"),w="1button",B,D=this.property,A=this.languagetag;if(this.is2Button){w="2button";}if(!y){y=this.vertSearchBtn.getAttribute("data-vsearch");}if(y&&D!=="mail"){B=y.split("?");if(B.length==1){B="";}else{y=B[0];B=B[1];}if(D==="finance"&&A!="zh-hant-hk"){y+="?uhb="+z.target.getAttribute("data-vfr")+"&fr="+d.one(v).getAttribute("data-searchNews")+"&type="+w+"&s="+encodeURIComponent(this.input.get(h));if(d.one("#searchAll")&&d.one("#searchAll").hasClass("sa-active")){y=d.one("#searchAll").getAttribute("href");}if(d.one("#searchVertical")&&d.one("#searchVertical").hasClass("sa-active")){y=d.one("#searchVertical").getAttribute("href");}}else{if(D==="groups"){y+="?query="+encodeURIComponent(this.input.get(h));}else{if(D==="help"){this.helpForm=d.one("#landingSearch");if(!this.helpForm){this.helpForm=d.one("#question_form");}var x=this;if(this.helpForm){this.vsu="";var C=this.helpForm.one('input[type="text"]').getAttribute("name");this.helpForm.all('input[type="hidden"]').each(function(E){x.vsu+=E.getAttribute("name")+"="+E.getAttribute("value")+"&";},x);y=this.helpForm.getAttribute("action");y+="?"+this.vsu+C+"="+encodeURIComponent(this.input.get(h));if(C!="question_box"){y+="&p="+encodeURIComponent(this.input.get(h));}}else{y+="?fr="+z.target.getAttribute("data-vfr")+"&type="+w+"&query="+encodeURIComponent(this.input.get(h));}}else{if(A=="zh-hant-tw"&&(D=="omg"||D=="news"||D=="ivy")){y+="?fr="+z.target.getAttribute("data-vfr")+"&type="+w+"&p="+encodeURIComponent(this.input.get(h))+"&ei=UTF-8";if(D=="ivy"){y+="&ilk=hq";}}else{if(D=="sports"&&A=="zh-hant-tw"){y+="?fr="+z.target.getAttribute("data-vfr")+"&type="+w+"&p="+encodeURIComponent(this.input.get(h))+"&ei=UTF-8&vs=tw.sports.yahoo.com";}else{if(D=="omg"&&A=="zh-hant-hk"){y+="?fr="+z.target.getAttribute("data-vfr")+"&type="+w+"&p="+encodeURIComponent(this.input.get(h))+"&vs=hk.ent.yahoo.com&ei=UTF-8";
}else{if(D=="finance"&&A=="zh-hant-hk"){y+="?fr="+z.target.getAttribute("data-vfr")+"&type="+w+"&p="+encodeURIComponent(this.input.get(h))+"&vs=hk.finance.yahoo.com&ei=UTF-8";}else{if(D=="news"&&A=="zh-hant-hk"){y+="?fr="+z.target.getAttribute("data-vfr")+"&type="+w+"&p="+encodeURIComponent(this.input.get(h))+"&ei=UTF-8";}else{if(D=="lifestyles"&&A=="zh-hant-hk"){y+="?fr="+z.target.getAttribute("data-vfr")+"&type="+w+"&p="+encodeURIComponent(this.input.get(h))+"&vs=hk.lifestyle.yahoo.com&ei=UTF-8";}else{if(D=="money"&&A=="zh-hant-tw"){y+="?fr="+z.target.getAttribute("data-vfr")+"&type="+w+"&p="+encodeURIComponent(this.input.get(h))+"&vs=tw.money.yahoo.com&ei=UTF-8";}else{if(z.target.getAttribute("data-vfr")){y+="?fr="+z.target.getAttribute("data-vfr")+"&type="+w+"&p="+encodeURIComponent(this.input.get(h));}else{y+="?type="+w+"&p="+encodeURIComponent(this.input.get(h));}}}}}}}}}}}if(B){y+="&"+B;}if(this.linkTarget==="_blank"||this.form.hasClass("yucs-search-fh")){window.open(y,"searchWin");}else{if(window!=window.top){window.top.location.href=y;}else{window.location.href=y;}}}else{this._fireVertSearchEvent(z);}},_fireVertSearchEvent:function(x){var w=this.input.get(h);this.publish("ucs:verticalSearchAction",{broadcast:2,emitFacade:true});this.fire("ucs:verticalSearchAction",{"query":w});},_handleWebSearchEvent:function(w){if(w.query){this.input.set("value",w.query);}this.form.submit();},_fireInterfaceReady:function(){this.publish("ucs:uhSearchInterfaceReady",{broadcast:2,emitFacade:true});this.fire("ucs:uhSearchInterfaceReady");},_getSearchInput:function(){return this.input;},_resetSearchInput:function(){if(this.searchHint){this.input.addClass("yucs-search-hint-color");}this._hideCleanBtn();this.input.set(h,this.searchHint);},_setSearchInput:function(w){this.input.set(h,w);},_getVertSearchBtnContent:function(){return this.vertSearchBtn.get(s);},_initHotKeyword:function(){var x=this.yucs.getAttribute("data-lang").split("-").pop(),y=d.one("#search_hot_keyword_block");var z={"title":" : ","count":8,"max_charaters":30,"data":"","url":"http://global.tts.search.yahoo.com/pulse.php","fr":this.vertSearchBtn.getAttribute("data-vfr"),"format":"json","intl":x,"type":"metro","src":"metro","order":"rank","retry":1,"project_id":0,"tracking_id":0,"host":"a.analytics.yahoo.com","colo":"","fr_code":"","spaceid":y.getData("spaceid"),"bucketid":y.getData("bucketid")};if("zh-hant-tw"==this.languagetag&&("news"==this.property||"omg"==this.property||"sports"==this.property||"ivy"==this.property||"mail"==this.property||"money"==this.property)){z.project_id=1167069579;z.tracking_id=10001167069579;z.host="y3.analytics.yahoo.com";z.colo="VSCALE4";if(z.fr=="tw_uh3_news_vert_1"){z.fr_code="tw_uh3_news_tts_1";}else{if(z.fr=="tw_uh3_news_vert_2"){z.fr_code="tw_uh3_news_tts_2";}else{if(z.fr=="tw_uh3_omg_vert_1"){z.fr_code="tw_uh3_omg_tts_1";}else{if(z.fr=="tw_uh3_sports_vert_1"){z.fr_code="tw_uh3_sports_tts_1";}else{if(z.fr=="tw_uh3_screen_vert_1"){z.fr_code="tw_uh3_screen_tts_1";}else{if(z.fr=="tw_uh3_mail_vert_1"){z.fr_code="tw_uh3_mail_tts_1";}else{if(z.fr=="uh3_money_vert"){z.url="https://tw.search.yahoo.com/tts";z.type="webttstw";z.fr_code="uh3_money_tts";}}}}}}}if("omg"==this.property||"ivy"==this.property){z.type="uh3omg";}}else{if("zh-hant-hk"==this.languagetag&&("omg"==this.property||"lifestyles"==this.property||"finance"==this.property||"news"==this.property||"mail"==this.property)){z.project_id=21324579;z.tracking_id=100021324579;z.host="y3.analytics.yahoo.com";z.colo="ONO";if(z.fr=="hkomg"){z.fr_code="hk_uh3_ent_tts_1";}else{if(z.fr=="hk_uh3_news_vert_1"){z.fr_code="hk_uh3_news_tts_1";}else{if(z.fr=="hk_uh3_finance_vert_1"){z.fr_code="hk_uh3_finance_tts_1";}else{if(z.fr=="hk_uh3_lifestyle_vert_1"){z.fr_code="hk_uh3_lifestyle_tts_1";}else{if(z.fr=="hk_uh3_mail_vert_1"){z.fr_code="hk_uh3_mail_tts_1";}}}}}if("news"==this.property||"finance"==this.property||"mail"==this.property){z.type="shine";}else{if("omg"==this.property||"lifestyles"==this.property){z.type="entertainment";}}}}var w=z.url+"?fr="+z.fr_code+"&format="+z.format+"&count="+z.count+"&intl="+z.intl+"&type="+z.type+"&src="+z.src+"&order="+z.order+"&jsonp_cb=YAHOO.util.UHScriptNodeDataSource.callbacks";this._getHotKeyword(w,z);},_getHotKeyword:function(x,w){d.Get.script(x,function(){onSuccess:YAHOO.util.UHScriptNodeDataSource.callbacks;});YAHOO.util.UHScriptNodeDataSource.callbacks=function(z){if(z!=undefined&&z[0]!=undefined){var E=0,C=1;var y='<marquee scrollamount="2" scrolldelay="120" direction="up" height="18" behavior="slide" loop="1">'+'<ul id="search_hot_keyword_items" class="search_hot_keywork_items">'+'<li id="search_hot_keyword_title">'+w.title+"</li>";for(var G in z){if(undefined!=z[G].display_term){E+=z[G].display_term.length;if(E>w.max_charaters){break;}if(G<w.count){y+='<li class="search_hot_keyword_item">';if(d.UA.ie&&d.UA.ie<9){y+='<a href="'+z[G].link+'" data-ylk="sec:search_hot_keyword_items;slk:search_hot_keyword_item_'+C+'">';}else{y+='<a href="#" onClick="setTimeout(function(){window.location.href=\''+z[G].link+'\';}, 2000)" data-ylk="sec:search_hot_keyword_items;slk:search_hot_keyword_item_'+C+'" class="rapidnofollow">';}y+=z[G].display_term;y+="</a></li>";C++;}}}y+="</ul></marquee>";this.hotKeywordBlock=d.one("#search_hot_keyword_block");this.hotKeywordBlock.set("innerHTML",y);var I={ultkey1:"search hot keyword",A_pn:"search hot keyword pn",tim:"red"};var F={project_id:w.tracking_id,host:w.host,cf:{22:w.fr_code}};var D={compr_type:"deflate",debug:false,tracked_mods:{"search_hot_keyword_items":"search_hot_keyword_items"},keys:I,spaceid:w.spaceid,ywa:F,nofollow_class:["rapidnofollow","search_hot_keyword_items"]};if(typeof(YAHOO.i13n)=="undefined"){YAHOO.i13n={};}if(typeof(YAHOO.i13n.Rapid)=="undefined"){var A="https://s.yimg.com/ss/rapid-3.12.1.js",H="https://s.yimg.com/ss/rapidworker-1.1.js";d.Get.js([A,H],function(K){if(K){console.log("get rapid js error");}else{var J=new YAHOO.i13n.Rapid(D);}});}else{var B=new YAHOO.i13n.Rapid(D);
}}};},_hideCleanBtn:function(){if(d.one(r)){d.one(r).setStyle("display","none");}},_showCleanBtn:function(){if(d.one(r)){d.one(r).setStyle("display","inline-block");}},_setVertSearchBtnContent:function(w){this.vertSearchBtn.set(s,(w["text"])?w["text"]:w);},_setVertSearchBtnPathName:function(w){this.vertSearchBtn.setAttribute("data-vsearch",w);},_trackMailSearch:function(){d.log("Mail search");this._sendBeacon(this.yltvsearch);},_trackMailSearchSugg:function(){d.log("Mail search sugg");this._sendBeacon(this.yltvsearchsugg);},_trackPropSearch:function(){d.log("Prop Search");this._sendBeacon(this.yltvsearch);},_sendBeacon:window.ucs._sendBeacon};d.augment(ucs.Search,d.EventTarget);}},"1.0",{requires:["node","event","event-custom","event-resize","dom-screen"]});ucs.YObj.use("node","ucs-search",function(b){var a=b.all("#yucs-search.yucs-search-activate");a.each(function(f,c,e){if(f.ancestor(".yucs-fl-left")){ucs.UhSearchInterface=new ucs.Search(f);ucs.UhSearchInterface.getInput=function(){return ucs.UhSearchInterface._getSearchInput();};ucs.UhSearchInterface.setInput=function(g){ucs.UhSearchInterface._setSearchInput(g);};ucs.UhSearchInterface.resetInput=function(){ucs.UhSearchInterface._resetSearchInput();};ucs.UhSearchInterface.getVertSearchBtnText=function(){return ucs.UhSearchInterface._getVertSearchBtnContent();};ucs.UhSearchInterface.setVertSearchBtnText=function(g){ucs.UhSearchInterface._setVertSearchBtnContent(g);};ucs.UhSearchInterface.setVertSearchBtnPathName=function(g){ucs.UhSearchInterface._setVertSearchBtnPathName(g);};ucs.UhSearchInterface._fireInterfaceReady();}else{b.log("instantiating search components");var d=new ucs.Search(f);}});});YUI.add("ucs-search-filter",function(e){e.namespace("ucs.SearchFilter");var a="#yucs-sfilter_dropdown",c="yucs-menu-active",d="#mnp-search_box",f=5,b=0;e.ucs.SearchFilter=function(g){e.ucs.SearchFilter.superclass.constructor.apply(this,[g,{panelSelector:a,openDelay:0}]);this.selected=this.panel.one(".selected");this.filterTxt=this.menu.one("#yucs-sfilter_text");this.menu.removeClass("yucs-sf-activate");this.search_input=e.one(d);if(e.UA.ie&&e.UA.ie<8){b=parseInt(this.search_input.getStyle("paddingLeft"),10);}this.menu_data=this.menu.getData();this.ylt=this.menu_data["ylt"]||"";this.yltvs=this.menu_data["ylt-vs"]||"";this.yltws=this.menu_data["ylt-ws"]||"";this.one_button=e.one(".yucs-one_button")?true:false;this._init();};e.extend(e.ucs.SearchFilter,e.ucs.MenuUtils,{_init:function(){if(e.one(".yucs-shopping")){var j=/([&?]+did=)(\d+)/g,i=document.location.search,h=j.exec(i),h=(h)?(h[2]):("0");var g=this.panel.one("[data-value='"+h+"']");if(h!="0"){this._setSelected(g);}}this._setInputWidth();this._initEvents();},_initEvents:function(){this.menu.detach("hover");this.panel.detach("hover");this.menu.on("click",this._handleFilterClick,this);this.panel.delegate("click",e.bind(this._handleMenuItemClick,this),"a");e.Global.on("ucs:menuNavShow",this._hideMenu,this);},_handleFilterClick:function(g){g.halt();if(g.target.compareTo(this.menu)===true){this.search_input.focus();this._setCaretEnd();}else{this._handleMenuClick(g);}},_handleMenuClick:function(g){g.halt();if(this.panel.hasClass("yucs-hide")){this._showMenu(g);this.menu.removeClass("yucs-has-focus");this.documentClickHandle=e.one("body").on("click",this._handleDocumentClick,this);this.documentMouseDownHandle=e.one("body").on("mousedown",this._handleDocumentClick,this);}else{this._hideMenu();}},_handleMenuItemClick:function(g){g.halt();this._sendBeacon(g.target.getData("ylt"));if(g.target.compareTo(this.selected)===false){this._setSelected(g.target);}this.search_input.focus();},_setSelected:function(h){this.selected.removeClass("selected");h.addClass("selected");this.selected=h;h=h.one("a")||h;this.filterTxt.set("text",h.get("text"));this._setInputWidth();var g=h.getAttribute("href");if(this.one_button===true){g=g.replace("?",this.yltws+"?");e.one("form.yucs-search").setAttribute("action",g);}else{g=g.replace("?",this.yltvs+"?");e.one("#yucs-sprop_button").setAttribute("data-vsearch",g);}this._hideMenu();},_setInputWidth:function(){var g=this.menu.get("offsetWidth"),h;if(!e.UA.ie){this.search_input.setStyle("paddingRight",g);}else{h=e.one("#yucs-input_wrap").get("offsetWidth")-g-b;this.search_input.setStyle("width",h);}},_setCaretEnd:function(){var i;if((i=window.document.selection)){if(i.type!="Control"){var g=this.search_input.get("value").length,h=i.createRange();h.move("character",g);h.select();}}},_showMenu:function(g){if(this.panel.hasClass("yucs-hide")){this._sendBeacon(this.ylt);this.menu.addClass(c);e.ucs.SearchFilter.superclass._showMenu.apply(this,arguments);}},_hideMenu:function(g){e.ucs.SearchFilter.superclass._hideMenu.apply(this,arguments);this.menu.removeClass(c);},_sendBeacon:window.ucs._sendBeacon,_position:{}});e.augment(e.ucs.SearchFilter,e.EventTarget);},"1.0",{requires:["node","event","event-custom","ucs-menu-utils","ucs-search"]});(function(){ucs.YObj.use("node","ucs-search-filter",function(c){var b=c.one("#yucs-search #yucs-sfilter.yucs-sf-activate"),a;if(b){a=new c.ucs.SearchFilter(b);}});})();YUI.add("ucs-helpmenu",function(d){d.namespace("ucs.HelpMenu");var u="ucs:helpMenuShow",g="ucs:helpDebugMenuShow",m="ucs:helpMenuItemClick",l="ucs:helpDebugMenuItemClick",s="yucs-help_button",a="ucs:utilityMenuShow",q="ucs:utilityMenuItemClick";var p='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div>'+'<a target="{target}" {actionData} href="{url}" {disabledAria}>'+"{icon}"+"{menuText}"+"</a></div></li>{separatorBottom}",x='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div>'+'<a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria}>'+"{icon}"+"{menuText}"+"</a></div></li>{separatorBottom}",o='<span class="yucs-separator" role="presentation"></span>',i="click",k="mouseover",v="focus",t="a",j="role",c="tabIndex",h="yucs-hide",b="iframe",n="ul",e="li",r="parentNode",w="http://l.yimg.com/a/lib/ush/icon.gif",f="https://s.yimg.com/lq/lib/ush/icon.gif";d.ucs.HelpMenu=function(y){this.menuContainer=y.ancestor("div");this.shown=false;this.helpLink=d.one("#yucs-help_button");this.helpLink.setAttribute("data-mad","true");this.previewPanel=d.one("#yucs-help_inner");this.ylt=this.previewPanel.getAttribute("data-yltmenushown");this.PANEL_OFFSET=30;this.PANEL_OFFSET_Y=3;this.headerNode=d.one("#yucs");d.ucs.HelpMenu.superclass.constructor.apply(this,[this.menuContainer,{panelSelector:"#yucs-help_inner"}]);this._initCustomEvents();y.removeClass("yucs-hm-activate");};d.extend(d.ucs.HelpMenu,d.ucs.MenuUtils,{_initCustomEvents:function(){this.publish(u,{broadcast:2,emitFacade:true});this.publish(g,{broadcast:2,emitFacade:true});this.publish(m,{broadcast:2,emitFacade:true});this.publish(l,{broadcast:2,emitFacade:true});this.publish(a,{broadcast:2,emitFacade:true});this.publish(q,{broadcast:2,emitFacade:true});d.Global.on("ucs:utilityMenuItems",this._handleHelpMenuItems,this,{"location":"top","menuType":"minty-utility-item"});d.Global.on("ucs:helpMenuItems",this._handleHelpMenuItems,this,{"location":"bottom","menuType":"minty-help-item"});d.Global.on("ucs:helpDebugMenuItems",this._handleHelpDebugMenuItems,this,{"location":"bottom","menuType":"minty-debug-item"});},_showMenu:function(y){if(this.previewPanel.hasClass("yucs-hide")){this._sendBeacon();}d.ucs.HelpMenu.superclass._showMenu.apply(this,arguments);if(d.one("#yucs").getAttribute("data-property")==="mail"){this.menu.all("li").addClass("yucs-hide");}if(y&&(y.ctrlKey||y.metaKey)&&y.shiftKey){this.fire(g);if(this.shown===false){d.later(4000,this,function(){this.fire(g);});}else{this._showDebugMenuItems();}}else{this.fire(u);this.fire(a);if(this.shown===false){d.later(4000,this,function(){this.fire(u);this.fire(a);});}else{this._showMenuItems();}}this._setPosition();},_showDebugMenuItems:function(){this.shown=true;this.menu.all("li").addClass("yucs-hide");this.menu.all("span.minty-item").setStyle("display","none");this.menu.all("li.debug-item").removeClass("yucs-hide");this.menu.all("span.debug-item").setStyle("display","block");},_showMenuItems:function(){this.shown=true;this.menu.all("li").removeClass("yucs-hide");this.menu.all("span.minty-item").setStyle("display","block");this.menu.all("li.debug-item").addClass("yucs-hide");this.menu.all("span.debug-item").setStyle("display","none");this._destructAria();this._initAria();},_setPosition:function(){if(true){this.mailIcon=d.one("#yucs-help_button");var B=this.previewPanel.one(".yucs-dock"),z=B&&B.get("offsetWidth"),A,y=this.headerNode.get("offsetHeight");if(this.rtl){this.previewPanel.setX(Math.round(this.headerNode.getX()+this.PANEL_OFFSET));}else{this.previewPanel.setX(Math.round(this.headerNode.getX()+this.headerNode.get("offsetWidth")-this.panel.get("offsetWidth")-2));}if(d.one("#search_hot_keyword_block")){this.panel.setY((this.headerNode.getY()+y)-this.PANEL_OFFSET_Y-30);}else{if(y>0){this.panel.setY((this.headerNode.getY()+y)-this.PANEL_OFFSET_Y);}else{this.panel.setY(this.mailIcon.getY()+this.mailIcon.get("offsetHeight")+3);}}if(B){A=(this.mailIcon.get("offsetWidth")/2)-(z/2);B.setX(this.mailIcon.getX()+A);}}},_handleKeyup:function(y){if(27===y.keyCode||9===y.keyCode){this.menu.one("a").focus();this._hideMenu();}else{if(40===y.keyCode&&!this.keyedup){if(this.panel.one("a")){this._showMenu(y);this.panel.one("a").focus();}this.keyedup=true;}}},_handleHelpMenuItems:function(D,C){var z=C&&C.location||"top",B=C&&C.menuType||"minty-help-item",A,y;if(!D.menuGroups||!D.menuGroups.length){return;}A=D.menuGroups;y=this.menu.one("#yuhead-help-panel");if(D.reset&&y){y.all("."+B).remove(true);}this._addMenuGroups(A,z,false,B);this._showMenuItems();},_handleHelpDebugMenuItems:function(z){var y;if(!z.menuGroups||!z.menuGroups.length){return;}y=z.menuGroups;itemList=this.menu.one("#yuhead-help-panel");if(z.reset&&itemList){itemList.all(".minty-debug-item").remove(true);}this._addMenuGroups(y,"top",true,"minty-debug-item");this._showDebugMenuItems();},_handleMenuItemClick:function(E){var D,A,y,z;D=E.target;D=D.ancestor("a",true);A=D.getAttribute("data-mad");y=D.getAttribute("data-customevt");z=D.ancestor("li").hasClass("disabled");if(z){E.halt();return;}if(y){E.preventDefault();}if(!z){var C={actionData:A};var B=D.ancestor("li");if(B.hasClass("debug-item")){this.fire(l,C);}else{if(B.hasClass("minty-utility-item")){this.fire(q,C);}else{this.fire(m,C);}}}},_addMenuGroups:function(B,H,F,G){var D=this.menu.one("#yuhead-help-panel"),y="",z,C=B.length,A,E;z=D.hasChildNodes();for(A=0;A<C;A++){E=B[A].length;if(H==="bottom"){if(A>0){B[A][0].separatorTop=true;}}else{if(A<(C-1)||z){B[A][E-1].separatorBottom=true;}}y+=this._addMenuGroup(B[A],F,G);}if(D.ancestor("div.yucs-yql_loading")){D.ancestor("div.yucs-yql_loading").removeClass("yucs-yql_loading");}if(H==="bottom"){D.append(y);}else{D.prepend(y);}if(D.one(".yucs-keepatbottom")){D.all(".yucs-keepatbottom").each(function(I){D.append(I);});}},_addMenuGroup:function(z,C,B){var D="",y=z.length,A;for(A=0;A<y;A++){if(C){z[A].isDebugItem=true;z[A].menuClass=B+" debug-item";}else{z[A].isDebugItem=false;z[A].menuClass=B+" minty-item";
}D+=this._addMenuItem(z[A],B);}return D;},_addMenuItem:function(A,z){var y="";if(A.isActive){A.checkedAria='aria-checked="true"';}else{A.checkedAria="";}if(A.isDisabled){A.disabledAria='aria-disabled="true"';}else{A.disabledAria="";}switch(A.actionType){case"link":y=d.substitute(p,A,this._processTemplateValue);break;case"customEvent":y=d.substitute(x,A,this._processTemplateValue);break;default:break;}if(y){if(A.isDebugItem){y=y.replace(/separator/,"separator debug-item "+z);}else{y=y.replace(/separator/,"separator minty-item "+z);}}return y;},_processTemplateValue:function(z,A,B){var C="";var y=(document.location.protocol==="https:")?f:w;switch(z){case"icon":if(A!==undefined){if(A==="available"){C='<img src="'+y+'" class="yucs-opi available"/>';}else{if(A==="offline"){C='<img src="'+y+'" class="yucs-opi offline"/>';}else{if(A==="invisible"){C='<img src="'+y+'" class="yucs-opi invisible"/>';}else{if(A==="busy"){C='<img src="'+y+'" class="yucs-opi busy"/>';}else{if(A==="idle"){C='<img src="'+y+'" class="yucs-opi idle"/>';}else{C='<img src="'+A+'" />';}}}}}}break;case"separatorTop":if(A){C=o;}break;case"separatorBottom":if(A){C=o;}break;case"actionData":if(A){C='data-mad="'+A+'"';}break;case"isDisabled":if(A){C="disabled";}break;case"isActive":if(A){C="sp active";}break;case"checkedAria":C=A;break;default:C=A;break;}return C;},_sendBeacon:function(){if(this.ylt){window.ucs._sendBeacon(this.ylt+"?t="+Math.random());}}});d.augment(d.ucs.HelpMenu,d.EventTarget);},"1.0",{requires:["oop","node","event-custom","substitute","ucs-menu-utils"]});(function(){ucs.YObj.use("node","ucs-helpmenu",function(c){var b=c.one("#yucs").all(".yucs-hm-activate"),a;b.each(function(d){a=new c.ucs.HelpMenu(d);});});})();